<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>compiler_gym.envs.llvm &mdash; CompilerGym 0.2.5 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="compiler_gym.leaderboard" href="../compiler_gym/leaderboard.html" />
    <link rel="prev" title="compiler_gym.envs.gcc" href="../compiler_gym/envs/gcc.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html">
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.2.5
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">Command Line Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rpc.html">RPC Service Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Environments</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">LLVM Environment Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../envs/gcc.html">GCC Environment Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../envs/loop_tool.html">loop_tool Environment Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../envs/mlir.html">MLIR Environment Reference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python API Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../compiler_gym/compiler_gym.html">compiler_gym</a></li>
<li class="toctree-l1"><a class="reference internal" href="../compiler_gym/datasets.html">compiler_gym.datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../compiler_gym/envs.html">compiler_gym.envs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../compiler_gym/envs/gcc.html">compiler_gym.envs.gcc</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">compiler_gym.envs.llvm</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#constructing-benchmarks">Constructing Benchmarks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.envs.llvm.make_benchmark"><code class="docutils literal notranslate"><span class="pre">make_benchmark()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.envs.llvm.BenchmarkFromCommandLine"><code class="docutils literal notranslate"><span class="pre">BenchmarkFromCommandLine</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#compiler_gym.envs.llvm.BenchmarkFromCommandLine.compile"><code class="docutils literal notranslate"><span class="pre">BenchmarkFromCommandLine.compile()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.envs.llvm.ClangInvocation"><code class="docutils literal notranslate"><span class="pre">ClangInvocation</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#compiler_gym.envs.llvm.ClangInvocation.__init__"><code class="docutils literal notranslate"><span class="pre">ClangInvocation.__init__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.envs.llvm.get_system_library_flags"><code class="docutils literal notranslate"><span class="pre">get_system_library_flags()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#datasets">Datasets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.envs.llvm.datasets.get_llvm_datasets"><code class="docutils literal notranslate"><span class="pre">get_llvm_datasets()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.envs.llvm.datasets.AnghaBenchDataset"><code class="docutils literal notranslate"><span class="pre">AnghaBenchDataset</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.envs.llvm.datasets.BlasDataset"><code class="docutils literal notranslate"><span class="pre">BlasDataset</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.envs.llvm.datasets.CBenchDataset"><code class="docutils literal notranslate"><span class="pre">CBenchDataset</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.envs.llvm.datasets.CLgenDataset"><code class="docutils literal notranslate"><span class="pre">CLgenDataset</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.envs.llvm.datasets.CsmithDataset"><code class="docutils literal notranslate"><span class="pre">CsmithDataset</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.envs.llvm.datasets.GitHubDataset"><code class="docutils literal notranslate"><span class="pre">GitHubDataset</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.envs.llvm.datasets.JotaiBenchDataset"><code class="docutils literal notranslate"><span class="pre">JotaiBenchDataset</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.envs.llvm.datasets.LinuxDataset"><code class="docutils literal notranslate"><span class="pre">LinuxDataset</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.envs.llvm.datasets.LlvmStressDataset"><code class="docutils literal notranslate"><span class="pre">LlvmStressDataset</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.envs.llvm.datasets.MibenchDataset"><code class="docutils literal notranslate"><span class="pre">MibenchDataset</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.envs.llvm.datasets.NPBDataset"><code class="docutils literal notranslate"><span class="pre">NPBDataset</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.envs.llvm.datasets.OpenCVDataset"><code class="docutils literal notranslate"><span class="pre">OpenCVDataset</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.envs.llvm.datasets.POJ104Dataset"><code class="docutils literal notranslate"><span class="pre">POJ104Dataset</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.envs.llvm.datasets.TensorFlowDataset"><code class="docutils literal notranslate"><span class="pre">TensorFlowDataset</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#miscellaneous">Miscellaneous</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.envs.llvm.compute_observation"><code class="docutils literal notranslate"><span class="pre">compute_observation()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../compiler_gym/leaderboard.html">compiler_gym.leaderboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../compiler_gym/service.html">compiler_gym.service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../compiler_gym/service/runtime.html">compiler_gym.service.runtime</a></li>
<li class="toctree-l1"><a class="reference internal" href="../compiler_gym/spaces.html">compiler_gym.spaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../compiler_gym/views.html">compiler_gym.views</a></li>
<li class="toctree-l1"><a class="reference internal" href="../compiler_gym/wrappers.html">compiler_gym.wrappers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">C++ API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cc/compiler_gym/envs/llvm/service.html">compiler_gym/envs/llvm/service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cc/compiler_gym/service.html">compiler_gym/service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cc/compiler_gym/service/runtime.html">compiler_gym/service/runtime</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cc/compiler_gym/util.html">compiler_gym/util</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">CompilerGym</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>compiler_gym.envs.llvm</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/llvm/api.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="compiler-gym-envs-llvm">
<h1>compiler_gym.envs.llvm<a class="headerlink" href="#compiler-gym-envs-llvm" title="Permalink to this heading"></a></h1>
<p>The <code class="code docutils literal notranslate"><span class="pre">compiler_gym.envs.llvm</span></code> module contains datasets and API extensions
for the <a class="reference internal" href="index.html"><span class="doc">LLVM Environments</span></a>. See <a class="reference internal" href="../compiler_gym/envs.html#compiler_gym.envs.LlvmEnv" title="compiler_gym.envs.LlvmEnv"><code class="xref py py-class docutils literal notranslate"><span class="pre">LlvmEnv</span></code></a> for the class definition.</p>
<div class="contents local topic" id="document-contents">
<p class="topic-title">Document contents:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#constructing-benchmarks" id="id3">Constructing Benchmarks</a></p></li>
<li><p><a class="reference internal" href="#datasets" id="id4">Datasets</a></p></li>
<li><p><a class="reference internal" href="#miscellaneous" id="id5">Miscellaneous</a></p></li>
</ul>
</div>
<section id="constructing-benchmarks">
<h2><a class="toc-backref" href="#id3">Constructing Benchmarks</a><a class="headerlink" href="#constructing-benchmarks" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="compiler_gym.envs.llvm.make_benchmark">
<span class="sig-prename descclassname"><span class="pre">compiler_gym.envs.llvm.</span></span><span class="sig-name descname"><span class="pre">make_benchmark</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Path</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#compiler_gym.envs.llvm.ClangInvocation" title="compiler_gym.envs.llvm.llvm_benchmark.ClangInvocation"><span class="pre">ClangInvocation</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Path</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#compiler_gym.envs.llvm.ClangInvocation" title="compiler_gym.envs.llvm.llvm_benchmark.ClangInvocation"><span class="pre">ClangInvocation</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">system_includes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">600</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="../compiler_gym/datasets.html#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.benchmark.Benchmark"><span class="pre">Benchmark</span></a></span></span><a class="reference internal" href="../_modules/compiler_gym/envs/llvm/llvm_benchmark.html#make_benchmark"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.llvm.make_benchmark" title="Permalink to this definition"></a></dt>
<dd><p>Create a benchmark for use by LLVM environments.</p>
<p>This function takes one or more inputs and uses them to create an LLVM
bitcode benchmark that can be passed to
<a class="reference internal" href="../compiler_gym/envs.html#compiler_gym.envs.LlvmEnv.reset" title="compiler_gym.envs.LlvmEnv.reset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">compiler_gym.envs.LlvmEnv.reset()</span></code></a>.</p>
<p>The following input types are supported:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 39%" />
<col style="width: 16%" />
<col style="width: 45%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>File Suffix</strong></p></td>
<td><p><strong>Treated as</strong></p></td>
<td><p><strong>Converted using</strong></p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">.bc</span></code></p></td>
<td><p>LLVM IR bitcode</p></td>
<td><p>No conversion required.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">.ll</span></code></p></td>
<td><p>LLVM IR text format</p></td>
<td><p>Assembled to bitcode using llvm-as.</p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">.c</span></code>, <code class="code docutils literal notranslate"><span class="pre">.cc</span></code>, <code class="code docutils literal notranslate"><span class="pre">.cpp</span></code>, <code class="code docutils literal notranslate"><span class="pre">.cxx</span></code></p></td>
<td><p>C / C++ source</p></td>
<td><p>Compiled to bitcode using clang and the given <code class="code docutils literal notranslate"><span class="pre">copt</span></code>.</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The LLVM IR format has no compatability guarantees between versions (see
<a class="reference external" href="https://llvm.org/docs/DeveloperPolicy.html#ir-backwards-compatibility">LLVM docs</a>).
You must ensure that any <code class="code docutils literal notranslate"><span class="pre">.bc</span></code> and <code class="code docutils literal notranslate"><span class="pre">.ll</span></code> files are
compatible with the LLVM version used by CompilerGym, which can be
reported using <a class="reference internal" href="../compiler_gym/envs.html#compiler_gym.envs.CompilerEnv.compiler_version" title="compiler_gym.envs.CompilerEnv.compiler_version"><code class="xref py py-func docutils literal notranslate"><span class="pre">env.compiler_version</span></code></a>.</p>
</div>
<p>E.g. for single-source C/C++ programs, you can pass the path of the source
file:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">benchmark</span> <span class="o">=</span> <span class="n">make_benchmark</span><span class="p">(</span><span class="s1">&#39;my_app.c&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span> <span class="o">=</span> <span class="n">gym</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s2">&quot;llvm-v0&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="n">benchmark</span><span class="o">=</span><span class="n">benchmark</span><span class="p">)</span>
</pre></div>
</div>
<p>The clang invocation used is roughly equivalent to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ clang my_app.c -O0 -c -emit-llvm -o benchmark.bc
</pre></div>
</div>
<p>Additional compile-time arguments to clang can be provided using the
<code class="code docutils literal notranslate"><span class="pre">copt</span></code> argument:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">benchmark</span> <span class="o">=</span> <span class="n">make_benchmark</span><span class="p">(</span><span class="s1">&#39;/path/to/my_app.cpp&#39;</span><span class="p">,</span> <span class="n">copt</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;-O2&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>If you need more fine-grained control over the options, you can directly
construct a <a class="reference internal" href="#compiler_gym.envs.llvm.ClangInvocation" title="compiler_gym.envs.llvm.ClangInvocation"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClangInvocation</span></code></a> to pass a list of arguments to
clang:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">benchmark</span> <span class="o">=</span> <span class="n">make_benchmark</span><span class="p">(</span>
<span class="go">    ClangInvocation([&#39;/path/to/my_app.c&#39;], system_includes=False, timeout=10)</span>
<span class="go">)</span>
</pre></div>
</div>
<p>For multi-file programs, pass a list of inputs that will be compiled
separately and then linked to a single module:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">benchmark</span> <span class="o">=</span> <span class="n">make_benchmark</span><span class="p">([</span>
<span class="go">    &#39;main.c&#39;,</span>
<span class="go">    &#39;lib.cpp&#39;,</span>
<span class="go">    &#39;lib2.bc&#39;,</span>
<span class="go">    &#39;foo/input.bc&#39;</span>
<span class="go">])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputs</strong> – An input, or list of inputs.</p></li>
<li><p><strong>copt</strong> – A list of command line options to pass to clang when compiling
source files.</p></li>
<li><p><strong>system_includes</strong> – Whether to include the system standard libraries
during compilation jobs. This requires a system toolchain. See
<a class="reference internal" href="#compiler_gym.envs.llvm.get_system_library_flags" title="compiler_gym.envs.llvm.get_system_library_flags"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_system_library_flags()</span></code></a>.</p></li>
<li><p><strong>timeout</strong> – The maximum number of seconds to allow clang to run before
terminating.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <code class="code docutils literal notranslate"><span class="pre">Benchmark</span></code> instance.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>FileNotFoundError</strong> – If any input sources are not found.</p></li>
<li><p><strong>TypeError</strong> – If the inputs are of unsupported types.</p></li>
<li><p><strong>OSError</strong> – If a suitable compiler cannot be found.</p></li>
<li><p><a class="reference internal" href="../compiler_gym/datasets.html#compiler_gym.datasets.BenchmarkInitError" title="compiler_gym.datasets.BenchmarkInitError"><strong>BenchmarkInitError</strong></a> – If a compilation job fails.</p></li>
<li><p><strong>TimeoutExpired</strong> – If a compilation job exceeds <code class="code docutils literal notranslate"><span class="pre">timeout</span></code>
seconds.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.envs.llvm.BenchmarkFromCommandLine">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">compiler_gym.envs.llvm.</span></span><span class="sig-name descname"><span class="pre">BenchmarkFromCommandLine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">invocation</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">GccInvocation</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bitcode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bytes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/envs/llvm/benchmark_from_command_line.html#BenchmarkFromCommandLine"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.llvm.BenchmarkFromCommandLine" title="Permalink to this definition"></a></dt>
<dd><p>A benchmark that has been constructed from a command line invocation.</p>
<p>See <a class="reference internal" href="../compiler_gym/envs.html#compiler_gym.envs.LlvmEnv.make_benchmark_from_command_line" title="compiler_gym.envs.LlvmEnv.make_benchmark_from_command_line"><code class="xref py py-meth docutils literal notranslate"><span class="pre">env.make_benchmark_from_command_line()</span></code></a>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.envs.llvm.BenchmarkFromCommandLine.compile">
<span class="sig-name descname"><span class="pre">compile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">60</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/compiler_gym/envs/llvm/benchmark_from_command_line.html#BenchmarkFromCommandLine.compile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.llvm.BenchmarkFromCommandLine.compile" title="Permalink to this definition"></a></dt>
<dd><p>This completes the compilation and linking of the final executable
specified by the original command line.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.envs.llvm.ClangInvocation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">compiler_gym.envs.llvm.</span></span><span class="sig-name descname"><span class="pre">ClangInvocation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">system_includes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">600</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/envs/llvm/llvm_benchmark.html#ClangInvocation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.llvm.ClangInvocation" title="Permalink to this definition"></a></dt>
<dd><p>Class to represent a single invocation of the clang compiler.</p>
<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.envs.llvm.ClangInvocation.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">system_includes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">600</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/envs/llvm/llvm_benchmark.html#ClangInvocation.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.llvm.ClangInvocation.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Create a clang invocation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> – The list of arguments to pass to clang.</p></li>
<li><p><strong>system_includes</strong> – Whether to include the system standard libraries
during compilation jobs. This requires a system toolchain. See
<a class="reference internal" href="#compiler_gym.envs.llvm.get_system_library_flags" title="compiler_gym.envs.llvm.get_system_library_flags"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_system_library_flags()</span></code></a>.</p></li>
<li><p><strong>timeout</strong> – The maximum number of seconds to allow clang to run
before terminating.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="compiler_gym.envs.llvm.get_system_library_flags">
<span class="sig-prename descclassname"><span class="pre">compiler_gym.envs.llvm.</span></span><span class="sig-name descname"><span class="pre">get_system_library_flags</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">compiler</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/compiler_gym/envs/llvm/llvm_benchmark.html#get_system_library_flags"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.llvm.get_system_library_flags" title="Permalink to this definition"></a></dt>
<dd><p>Determine the set of compilation flags needed to use the host system
libraries.</p>
<p>This uses the system compiler to determine the search paths for C/C++ system
headers, and on macOS, the location of libclang_rt.osx.a. By default,
<code class="code docutils literal notranslate"><span class="pre">c++</span></code> is invoked. This can be overridden by setting
<code class="code docutils literal notranslate"><span class="pre">os.environ[&quot;CXX&quot;]</span></code> prior to calling this function.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of command line flags for a compiler.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>HostCompilerFailure</strong> – If the host compiler cannot be determined, or
fails to compile a trivial piece of code.</p></li>
<li><p><strong>UnableToParseHostCompilerOutput</strong> – If the output of the compiler
cannot be understood.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="datasets">
<h2><a class="toc-backref" href="#id4">Datasets</a><a class="headerlink" href="#datasets" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="compiler_gym.envs.llvm.datasets.get_llvm_datasets">
<span class="sig-prename descclassname"><span class="pre">compiler_gym.envs.llvm.datasets.</span></span><span class="sig-name descname"><span class="pre">get_llvm_datasets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">site_data_base</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Path</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../compiler_gym/datasets.html#compiler_gym.datasets.Dataset" title="compiler_gym.datasets.dataset.Dataset"><span class="pre">Dataset</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/compiler_gym/envs/llvm/datasets.html#get_llvm_datasets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.llvm.datasets.get_llvm_datasets" title="Permalink to this definition"></a></dt>
<dd><p>Instantiate the builtin LLVM datasets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>site_data_base</strong> – The root of the site data path.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An iterable sequence of <a class="reference internal" href="../compiler_gym/datasets.html#compiler_gym.datasets.Dataset" title="compiler_gym.datasets.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> instances.</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.envs.llvm.datasets.AnghaBenchDataset">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">compiler_gym.envs.llvm.datasets.</span></span><span class="sig-name descname"><span class="pre">AnghaBenchDataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">site_data_base</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manifest_url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manifest_sha256</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">deprecated</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/envs/llvm/datasets/anghabench.html#AnghaBenchDataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.llvm.datasets.AnghaBenchDataset" title="Permalink to this definition"></a></dt>
<dd><p>A dataset of C programs curated from GitHub source code.</p>
<p>The dataset is from:</p>
<blockquote>
<div><p>da Silva, Anderson Faustino, Bruno Conde Kind, José Wesley de Souza
Magalhaes, Jerônimo Nunes Rocha, Breno Campos Ferreira Guimaraes, and
Fernando Magno Quinão Pereira. “ANGHABENCH: A Suite with One Million
Compilable C Benchmarks for Code-Size Reduction.” In 2021 IEEE/ACM
International Symposium on Code Generation and Optimization (CGO),
pp. 378-390. IEEE, 2021.</p>
</div></blockquote>
<p>And is available at:</p>
<blockquote>
<div><p><a class="reference external" href="http://cuda.dcc.ufmg.br/angha/home">http://cuda.dcc.ufmg.br/angha/home</a></p>
</div></blockquote>
<section id="installation">
<h3>Installation<a class="headerlink" href="#installation" title="Permalink to this heading"></a></h3>
<p>The AnghaBench dataset consists of C functions that are compiled to LLVM-IR
on-demand and cached. The first time each benchmark is used there is an
overhead of compiling it from C to bitcode. This is a one-off cost.</p>
</section>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.envs.llvm.datasets.BlasDataset">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">compiler_gym.envs.llvm.datasets.</span></span><span class="sig-name descname"><span class="pre">BlasDataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">site_data_base</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/envs/llvm/datasets.html#BlasDataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.llvm.datasets.BlasDataset" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.envs.llvm.datasets.CBenchDataset">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">compiler_gym.envs.llvm.datasets.</span></span><span class="sig-name descname"><span class="pre">CBenchDataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">site_data_base</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/envs/llvm/datasets/cbench.html#CBenchDataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.llvm.datasets.CBenchDataset" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.envs.llvm.datasets.CLgenDataset">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">compiler_gym.envs.llvm.datasets.</span></span><span class="sig-name descname"><span class="pre">CLgenDataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">site_data_base</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/envs/llvm/datasets/clgen.html#CLgenDataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.llvm.datasets.CLgenDataset" title="Permalink to this definition"></a></dt>
<dd><p>The CLgen dataset contains 1000 synthetically generated OpenCL kernels.</p>
<p>The dataset is from:</p>
<blockquote>
<div><p>Cummins, Chris, Pavlos Petoumenos, Zheng Wang, and Hugh Leather.
“Synthesizing benchmarks for predictive modeling.” In 2017 IEEE/ACM
International Symposium on Code Generation and Optimization (CGO),
pp. 86-99. IEEE, 2017.</p>
</div></blockquote>
<p>And is available at:</p>
<blockquote>
<div><p><a class="reference external" href="https://github.com/ChrisCummins/paper-synthesizing-benchmarks">https://github.com/ChrisCummins/paper-synthesizing-benchmarks</a></p>
</div></blockquote>
<section id="id1">
<h3>Installation<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h3>
<p>The CLgen dataset consists of OpenCL kernels that are compiled to LLVM-IR
on-demand and cached. The first time each benchmark is used there is an
overhead of compiling it from OpenCL to bitcode. This is a one-off cost.
Compiling OpenCL to bitcode requires third party headers that are downloaded
on the first call to <code class="code docutils literal notranslate"><span class="pre">install()</span></code>.</p>
</section>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.envs.llvm.datasets.CsmithDataset">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">compiler_gym.envs.llvm.datasets.</span></span><span class="sig-name descname"><span class="pre">CsmithDataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">site_data_base</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">csmith_bin</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Path</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">csmith_includes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Path</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/envs/llvm/datasets/csmith.html#CsmithDataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.llvm.datasets.CsmithDataset" title="Permalink to this definition"></a></dt>
<dd><p>A dataset which uses Csmith to generate programs.</p>
<p>Csmith is a tool that can generate random conformant C99 programs. It is
described in the publication:</p>
<blockquote>
<div><p>Yang, Xuejun, Yang Chen, Eric Eide, and John Regehr. “Finding and
understanding bugs in C compilers.” In Proceedings of the 32nd ACM
SIGPLAN conference on Programming Language Design and Implementation
(PLDI), pp. 283-294. 2011.</p>
</div></blockquote>
<p>For up-to-date information about Csmith, see:</p>
<blockquote>
<div><p><a class="reference external" href="https://embed.cs.utah.edu/csmith/">https://embed.cs.utah.edu/csmith/</a></p>
</div></blockquote>
<p>Note that Csmith is a tool that is used to find errors in compilers. As
such, there is a higher likelihood that the benchmark cannot be used for an
environment and that <a class="reference internal" href="../compiler_gym/envs.html#compiler_gym.envs.CompilerEnv.reset" title="compiler_gym.envs.CompilerEnv.reset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">env.reset()</span></code></a> will raise <a class="reference internal" href="../compiler_gym/datasets.html#compiler_gym.datasets.BenchmarkInitError" title="compiler_gym.datasets.BenchmarkInitError"><code class="xref py py-class docutils literal notranslate"><span class="pre">BenchmarkInitError</span></code></a>.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.envs.llvm.datasets.GitHubDataset">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">compiler_gym.envs.llvm.datasets.</span></span><span class="sig-name descname"><span class="pre">GitHubDataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">site_data_base</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/envs/llvm/datasets.html#GitHubDataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.llvm.datasets.GitHubDataset" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.envs.llvm.datasets.JotaiBenchDataset">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">compiler_gym.envs.llvm.datasets.</span></span><span class="sig-name descname"><span class="pre">JotaiBenchDataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">site_data_base</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/envs/llvm/datasets/jotaibench.html#JotaiBenchDataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.llvm.datasets.JotaiBenchDataset" title="Permalink to this definition"></a></dt>
<dd><p>A dataset of C programs curated from GitHub source code.</p>
<p>The dataset is from:</p>
<blockquote>
<div><p>da Silva, Anderson Faustino, Bruno Conde Kind, José Wesley de Souza
Magalhaes, Jerônimo Nunes Rocha, Breno Campos Ferreira Guimaraes, and
Fernando Magno Quinão Pereira. “ANGHABENCH: A Suite with One Million
Compilable C Benchmarks for Code-Size Reduction.” In 2021 IEEE/ACM
International Symposium on Code Generation and Optimization (CGO),
pp. 378-390. IEEE, 2021.</p>
</div></blockquote>
<p>And is available at:</p>
<blockquote>
<div><p><a class="reference external" href="http://cuda.dcc.ufmg.br/Jotai/src/">http://cuda.dcc.ufmg.br/Jotai/src/</a></p>
</div></blockquote>
<section id="id2">
<h3>Installation<a class="headerlink" href="#id2" title="Permalink to this heading"></a></h3>
<p>The JotaiBench dataset consists of C functions that are compiled to LLVM-IR
on-demand and cached. The first time each benchmark is used there is an
overhead of compiling it from C to bitcode. This is a one-off cost.</p>
</section>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.envs.llvm.datasets.LinuxDataset">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">compiler_gym.envs.llvm.datasets.</span></span><span class="sig-name descname"><span class="pre">LinuxDataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">site_data_base</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/envs/llvm/datasets.html#LinuxDataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.llvm.datasets.LinuxDataset" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.envs.llvm.datasets.LlvmStressDataset">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">compiler_gym.envs.llvm.datasets.</span></span><span class="sig-name descname"><span class="pre">LlvmStressDataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">site_data_base</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/envs/llvm/datasets/llvm_stress.html#LlvmStressDataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.llvm.datasets.LlvmStressDataset" title="Permalink to this definition"></a></dt>
<dd><p>A dataset which uses llvm-stress to generate programs.</p>
<p><a class="reference external" href="https://llvm.org/docs/CommandGuide/llvm-stress.html">llvm-stress</a> is a
tool for generating random LLVM-IR files.</p>
<p>This dataset forces reproducible results by setting the input seed to the
generator. The benchmark’s URI is the seed, e.g.
“generator://llvm-stress-v0/10” is the benchmark generated by llvm-stress
using seed 10. The total number of unique seeds is 2^32 - 1.</p>
<p>Note that llvm-stress is a tool that is used to find errors in LLVM. As
such, there is a higher likelihood that the benchmark cannot be used for an
environment and that <a class="reference internal" href="../compiler_gym/envs.html#compiler_gym.envs.CompilerEnv.reset" title="compiler_gym.envs.CompilerEnv.reset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">env.reset()</span></code></a> will raise
<a class="reference internal" href="../compiler_gym/datasets.html#compiler_gym.datasets.BenchmarkInitError" title="compiler_gym.datasets.BenchmarkInitError"><code class="xref py py-class docutils literal notranslate"><span class="pre">BenchmarkInitError</span></code></a>.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.envs.llvm.datasets.MibenchDataset">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">compiler_gym.envs.llvm.datasets.</span></span><span class="sig-name descname"><span class="pre">MibenchDataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">site_data_base</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/envs/llvm/datasets.html#MibenchDataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.llvm.datasets.MibenchDataset" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.envs.llvm.datasets.NPBDataset">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">compiler_gym.envs.llvm.datasets.</span></span><span class="sig-name descname"><span class="pre">NPBDataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">site_data_base</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/envs/llvm/datasets.html#NPBDataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.llvm.datasets.NPBDataset" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.envs.llvm.datasets.OpenCVDataset">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">compiler_gym.envs.llvm.datasets.</span></span><span class="sig-name descname"><span class="pre">OpenCVDataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">site_data_base</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/envs/llvm/datasets.html#OpenCVDataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.llvm.datasets.OpenCVDataset" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.envs.llvm.datasets.POJ104Dataset">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">compiler_gym.envs.llvm.datasets.</span></span><span class="sig-name descname"><span class="pre">POJ104Dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">site_data_base</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/envs/llvm/datasets/poj104.html#POJ104Dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.llvm.datasets.POJ104Dataset" title="Permalink to this definition"></a></dt>
<dd><p>The POJ-104 dataset contains 52000 C++ programs implementing 104
different algorithms with 500 examples of each.</p>
<p>The dataset is from:</p>
<blockquote>
<div><p>Lili Mou, Ge Li, Lu Zhang, Tao Wang, Zhi Jin. “Convolutional neural
networks over tree structures for programming language processing.” To
appear in Proceedings of 30th AAAI Conference on Artificial
Intelligence, 2016.</p>
</div></blockquote>
<p>And is available at:</p>
<blockquote>
<div><p><a class="reference external" href="https://sites.google.com/site/treebasedcnn/">https://sites.google.com/site/treebasedcnn/</a></p>
</div></blockquote>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.envs.llvm.datasets.TensorFlowDataset">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">compiler_gym.envs.llvm.datasets.</span></span><span class="sig-name descname"><span class="pre">TensorFlowDataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">site_data_base</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/envs/llvm/datasets.html#TensorFlowDataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.llvm.datasets.TensorFlowDataset" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="miscellaneous">
<h2><a class="toc-backref" href="#id5">Miscellaneous</a><a class="headerlink" href="#miscellaneous" title="Permalink to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="compiler_gym.envs.llvm.compute_observation">
<span class="sig-prename descclassname"><span class="pre">compiler_gym.envs.llvm.</span></span><span class="sig-name descname"><span class="pre">compute_observation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">observation_space</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../compiler_gym/views.html#compiler_gym.views.ObservationSpaceSpec" title="compiler_gym.views.observation_space_spec.ObservationSpaceSpec"><span class="pre">ObservationSpaceSpec</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">bitcode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">300</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ObservationType</span></span></span><a class="reference internal" href="../_modules/compiler_gym/envs/llvm/compute_observation.html#compute_observation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.llvm.compute_observation" title="Permalink to this definition"></a></dt>
<dd><p>Compute an LLVM observation.</p>
<p>This is a utility function that uses a standalone C++ binary to compute an
observation from an LLVM bitcode file. It is intended for use cases where
you want to compute an observation without the overhead of initializing a
full environment.</p>
<p>Example usage:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">env</span> <span class="o">=</span> <span class="n">compiler_gym</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s2">&quot;llvm-v0&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">space</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">observation</span><span class="o">.</span><span class="n">spaces</span><span class="p">[</span><span class="s2">&quot;Ir&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bitcode</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;bitcode.bc&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">observation</span> <span class="o">=</span> <span class="n">llvm</span><span class="o">.</span><span class="n">compute_observation</span><span class="p">(</span><span class="n">space</span><span class="p">,</span> <span class="n">bitcode</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is not part of the core CompilerGym API and may change in a future
release.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>observation_space</strong> – The observation that is to be computed.</p></li>
<li><p><strong>bitcode</strong> – The path of an LLVM bitcode file.</p></li>
<li><p><strong>timeout</strong> – The maximum number of seconds to allow the computation to
run before timing out.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – If computing the observation fails.</p></li>
<li><p><strong>TimeoutError</strong> – If computing the observation times out.</p></li>
<li><p><strong>FileNotFoundError</strong> – If the given bitcode does not exist.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../compiler_gym/envs/gcc.html" class="btn btn-neutral float-left" title="compiler_gym.envs.gcc" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../compiler_gym/leaderboard.html" class="btn btn-neutral float-right" title="compiler_gym.leaderboard" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Meta Platforms, Inc.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-WJN2CKJJKH"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-WJN2CKJJKH', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>