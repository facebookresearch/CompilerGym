<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Frequently Asked Questions &mdash; CompilerGym 0.2.5 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="LLVM Environment Reference" href="llvm/index.html" />
    <link rel="prev" title="Contributing" href="contributing.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html">
            <img src="_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.2.5
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command Line Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="rpc.html">RPC Service Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#what-can-i-do-with-this">What can I do with this?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#do-i-have-to-use-reinforcement-learning">Do I have to use reinforcement learning?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#why-does-my-environment-s-step-function-return-done">Why does my environment’s step() function return “done”?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#where-does-compilergym-store-files">Where does CompilerGym store files?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#do-i-need-to-call-env-close">Do I need to call env.close()?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-do-i-debug-crashes-or-errors">How do I debug crashes or errors?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i-found-a-bug-how-do-i-report-it">I found a bug. How do I report it?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#development">Development</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#what-features-are-going-to-be-added-in-the-future">What features are going to be added in the future?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i-want-to-modify-one-of-the-environments-where-do-i-start">I want to modify one of the environments, where do I start?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i-want-to-add-a-new-compiler-environment-where-do-i-start">I want to add a new compiler environment, where do I start?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i-updated-with-git-pull-and-now-it-doesn-t-work">I updated with “git pull” and now it doesn’t work</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Environments</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="llvm/index.html">LLVM Environment Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="envs/gcc.html">GCC Environment Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="envs/loop_tool.html">loop_tool Environment Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="envs/mlir.html">MLIR Environment Reference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="compiler_gym/compiler_gym.html">compiler_gym</a></li>
<li class="toctree-l1"><a class="reference internal" href="compiler_gym/datasets.html">compiler_gym.datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="compiler_gym/envs.html">compiler_gym.envs</a></li>
<li class="toctree-l1"><a class="reference internal" href="compiler_gym/envs/gcc.html">compiler_gym.envs.gcc</a></li>
<li class="toctree-l1"><a class="reference internal" href="llvm/api.html">compiler_gym.envs.llvm</a></li>
<li class="toctree-l1"><a class="reference internal" href="compiler_gym/leaderboard.html">compiler_gym.leaderboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="compiler_gym/service.html">compiler_gym.service</a></li>
<li class="toctree-l1"><a class="reference internal" href="compiler_gym/service/runtime.html">compiler_gym.service.runtime</a></li>
<li class="toctree-l1"><a class="reference internal" href="compiler_gym/spaces.html">compiler_gym.spaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="compiler_gym/views.html">compiler_gym.views</a></li>
<li class="toctree-l1"><a class="reference internal" href="compiler_gym/wrappers.html">compiler_gym.wrappers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">C++ API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cc/compiler_gym/envs/llvm/service.html">compiler_gym/envs/llvm/service</a></li>
<li class="toctree-l1"><a class="reference internal" href="cc/compiler_gym/service.html">compiler_gym/service</a></li>
<li class="toctree-l1"><a class="reference internal" href="cc/compiler_gym/service/runtime.html">compiler_gym/service/runtime</a></li>
<li class="toctree-l1"><a class="reference internal" href="cc/compiler_gym/util.html">compiler_gym/util</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CompilerGym</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Frequently Asked Questions</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/faq.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="frequently-asked-questions">
<h1>Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Permalink to this heading"></a></h1>
<p>This page answers some of the commonly asked questions about CompilerGym. Have a
question not answered here? File an issue on the <a class="reference external" href="https://github.com/facebookresearch/CompilerGym/issues">GitHub issue tracker</a>.</p>
<div class="contents local topic" id="topics">
<p class="topic-title">Topics:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#usage" id="id3">Usage</a></p>
<ul>
<li><p><a class="reference internal" href="#what-can-i-do-with-this" id="id4">What can I do with this?</a></p></li>
<li><p><a class="reference internal" href="#do-i-have-to-use-reinforcement-learning" id="id5">Do I have to use reinforcement learning?</a></p></li>
<li><p><a class="reference internal" href="#why-does-my-environment-s-step-function-return-done" id="id6">Why does my environment’s step() function return “done”?</a></p></li>
<li><p><a class="reference internal" href="#where-does-compilergym-store-files" id="id7">Where does CompilerGym store files?</a></p></li>
<li><p><a class="reference internal" href="#do-i-need-to-call-env-close" id="id8">Do I need to call env.close()?</a></p></li>
<li><p><a class="reference internal" href="#how-do-i-debug-crashes-or-errors" id="id9">How do I debug crashes or errors?</a></p></li>
<li><p><a class="reference internal" href="#i-found-a-bug-how-do-i-report-it" id="id10">I found a bug. How do I report it?</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#development" id="id11">Development</a></p>
<ul>
<li><p><a class="reference internal" href="#what-features-are-going-to-be-added-in-the-future" id="id12">What features are going to be added in the future?</a></p></li>
<li><p><a class="reference internal" href="#i-want-to-modify-one-of-the-environments-where-do-i-start" id="id13">I want to modify one of the environments, where do I start?</a></p></li>
<li><p><a class="reference internal" href="#i-want-to-add-a-new-compiler-environment-where-do-i-start" id="id14">I want to add a new compiler environment, where do I start?</a></p></li>
<li><p><a class="reference internal" href="#i-updated-with-git-pull-and-now-it-doesn-t-work" id="id15">I updated with “git pull” and now it doesn’t work</a></p></li>
</ul>
</li>
</ul>
</div>
<section id="usage">
<h2><a class="toc-backref" href="#id3">Usage</a><a class="headerlink" href="#usage" title="Permalink to this heading"></a></h2>
<section id="what-can-i-do-with-this">
<h3><a class="toc-backref" href="#id4">What can I do with this?</a><a class="headerlink" href="#what-can-i-do-with-this" title="Permalink to this heading"></a></h3>
<p>CompilerGym lets you control the decisions that a compiler makes when optimizing
a program. Currently, it lets you control the selection and ordering of
optimization passes for LLVM, the command line flags for the GCC compiler, and
the order of loop nests for CUDA. The goal is to steer the compiler towards
producing the best compiled program, as determined by a reward signal that
measures some property of the program such as its code size or execution time.</p>
</section>
<section id="do-i-have-to-use-reinforcement-learning">
<h3><a class="toc-backref" href="#id5">Do I have to use reinforcement learning?</a><a class="headerlink" href="#do-i-have-to-use-reinforcement-learning" title="Permalink to this heading"></a></h3>
<p>No. We think that the the gym provides a useful abstraction for sequential
decision making. You may use any technique you wish to explore the optimization
space. Researchers have had success using search techniques, genetic algorithms,
supervised and unsupervised machine learning, and deep reinforcement learning.
Take a look at <a class="reference external" href="https://chriscummins.cc/pub/2020-fdl.pdf">this paper</a> for a
brief introduction to the field.</p>
</section>
<section id="why-does-my-environment-s-step-function-return-done">
<h3><a class="toc-backref" href="#id6">Why does my environment’s step() function return “done”?</a><a class="headerlink" href="#why-does-my-environment-s-step-function-return-done" title="Permalink to this heading"></a></h3>
<p>The third element of the tuple returned by <a class="reference internal" href="compiler_gym/envs.html#compiler_gym.envs.CompilerEnv.step" title="compiler_gym.envs.CompilerEnv.step"><code class="xref py py-meth docutils literal notranslate"><span class="pre">env.step()</span></code></a> is a boolean that indicates whether the
current episode is “done”. There are two reasons why an episode may be “done”:</p>
<ol class="arabic simple">
<li><p>A terminal state has been reached, as defined by the dynamics of the
environment. This could be because there are no further decisions to be made,
or because of an artificial limit to the episode length such as provided by
the <a class="reference internal" href="compiler_gym/wrappers.html#compiler_gym.wrappers.TimeLimit" title="compiler_gym.wrappers.TimeLimit"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeLimit</span></code></a> and
<a class="reference internal" href="compiler_gym/wrappers.html#compiler_gym.wrappers.CommandlineWithTerminalAction" title="compiler_gym.wrappers.CommandlineWithTerminalAction"><code class="xref py py-class docutils literal notranslate"><span class="pre">CommandlineWithTerminalAction</span></code></a> wrappers.</p></li>
<li><p>The environment has encountered an unrecoverable error and can no longer
proceed with the episode. This could be because of an error such as a
compiler crashing, a timeout from an action that takes too long, or an
overloaded system causing an out-of-memory error.</p></li>
</ol>
<p>In case of an unrecoverable error, CompilerGym will provide a description of the
error through a string <code class="code docutils literal notranslate"><span class="pre">error_details</span></code> in the returned <code class="code docutils literal notranslate"><span class="pre">info</span></code> dict:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">compiler_gym</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span> <span class="o">=</span> <span class="n">compiler_gym</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s2">&quot;llvm-v0&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1000</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">observation</span><span class="p">,</span> <span class="n">reward</span><span class="p">,</span> <span class="n">done</span><span class="p">,</span> <span class="n">info</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">action_space</span><span class="o">.</span><span class="n">sample</span><span class="p">())</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">done</span><span class="p">:</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;error_details&quot;</span><span class="p">))</span>
<span class="gp">... </span>        <span class="n">env</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</pre></div>
</div>
<p>In either case, calling <a class="reference internal" href="compiler_gym/envs.html#compiler_gym.envs.CompilerEnv.reset" title="compiler_gym.envs.CompilerEnv.reset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">env.reset()</span></code></a> will reset the environment and start a
new episode.</p>
</section>
<section id="where-does-compilergym-store-files">
<h3><a class="toc-backref" href="#id7">Where does CompilerGym store files?</a><a class="headerlink" href="#where-does-compilergym-store-files" title="Permalink to this heading"></a></h3>
<p>CompilerGym is a python library, and is located in the <a class="reference external" href="https://docs.python.org/3/library/site.html#site.getsitepackages">site packages</a> directory.
Remove it using <code class="code docutils literal notranslate"><span class="pre">pip</span> <span class="pre">uninstall</span> <span class="pre">compiler_gym</span></code>. In addition, CompilerGym
uses the following file system locations to store files:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">~/.local/cache/compiler_gym</span></code> is used to cache files such as downloaded
datasets. Set environment variable <code class="code docutils literal notranslate"><span class="pre">$COMPILER_GYM_CACHE</span></code> to override
this default location.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">~/.local/share/compiler_gym</span></code> is used to store additional datasets and
files that are not included in the core CompilerGym library. Set environment
variable <code class="code docutils literal notranslate"><span class="pre">$COMPILER_GYM_SITE_DATA</span></code> to override this default location.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">/dev/shm/compiler_gym_${USER}</span></code> is used as an in-memory cache on Linux
systems which support it. Files in this cache are should not outlive the
lifespan of the CompilerGym environments that created them. Set environment
variable <code class="code docutils literal notranslate"><span class="pre">$COMPILER_GYM_TRANSIENT_CACHE</span></code> to override this default
location.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">~/logs/compiler_gym</span></code> is used by some of the example scripts to store
logs and experiment artifacts. Set environment variable
<code class="code docutils literal notranslate"><span class="pre">$COMPILER_GYM_LOGS</span></code> to override this default location.</p></li>
</ul>
<p>It is perfectly safe to delete all of the above directories, so long as there
are no active Python processes using CompilerGym. After deleting the above
directories, you may notice a delay the next time you launch a CompilerGym
environment as files and datasets are re-downloaded and unpacked.</p>
</section>
<section id="do-i-need-to-call-env-close">
<h3><a class="toc-backref" href="#id8">Do I need to call env.close()?</a><a class="headerlink" href="#do-i-need-to-call-env-close" title="Permalink to this heading"></a></h3>
<p>Yes! You must ensure that <a class="reference internal" href="compiler_gym/envs.html#compiler_gym.envs.CompilerEnv.close" title="compiler_gym.envs.CompilerEnv.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">env.close()</span></code></a> is called once you are done with an
environment. This is because CompilerGym environments may launch subprocesses
and create temporary files that must be tidied up when the environment is
discarded. We recommend using the <code class="code docutils literal notranslate"><span class="pre">with</span></code>-statement pattern for creating
environments:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">gym</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s2">&quot;llvm-v0&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">env</span><span class="p">:</span>
<span class="gp">... </span>   <span class="k">pass</span>  <span class="c1"># use env how you like</span>
</pre></div>
</div>
<p>This removes the need to call <code class="xref py py-meth docutils literal notranslate"><span class="pre">env.close()</span></code> yourself since it is closed
automatically when leaving the scope of the <code class="code docutils literal notranslate"><span class="pre">with</span></code>-statement. If this is
not possible, use <code class="code docutils literal notranslate"><span class="pre">try</span></code>/<code class="code docutils literal notranslate"><span class="pre">finally</span></code> blocks:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">env</span> <span class="o">=</span> <span class="n">compiler_gym</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s2">&quot;llvm-v0&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">pass</span>  <span class="c1"># use env how you like</span>
<span class="gp">... </span><span class="k">finally</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">env</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="how-do-i-debug-crashes-or-errors">
<h3><a class="toc-backref" href="#id9">How do I debug crashes or errors?</a><a class="headerlink" href="#how-do-i-debug-crashes-or-errors" title="Permalink to this heading"></a></h3>
<p>The first step is to produce a minimal, reproducible example. The easiest way to
do this is usually to copy your code into a new file and to iteratively remove
as many dependencies and chunks of code as possible while still preserving the
error behavior of interest. Second, you can inspect CompilerGym’s logging
output.</p>
<p>CompilerGym uses Python’s built in logging mechanism, but emits warning and
error messages sparingly. In normal use, the logging messages from CompilerGym
will not be seen by users. To enable these messages to be logged to standard out
insert the following snippet at the start of your script, before instantiating
any CompilerGym environments:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>

<span class="c1"># ... rest of script</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>CompilerGym uses per-module loggers. For fine-grained control over logging,
access the <code class="code docutils literal notranslate"><span class="pre">compiler_gym</span></code> logger or its children.</p>
</div>
<p>Additionally, even-more-verbose logging can be enabled by setting the environment
variable <code class="code docutils literal notranslate"><span class="pre">COMPILER_GYM_DEBUG</span></code> to 4:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;COMPILER_GYM_DEBUG&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;4&quot;</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>

<span class="c1"># ... rest of script</span>
</pre></div>
</div>
<p>Inspecting the verbose logs may help understand what is going on, and is
incredibly helpful when reporting bugs. See <a class="reference internal" href="#report-bug"><span class="std std-ref">I found a bug. How do I report it?</span></a>.</p>
</section>
<section id="i-found-a-bug-how-do-i-report-it">
<span id="report-bug"></span><h3><a class="toc-backref" href="#id10">I found a bug. How do I report it?</a><a class="headerlink" href="#i-found-a-bug-how-do-i-report-it" title="Permalink to this heading"></a></h3>
<p>Great! Please file an issue using the <a class="reference external" href="https://github.com/facebookresearch/CompilerGym/issues">GitHub issue tracker</a>.  See
<a class="reference internal" href="contributing.html"><span class="doc">Contributing</span></a> for more details.</p>
</section>
</section>
<section id="development">
<h2><a class="toc-backref" href="#id11">Development</a><a class="headerlink" href="#development" title="Permalink to this heading"></a></h2>
<section id="what-features-are-going-to-be-added-in-the-future">
<h3><a class="toc-backref" href="#id12">What features are going to be added in the future?</a><a class="headerlink" href="#what-features-are-going-to-be-added-in-the-future" title="Permalink to this heading"></a></h3>
<p>See <a class="reference internal" href="about.html#roadmap"><span class="std std-ref">roadmap</span></a>.</p>
</section>
<section id="i-want-to-modify-one-of-the-environments-where-do-i-start">
<h3><a class="toc-backref" href="#id13">I want to modify one of the environments, where do I start?</a><a class="headerlink" href="#i-want-to-modify-one-of-the-environments-where-do-i-start" title="Permalink to this heading"></a></h3>
<p>Many modifications to CompilerGym environments can be achieved through
<a class="reference internal" href="compiler_gym/wrappers.html#module-compiler_gym.wrappers" title="compiler_gym.wrappers"><code class="xref py py-mod docutils literal notranslate"><span class="pre">wrappers</span></code></a>. For example, you can use the existing
wrappers to artificially limit the length of episodes using <a class="reference internal" href="compiler_gym/wrappers.html#compiler_gym.wrappers.TimeLimit" title="compiler_gym.wrappers.TimeLimit"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeLimit</span></code></a>, constrain the actions available to the agent
through <a class="reference internal" href="compiler_gym/wrappers.html#compiler_gym.wrappers.ConstrainedCommandline" title="compiler_gym.wrappers.ConstrainedCommandline"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConstrainedCommandline</span></code></a>, or randomize the benchmark that
is selected on <code class="code docutils literal notranslate"><span class="pre">reset()</span></code> using <a class="reference internal" href="compiler_gym/wrappers.html#compiler_gym.wrappers.RandomOrderBenchmarks" title="compiler_gym.wrappers.RandomOrderBenchmarks"><code class="xref py py-class docutils literal notranslate"><span class="pre">RandomOrderBenchmarks</span></code></a>.</p>
<p>Many new types of modular transformations can be implemented by extending the
base wrapper classes. For example, custom reward shaping can be implemented by
implementing the <code class="code docutils literal notranslate"><span class="pre">reward()</span></code> method in <a class="reference internal" href="compiler_gym/wrappers.html#compiler_gym.wrappers.RewardWrapper" title="compiler_gym.wrappers.RewardWrapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">RewardWrapper</span></code></a>.</p>
<p>For more invasive changes, you may need to modify the underlying environment
implementation. To do that, fork this project and build it from source (see
<a class="reference external" href="https://github.com/facebookresearch/CompilerGym/blob/development/INSTALL.md">installation</a>).
Then modify the compiler service implementation for the compiler that you are
interested in. The service codebase is located at
<code class="code docutils literal notranslate"><span class="pre">compiler_gym/envs/$COMPILER/service</span></code>, where <code class="code docutils literal notranslate"><span class="pre">$COMPILER</span></code> is the name
of the compiler service you would wish to modify, e.g.
<code class="code docutils literal notranslate"><span class="pre">compiler_gym/envs/llvm/service</span></code> for the <a class="reference internal" href="llvm/index.html"><span class="doc">LLVM environment</span></a>. Once done, send us a pull request!</p>
</section>
<section id="i-want-to-add-a-new-compiler-environment-where-do-i-start">
<h3><a class="toc-backref" href="#id14">I want to add a new compiler environment, where do I start?</a><a class="headerlink" href="#i-want-to-add-a-new-compiler-environment-where-do-i-start" title="Permalink to this heading"></a></h3>
<p>To add a new environment, you must implement the <a class="reference internal" href="compiler_gym/service.html#compiler_gym.service.CompilationSession" title="compiler_gym.service.CompilationSession"><code class="xref py py-class docutils literal notranslate"><span class="pre">CompilationSession</span></code></a> interface to provide a new
compilation service, and then register this service with the CompilerGym
frontend. The whole process takes less than 200 lines of code. Full end-to-end
examples are provided for both Python and C++ in the <a class="reference external" href="https://github.com/facebookresearch/CompilerGym/tree/development/examples/example_compiler_gym_service">examples directory</a>. Once done, send us a pull request!</p>
</section>
<section id="i-updated-with-git-pull-and-now-it-doesn-t-work">
<h3><a class="toc-backref" href="#id15">I updated with “git pull” and now it doesn’t work</a><a class="headerlink" href="#i-updated-with-git-pull-and-now-it-doesn-t-work" title="Permalink to this heading"></a></h3>
<p>The first thing to is to re-run <code class="code docutils literal notranslate"><span class="pre">make</span> <span class="pre">init</span></code> to ensure that you have the
correct development dependencies installed, as those can change between
releases. Then run <code class="code docutils literal notranslate"><span class="pre">make</span> <span class="pre">distclean</span></code> to tidy up any build artifacts from
the old version.</p>
<p>If that doesn’t fix the problem, feel free to
<a class="reference external" href="https://github.com/facebookresearch/CompilerGym/issues">file an issue</a>, but
note that the
<a class="reference external" href="https://github.com/facebookresearch/CompilerGym/commits/development">development</a>
branch is the bleeding edge and may contain features that have not yet reached
stability. If you would like to build from source but do not require the
latest feature set, use the
<a class="reference external" href="https://github.com/facebookresearch/CompilerGym/commits/stable">stable</a>
branch which lags to the latest release with hotfixes.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="contributing.html" class="btn btn-neutral float-left" title="Contributing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="llvm/index.html" class="btn btn-neutral float-right" title="LLVM Environment Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Meta Platforms, Inc.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-WJN2CKJJKH"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-WJN2CKJJKH', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>