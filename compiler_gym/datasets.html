

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>compiler_gym.datasets &mdash; CompilerGym 0.1.9 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="compiler_gym.envs" href="envs.html" />
    <link rel="prev" title="compiler_gym" href="compiler_gym.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> CompilerGym
          

          
          </a>

          
            
            
              <div class="version">
                0.1.9
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../llvm/index.html">LLVM Environment Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">Command Line Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rpc.html">RPC Service Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption"><span class="caption-text">Python API Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="compiler_gym.html">compiler_gym</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">compiler_gym.datasets</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#benchmark">Benchmark</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dataset">Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="#filesdataset">FilesDataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tardataset">TarDataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tardatasetwithmanifest">TarDatasetWithManifest</a></li>
<li class="toctree-l2"><a class="reference internal" href="#datasets">Datasets</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="envs.html">compiler_gym.envs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../llvm/api.html">compiler_gym.envs.llvm</a></li>
<li class="toctree-l1"><a class="reference internal" href="leaderboard.html">compiler_gym.leaderboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="service.html">compiler_gym.service</a></li>
<li class="toctree-l1"><a class="reference internal" href="spaces.html">compiler_gym.spaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="views.html">compiler_gym.views</a></li>
<li class="toctree-l1"><a class="reference internal" href="wrappers.html">compiler_gym.wrappers</a></li>
</ul>
<p class="caption"><span class="caption-text">C++ API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cc/compiler_gym/envs/llvm/service.html">compiler_gym/envs/llvm/service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cc/compiler_gym/service.html">compiler_gym/service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cc/compiler_gym/service/runtime.html">compiler_gym/service/runtime</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cc/compiler_gym/util.html">compiler_gym/util</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">CompilerGym</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>compiler_gym.datasets</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/compiler_gym/datasets.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="compiler-gym-datasets">
<h1>compiler_gym.datasets<a class="headerlink" href="#compiler-gym-datasets" title="Permalink to this headline">¶</a></h1>
<p>An instance of a CompilerGym environment uses a <a class="reference internal" href="#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.Benchmark"><code class="xref py py-class docutils literal notranslate"><span class="pre">Benchmark</span></code></a> as the program being optimized. A
<a class="reference internal" href="#compiler_gym.datasets.Dataset" title="compiler_gym.datasets.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> is collection of benchmarks
that can be installed and made available for use.</p>
<div class="contents local topic" id="dataset-classes">
<p class="topic-title">Dataset Classes:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#benchmark" id="id1">Benchmark</a></p></li>
<li><p><a class="reference internal" href="#dataset" id="id2">Dataset</a></p></li>
<li><p><a class="reference internal" href="#filesdataset" id="id3">FilesDataset</a></p></li>
<li><p><a class="reference internal" href="#tardataset" id="id4">TarDataset</a></p></li>
<li><p><a class="reference internal" href="#tardatasetwithmanifest" id="id5">TarDatasetWithManifest</a></p></li>
<li><p><a class="reference internal" href="#datasets" id="id6">Datasets</a></p></li>
</ul>
</div>
<div class="section" id="benchmark">
<h2><a class="toc-backref" href="#id1">Benchmark</a><a class="headerlink" href="#benchmark" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.datasets.Benchmark">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">compiler_gym.datasets.</span></span><span class="sig-name descname"><span class="pre">Benchmark</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">proto</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">compiler_gym.service.proto.compiler_gym_service_pb2.Benchmark</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validation_callbacks</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">CompilerEnv</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="compiler_gym.html#compiler_gym.ValidationError" title="compiler_gym.validation_error.ValidationError"><span class="pre">compiler_gym.validation_error.ValidationError</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sources</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#compiler_gym.datasets.BenchmarkSource" title="compiler_gym.datasets.benchmark.BenchmarkSource"><span class="pre">compiler_gym.datasets.benchmark.BenchmarkSource</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/datasets/benchmark.html#Benchmark"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Benchmark" title="Permalink to this definition">¶</a></dt>
<dd><p>A benchmark represents a particular program that is being compiled.</p>
<p>A benchmark is a program that can be used by a <a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.CompilerEnv"><code class="xref py py-class docutils literal notranslate"><span class="pre">CompilerEnv</span></code></a> as a program to optimize. A benchmark
comprises the data that is fed into the compiler, identified by a URI.</p>
<p>Benchmarks are not normally instantiated directly. Instead, benchmarks are
instantiated using <a class="reference internal" href="#compiler_gym.datasets.Datasets.benchmark" title="compiler_gym.datasets.Datasets.benchmark"><code class="xref py py-meth docutils literal notranslate"><span class="pre">env.datasets.benchmark(uri)</span></code></a>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">env</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">benchmark</span><span class="p">(</span><span class="s2">&quot;benchmark://npb-v0/20&quot;</span><span class="p">)</span>
<span class="go">benchmark://npb-v0/20</span>
</pre></div>
</div>
<p>The available benchmark URIs can be queried using
<a class="reference internal" href="#compiler_gym.datasets.Datasets.benchmark_uris" title="compiler_gym.datasets.Datasets.benchmark_uris"><code class="xref py py-meth docutils literal notranslate"><span class="pre">env.datasets.benchmark_uris()</span></code></a>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">next</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">benchmark_uris</span><span class="p">())</span>
<span class="go">&#39;benchmark://cbench-v1/adpcm&#39;</span>
</pre></div>
</div>
<p>Compiler environments may provide additional helper functions for generating
benchmarks, such as <a class="reference internal" href="envs.html#compiler_gym.envs.LlvmEnv.make_benchmark" title="compiler_gym.envs.LlvmEnv.make_benchmark"><code class="xref py py-meth docutils literal notranslate"><span class="pre">env.make_benchmark()</span></code></a> for LLVM.</p>
<p>A Benchmark instance wraps an instance of the <code class="code docutils literal notranslate"><span class="pre">Benchmark</span></code> protocol
buffer from the <a class="reference external" href="https://github.com/facebookresearch/CompilerGym/blob/development/compiler_gym/service/proto/compiler_gym_service.proto">RPC interface</a>
with additional functionality. The data underlying benchmarks should be
considered immutable. New attributes cannot be assigned to Benchmark
instances.</p>
<p>The benchmark for an environment can be set during <a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv.reset" title="compiler_gym.envs.CompilerEnv.reset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">env.reset()</span></code></a>. The currently active benchmark can
be queried using <a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv.benchmark" title="compiler_gym.envs.CompilerEnv.benchmark"><code class="xref py py-attr docutils literal notranslate"><span class="pre">env.benchmark</span></code></a>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">env</span> <span class="o">=</span> <span class="n">gym</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s2">&quot;llvm-v0&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="n">benchmark</span><span class="o">=</span><span class="s2">&quot;benchmark://cbench-v1/crc32&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span><span class="o">.</span><span class="n">benchmark</span>
<span class="go">benchmark://cbench-v1/crc32</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.Benchmark.add_source">
<span class="sig-name descname"><span class="pre">add_source</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#compiler_gym.datasets.BenchmarkSource" title="compiler_gym.datasets.benchmark.BenchmarkSource"><span class="pre">compiler_gym.datasets.benchmark.BenchmarkSource</span></a></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">None</span><a class="reference internal" href="../_modules/compiler_gym/datasets/benchmark.html#Benchmark.add_source"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Benchmark.add_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a new source file for this benchmark.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>source</strong> – The <a class="reference internal" href="#compiler_gym.datasets.BenchmarkSource" title="compiler_gym.datasets.BenchmarkSource"><code class="xref py py-class docutils literal notranslate"><span class="pre">BenchmarkSource</span></code></a> to register.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.Benchmark.add_validation_callback">
<span class="sig-name descname"><span class="pre">add_validation_callback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">validation_callback</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">CompilerEnv</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="compiler_gym.html#compiler_gym.ValidationError" title="compiler_gym.validation_error.ValidationError"><span class="pre">compiler_gym.validation_error.ValidationError</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">None</span><a class="reference internal" href="../_modules/compiler_gym/datasets/benchmark.html#Benchmark.add_validation_callback"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Benchmark.add_validation_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a new validation callback that will be executed on
<a class="reference internal" href="#compiler_gym.datasets.Benchmark.validate" title="compiler_gym.datasets.Benchmark.validate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">validate()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>validation_callback</strong> – A callback that accepts a single
<a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.CompilerEnv"><code class="xref py py-class docutils literal notranslate"><span class="pre">CompilerEnv</span></code></a> argument and
returns an iterable sequence of zero or more <a class="reference internal" href="compiler_gym.html#compiler_gym.ValidationError" title="compiler_gym.ValidationError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValidationError</span></code></a> tuples. Validation callbacks must be
thread safe and must not modify the environment.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.Benchmark.from_file">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">from_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uri</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pathlib.Path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/datasets/benchmark.html#Benchmark.from_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Benchmark.from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a benchmark from a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>uri</strong> – The URI of the benchmark.</p></li>
<li><p><strong>path</strong> – A filesystem path.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>FileNotFoundError</strong> – If the path does not exist.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A <a class="reference internal" href="#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.Benchmark"><code class="xref py py-class docutils literal notranslate"><span class="pre">Benchmark</span></code></a>
instance.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.Benchmark.from_file_contents">
<em class="property"><span class="pre">classmethod</span> </em><span class="sig-name descname"><span class="pre">from_file_contents</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uri</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bytes</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/datasets/benchmark.html#Benchmark.from_file_contents"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Benchmark.from_file_contents" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a benchmark from raw data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>uri</strong> – The URI of the benchmark.</p></li>
<li><p><strong>data</strong> – An array of bytes that will be passed to the compiler
service.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.Benchmark.is_validatable">
<span class="sig-name descname"><span class="pre">is_validatable</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">bool</span><a class="reference internal" href="../_modules/compiler_gym/datasets/benchmark.html#Benchmark.is_validatable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Benchmark.is_validatable" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the benchmark has any validation callbacks registered.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="code docutils literal notranslate"><span class="pre">True</span></code> if the benchmark has at least one validation
callback.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.Benchmark.ivalidate">
<span class="sig-name descname"><span class="pre">ivalidate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">CompilerEnv</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="compiler_gym.html#compiler_gym.ValidationError" title="compiler_gym.validation_error.ValidationError"><span class="pre">compiler_gym.validation_error.ValidationError</span></a><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/compiler_gym/datasets/benchmark.html#Benchmark.ivalidate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Benchmark.ivalidate" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the validation callbacks and return a generator of errors.</p>
<p>This is an asynchronous version of <a class="reference internal" href="#compiler_gym.datasets.Benchmark.validate" title="compiler_gym.datasets.Benchmark.validate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">validate()</span></code></a> that returns immediately.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>env</strong> – A <a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.CompilerEnv"><code class="xref py py-class docutils literal notranslate"><span class="pre">CompilerEnv</span></code></a>
instance to validate.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A generator of <a class="reference internal" href="compiler_gym.html#compiler_gym.ValidationError" title="compiler_gym.ValidationError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValidationError</span></code></a> tuples that occur during validation.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.datasets.Benchmark.proto">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">proto</span></span><em class="property"><span class="pre">:</span> <span class="pre">compiler_gym.service.proto.compiler_gym_service_pb2.Benchmark</span></em><a class="headerlink" href="#compiler_gym.datasets.Benchmark.proto" title="Permalink to this definition">¶</a></dt>
<dd><p>The protocol buffer representing the benchmark.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A Benchmark message.</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p><code class="code docutils literal notranslate"><span class="pre">Benchmark</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.datasets.Benchmark.sources">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">sources</span></span><em class="property"><span class="pre">:</span> <span class="pre">Iterable[compiler_gym.datasets.benchmark.BenchmarkSource]</span></em><a class="headerlink" href="#compiler_gym.datasets.Benchmark.sources" title="Permalink to this definition">¶</a></dt>
<dd><p>The original source code used to produce this benchmark, as a list of
<a class="reference internal" href="#compiler_gym.datasets.BenchmarkSource" title="compiler_gym.datasets.BenchmarkSource"><code class="xref py py-class docutils literal notranslate"><span class="pre">BenchmarkSource</span></code></a>
instances.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A sequence of source files.</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p><code class="code docutils literal notranslate"><span class="pre">Iterable[BenchmarkSource]</span></code></p>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <a class="reference internal" href="#compiler_gym.datasets.Benchmark.sources" title="compiler_gym.datasets.Benchmark.sources"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Benchmark.sources</span></code></a> property is new and is
likely to change in the future.</p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.datasets.Benchmark.uri">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">uri</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#compiler_gym.datasets.Benchmark.uri" title="Permalink to this definition">¶</a></dt>
<dd><p>The URI of the benchmark.</p>
<p>Benchmark URIs should be unique, that is, that two URIs with the same
value should resolve to the same benchmark. However, URIs do not have
uniquely describe a benchmark. That is, multiple identical benchmarks
could have different URIs.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A URI string. :type: string</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.Benchmark.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">CompilerEnv</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="compiler_gym.html#compiler_gym.ValidationError" title="compiler_gym.validation_error.ValidationError"><span class="pre">compiler_gym.validation_error.ValidationError</span></a><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/compiler_gym/datasets/benchmark.html#Benchmark.validate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Benchmark.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the validation callbacks and return any errors.</p>
<p>If no errors are returned, validation has succeeded:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">benchmark</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
<span class="go">[]</span>
</pre></div>
</div>
<p>If an error occurs, a <a class="reference internal" href="compiler_gym.html#compiler_gym.ValidationError" title="compiler_gym.ValidationError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValidationError</span></code></a> tuple will describe the type of the
error, and optionally contain other data:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">benchmark</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
<span class="go">[ValidationError(type=&quot;RuntimeError&quot;)]</span>
</pre></div>
</div>
<p>Multiple <a class="reference internal" href="compiler_gym.html#compiler_gym.ValidationError" title="compiler_gym.ValidationError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValidationError</span></code></a> errors
may be returned to indicate multiple errors.</p>
<p>This is a synchronous version of <a class="reference internal" href="#compiler_gym.datasets.Benchmark.ivalidate" title="compiler_gym.datasets.Benchmark.ivalidate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ivalidate()</span></code></a> that blocks until all
results are ready:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">benchmark</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">env</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span><span class="p">(</span><span class="n">benchmark</span><span class="o">.</span><span class="n">ivalidate</span><span class="p">(</span><span class="n">env</span><span class="p">))</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>env</strong> – The <a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.CompilerEnv"><code class="xref py py-class docutils literal notranslate"><span class="pre">CompilerEnv</span></code></a>
instance that is being validated.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of zero or more <a class="reference internal" href="compiler_gym.html#compiler_gym.ValidationError" title="compiler_gym.ValidationError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValidationError</span></code></a> tuples that occurred during
validation.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.Benchmark.validation_callbacks">
<span class="sig-name descname"><span class="pre">validation_callbacks</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">CompilerEnv</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="compiler_gym.html#compiler_gym.ValidationError" title="compiler_gym.validation_error.ValidationError"><span class="pre">compiler_gym.validation_error.ValidationError</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/compiler_gym/datasets/benchmark.html#Benchmark.validation_callbacks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Benchmark.validation_callbacks" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the list of registered validation callbacks.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of callables. See <a class="reference internal" href="#compiler_gym.datasets.Benchmark.add_validation_callback" title="compiler_gym.datasets.Benchmark.add_validation_callback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_validation_callback()</span></code></a>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.Benchmark.write_sources_to_directory">
<span class="sig-name descname"><span class="pre">write_sources_to_directory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pathlib.Path</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">int</span><a class="reference internal" href="../_modules/compiler_gym/datasets/benchmark.html#Benchmark.write_sources_to_directory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Benchmark.write_sources_to_directory" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the source files for this benchmark to the given directory.</p>
<p>This writes each of the <a class="reference internal" href="#compiler_gym.datasets.Benchmark.sources" title="compiler_gym.datasets.Benchmark.sources"><code class="xref py py-attr docutils literal notranslate"><span class="pre">benchmark.sources</span></code></a> files to disk.</p>
<p>If the benchmark has no sources, no files are written.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>directory</strong> – The directory to write results to. If it does not
exist, it is created.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The number of files written.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.datasets.BenchmarkSource">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">compiler_gym.datasets.</span></span><span class="sig-name descname"><span class="pre">BenchmarkSource</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contents</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bytes</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/datasets/benchmark.html#BenchmarkSource"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.BenchmarkSource" title="Permalink to this definition">¶</a></dt>
<dd><p>A source file that is used to generate a benchmark. A benchmark may
comprise many source files.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <a class="reference internal" href="#compiler_gym.datasets.BenchmarkSource" title="compiler_gym.datasets.BenchmarkSource"><code class="xref py py-class docutils literal notranslate"><span class="pre">BenchmarkSource</span></code></a>
class is new and is likely to change in the future.</p>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="compiler_gym.datasets.BenchmarkSource.contents">
<span class="sig-name descname"><span class="pre">contents</span></span><em class="property"><span class="pre">:</span> <span class="pre">bytes</span></em><a class="headerlink" href="#compiler_gym.datasets.BenchmarkSource.contents" title="Permalink to this definition">¶</a></dt>
<dd><p>The contents of the file as a byte array.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="compiler_gym.datasets.BenchmarkSource.filename">
<span class="sig-name descname"><span class="pre">filename</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#compiler_gym.datasets.BenchmarkSource.filename" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the file.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.datasets.BenchmarkInitError">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">compiler_gym.datasets.</span></span><span class="sig-name descname"><span class="pre">BenchmarkInitError</span></span><a class="reference internal" href="../_modules/compiler_gym/datasets/benchmark.html#BenchmarkInitError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.BenchmarkInitError" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for errors raised if a benchmark fails to initialize.</p>
</dd></dl>

</div>
<div class="section" id="dataset">
<h2><a class="toc-backref" href="#id2">Dataset</a><a class="headerlink" href="#dataset" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.datasets.Dataset">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">compiler_gym.datasets.</span></span><span class="sig-name descname"><span class="pre">Dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">name:</span> <span class="pre">str</span></em>, <em class="sig-param"><span class="pre">description:</span> <span class="pre">str</span></em>, <em class="sig-param"><span class="pre">license:</span> <span class="pre">str</span></em>, <em class="sig-param"><span class="pre">site_data_base:</span> <span class="pre">pathlib.Path</span></em>, <em class="sig-param"><span class="pre">benchmark_class=&lt;class</span> <span class="pre">'compiler_gym.datasets.benchmark.Benchmark'&gt;</span></em>, <em class="sig-param"><span class="pre">references:</span> <span class="pre">Optional[Dict[str</span></em>, <em class="sig-param"><span class="pre">str]]</span> <span class="pre">=</span> <span class="pre">None</span></em>, <em class="sig-param"><span class="pre">deprecated:</span> <span class="pre">Optional[str]</span> <span class="pre">=</span> <span class="pre">None</span></em>, <em class="sig-param"><span class="pre">sort_order:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">0</span></em>, <em class="sig-param"><span class="pre">logger:</span> <span class="pre">Optional[logging.Logger]</span> <span class="pre">=</span> <span class="pre">None</span></em>, <em class="sig-param"><span class="pre">validatable:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'No'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/datasets/dataset.html#Dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>A dataset is a collection of benchmarks.</p>
<p>The Dataset class has methods for installing and managing groups of
benchmarks, for listing the available benchmark URIs, and for instantiating
<a class="reference internal" href="#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.Benchmark"><code class="xref py py-class docutils literal notranslate"><span class="pre">Benchmark</span></code></a> objects.</p>
<p>The Dataset class is an abstract base for implementing datasets. At a
minimum, subclasses must implement the <a class="reference internal" href="#compiler_gym.datasets.Dataset.benchmark" title="compiler_gym.datasets.Dataset.benchmark"><code class="xref py py-meth docutils literal notranslate"><span class="pre">benchmark()</span></code></a> and <a class="reference internal" href="#compiler_gym.datasets.Dataset.benchmark_uris" title="compiler_gym.datasets.Dataset.benchmark_uris"><code class="xref py py-meth docutils literal notranslate"><span class="pre">benchmark_uris()</span></code></a> methods, and <a class="reference internal" href="#compiler_gym.datasets.Dataset.size" title="compiler_gym.datasets.Dataset.size"><code class="xref py py-meth docutils literal notranslate"><span class="pre">size</span></code></a>. Other methods such as
<a class="reference internal" href="#compiler_gym.datasets.Dataset.install" title="compiler_gym.datasets.Dataset.install"><code class="xref py py-meth docutils literal notranslate"><span class="pre">install()</span></code></a> may be used where
helpful.</p>
<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.Dataset.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">name:</span> <span class="pre">str</span></em>, <em class="sig-param"><span class="pre">description:</span> <span class="pre">str</span></em>, <em class="sig-param"><span class="pre">license:</span> <span class="pre">str</span></em>, <em class="sig-param"><span class="pre">site_data_base:</span> <span class="pre">pathlib.Path</span></em>, <em class="sig-param"><span class="pre">benchmark_class=&lt;class</span> <span class="pre">'compiler_gym.datasets.benchmark.Benchmark'&gt;</span></em>, <em class="sig-param"><span class="pre">references:</span> <span class="pre">Optional[Dict[str</span></em>, <em class="sig-param"><span class="pre">str]]</span> <span class="pre">=</span> <span class="pre">None</span></em>, <em class="sig-param"><span class="pre">deprecated:</span> <span class="pre">Optional[str]</span> <span class="pre">=</span> <span class="pre">None</span></em>, <em class="sig-param"><span class="pre">sort_order:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">0</span></em>, <em class="sig-param"><span class="pre">logger:</span> <span class="pre">Optional[logging.Logger]</span> <span class="pre">=</span> <span class="pre">None</span></em>, <em class="sig-param"><span class="pre">validatable:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'No'</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/datasets/dataset.html#Dataset.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Dataset.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – The name of the dataset. Must conform to the pattern
<code class="code docutils literal notranslate"><span class="pre">{{protocol}}://{{name}}-v{{version}}</span></code>.</p></li>
<li><p><strong>description</strong> – A short human-readable description of the dataset.</p></li>
<li><p><strong>license</strong> – The name of the dataset’s license.</p></li>
<li><p><strong>site_data_base</strong> – The base path of a directory that will be used to
store installed files.</p></li>
<li><p><strong>benchmark_class</strong> – The class to use when instantiating benchmarks.
It must have the same constructor signature as <a class="reference internal" href="#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.Benchmark"><code class="xref py py-class docutils literal notranslate"><span class="pre">Benchmark</span></code></a>.</p></li>
<li><p><strong>references</strong> – A dictionary of useful named URLs for this dataset
containing extra information, download links, papers, etc.</p></li>
<li><p><strong>deprecated</strong> – Mark the dataset as deprecated and issue a warning
when <a class="reference internal" href="#compiler_gym.datasets.Dataset.install" title="compiler_gym.datasets.Dataset.install"><code class="xref py py-meth docutils literal notranslate"><span class="pre">install()</span></code></a>,
including the given method. Deprecated datasets are excluded from
the <a class="reference internal" href="#compiler_gym.datasets.Datasets.dataset" title="compiler_gym.datasets.Datasets.dataset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">datasets()</span></code></a>
iterator by default.</p></li>
<li><p><strong>sort_order</strong> – An optional numeric value that should be used to
order this dataset relative to others. Lowest value sorts first.</p></li>
<li><p><strong>validatable</strong> – Whether the dataset is validatable. A validatable
dataset is one where the behavior of the benchmarks can be checked
by compiling the programs to binaries and executing them. If the
benchmarks crash, or are found to have different behavior, then
validation fails. This type of validation is used to check that the
compiler has not broken the semantics of the program. This value
takes a string and is used for documentation purposes only.
Suggested values are “Yes”, “No”, or “Partial”.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If <code class="code docutils literal notranslate"><span class="pre">name</span></code> does not match the expected type.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.Dataset.__len__">
<span class="sig-name descname"><span class="pre">__len__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/compiler_gym/datasets/dataset.html#Dataset.__len__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Dataset.__len__" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of benchmarks in the dataset.</p>
<p>This is the same as <a class="reference internal" href="#compiler_gym.datasets.Dataset.size" title="compiler_gym.datasets.Dataset.size"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Dataset.size</span></code></a>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span> <span class="o">==</span> <span class="n">dataset</span><span class="o">.</span><span class="n">size</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An integer, or <code class="code docutils literal notranslate"><span class="pre">math.float</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.Dataset.__getitem__">
<span class="sig-name descname"><span class="pre">__getitem__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uri</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.benchmark.Benchmark"><span class="pre">compiler_gym.datasets.benchmark.Benchmark</span></a><a class="reference internal" href="../_modules/compiler_gym/datasets/dataset.html#Dataset.__getitem__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Dataset.__getitem__" title="Permalink to this definition">¶</a></dt>
<dd><p>Select a benchmark by URI.</p>
<p>This is the same as <a class="reference internal" href="#compiler_gym.datasets.Dataset.benchmark" title="compiler_gym.datasets.Dataset.benchmark"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Dataset.benchmark(uri)</span></code></a>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="p">[</span><span class="s2">&quot;benchmark://cbench-v1/crc32&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">dataset</span><span class="o">.</span><span class="n">benchmark</span><span class="p">(</span><span class="s2">&quot;benchmark://cbench-v1/crc32&quot;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A <a class="reference internal" href="#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.Benchmark"><code class="xref py py-class docutils literal notranslate"><span class="pre">Benchmark</span></code></a>
instance.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>LookupError</strong> – If <code class="code docutils literal notranslate"><span class="pre">uri</span></code> does not exist.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.Dataset.__iter__">
<span class="sig-name descname"><span class="pre">__iter__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.benchmark.Benchmark"><span class="pre">compiler_gym.datasets.benchmark.Benchmark</span></a><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/compiler_gym/datasets/dataset.html#Dataset.__iter__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Dataset.__iter__" title="Permalink to this definition">¶</a></dt>
<dd><p>Enumerate the (possibly infinite) benchmarks lazily.</p>
<p>This is the same as <a class="reference internal" href="#compiler_gym.datasets.Dataset.benchmarks" title="compiler_gym.datasets.Dataset.benchmarks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Dataset.benchmarks()</span></code></a>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">islice</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="mi">100</span><span class="p">))</span> <span class="o">==</span> <span class="nb">list</span><span class="p">(</span><span class="n">islice</span><span class="p">(</span><span class="n">datset</span><span class="o">.</span><span class="n">benchmarks</span><span class="p">(),</span> <span class="mi">100</span><span class="p">))</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An iterable sequence of <a class="reference internal" href="#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.Benchmark"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Benchmark</span></code></a> instances.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.Dataset.benchmark">
<span class="sig-name descname"><span class="pre">benchmark</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uri</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.benchmark.Benchmark"><span class="pre">compiler_gym.datasets.benchmark.Benchmark</span></a><a class="reference internal" href="../_modules/compiler_gym/datasets/dataset.html#Dataset.benchmark"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Dataset.benchmark" title="Permalink to this definition">¶</a></dt>
<dd><p>Select a benchmark.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>uri</strong> – The URI of the benchmark to return.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <a class="reference internal" href="#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.Benchmark"><code class="xref py py-class docutils literal notranslate"><span class="pre">Benchmark</span></code></a>
instance.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>LookupError</strong> – If <code class="code docutils literal notranslate"><span class="pre">uri</span></code> is not found.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.Dataset.benchmark_uris">
<span class="sig-name descname"><span class="pre">benchmark_uris</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/compiler_gym/datasets/dataset.html#Dataset.benchmark_uris"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Dataset.benchmark_uris" title="Permalink to this definition">¶</a></dt>
<dd><p>Enumerate the (possibly infinite) benchmark URIs.</p>
<p>Iteration order is consistent across runs. The order of
<a class="reference internal" href="#compiler_gym.datasets.Dataset.benchmarks" title="compiler_gym.datasets.Dataset.benchmarks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">benchmarks()</span></code></a> and
<a class="reference internal" href="#compiler_gym.datasets.Dataset.benchmark_uris" title="compiler_gym.datasets.Dataset.benchmark_uris"><code class="xref py py-meth docutils literal notranslate"><span class="pre">benchmark_uris()</span></code></a>
is the same.</p>
<p>If the number of benchmarks in the dataset is infinite
(<code class="code docutils literal notranslate"><span class="pre">len(dataset)</span> <span class="pre">==</span> <span class="pre">math.inf</span></code>), the iterable returned by this method
will continue indefinitely.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An iterable sequence of benchmark URI strings.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.Dataset.benchmarks">
<span class="sig-name descname"><span class="pre">benchmarks</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.benchmark.Benchmark"><span class="pre">compiler_gym.datasets.benchmark.Benchmark</span></a><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/compiler_gym/datasets/dataset.html#Dataset.benchmarks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Dataset.benchmarks" title="Permalink to this definition">¶</a></dt>
<dd><p>Enumerate the (possibly infinite) benchmarks lazily.</p>
<p>Iteration order is consistent across runs. The order of
<a class="reference internal" href="#compiler_gym.datasets.Dataset.benchmarks" title="compiler_gym.datasets.Dataset.benchmarks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">benchmarks()</span></code></a> and
<a class="reference internal" href="#compiler_gym.datasets.Dataset.benchmark_uris" title="compiler_gym.datasets.Dataset.benchmark_uris"><code class="xref py py-meth docutils literal notranslate"><span class="pre">benchmark_uris()</span></code></a>
is the same.</p>
<p>If the number of benchmarks in the dataset is infinite
(<code class="code docutils literal notranslate"><span class="pre">len(dataset)</span> <span class="pre">==</span> <span class="pre">math.inf</span></code>), the iterable returned by this method
will continue indefinitely.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An iterable sequence of <a class="reference internal" href="#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.Benchmark"><code class="xref py py-class docutils literal notranslate"><span class="pre">Benchmark</span></code></a> instances.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.datasets.Dataset.deprecated">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">deprecated</span></span><em class="property"><span class="pre">:</span> <span class="pre">bool</span></em><a class="headerlink" href="#compiler_gym.datasets.Dataset.deprecated" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the dataset is included in the iterable sequence of datasets
of a containing <a class="reference internal" href="#compiler_gym.datasets.Datasets" title="compiler_gym.datasets.Datasets"><code class="xref py py-class docutils literal notranslate"><span class="pre">Datasets</span></code></a>
collection.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.datasets.Dataset.description">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">description</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#compiler_gym.datasets.Dataset.description" title="Permalink to this definition">¶</a></dt>
<dd><p>A short human-readable description of the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.Dataset.install">
<span class="sig-name descname"><span class="pre">install</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">None</span><a class="reference internal" href="../_modules/compiler_gym/datasets/dataset.html#Dataset.install"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Dataset.install" title="Permalink to this definition">¶</a></dt>
<dd><p>Install this dataset locally.</p>
<p>Implementing this method is optional. If implementing this method, you
must call <code class="code docutils literal notranslate"><span class="pre">super().install()</span></code> first.</p>
<p>This method should not perform redundant work. This method should first
detect whether any work needs to be done so that repeated calls to
<code class="code docutils literal notranslate"><span class="pre">install()</span></code> will complete quickly.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.datasets.Dataset.installed">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">installed</span></span><em class="property"><span class="pre">:</span> <span class="pre">bool</span></em><a class="headerlink" href="#compiler_gym.datasets.Dataset.installed" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the dataset is installed locally. Installation occurs
automatically on first use, or by calling <a class="reference internal" href="#compiler_gym.datasets.Dataset.install" title="compiler_gym.datasets.Dataset.install"><code class="xref py py-meth docutils literal notranslate"><span class="pre">install()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.datasets.Dataset.license">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">license</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#compiler_gym.datasets.Dataset.license" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the license of the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.datasets.Dataset.logger">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">logger</span></span><em class="property"><span class="pre">:</span> <span class="pre">logging.Logger</span></em><a class="headerlink" href="#compiler_gym.datasets.Dataset.logger" title="Permalink to this definition">¶</a></dt>
<dd><p>The logger for this dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>logging.Logger</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.datasets.Dataset.name">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#compiler_gym.datasets.Dataset.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.datasets.Dataset.protocol">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">protocol</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#compiler_gym.datasets.Dataset.protocol" title="Permalink to this definition">¶</a></dt>
<dd><p>The URI protocol that is used to identify benchmarks in this dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.Dataset.random_benchmark">
<span class="sig-name descname"><span class="pre">random_benchmark</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">random_state</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.random._generator.Generator</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.benchmark.Benchmark"><span class="pre">compiler_gym.datasets.benchmark.Benchmark</span></a><a class="reference internal" href="../_modules/compiler_gym/datasets/dataset.html#Dataset.random_benchmark"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Dataset.random_benchmark" title="Permalink to this definition">¶</a></dt>
<dd><p>Select a benchmark randomly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>random_state</strong> – A random number generator. If not provided, a
default <code class="code docutils literal notranslate"><span class="pre">np.random.default_rng()</span></code> is used.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <a class="reference internal" href="#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.Benchmark"><code class="xref py py-class docutils literal notranslate"><span class="pre">Benchmark</span></code></a>
instance.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.datasets.Dataset.references">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">references</span></span><em class="property"><span class="pre">:</span> <span class="pre">Dict[str,</span> <span class="pre">str]</span></em><a class="headerlink" href="#compiler_gym.datasets.Dataset.references" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary of useful named URLs for this dataset containing extra
information, download links, papers, etc.</p>
<p>For example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">references</span>
<span class="go">{&#39;Paper&#39;: &#39;https://arxiv.org/pdf/1407.3487.pdf&#39;,</span>
<span class="go">&#39;Homepage&#39;: &#39;https://ctuning.org/wiki/index.php/CTools:CBench&#39;}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Dict[str, str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.datasets.Dataset.site_data_path">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">site_data_path</span></span><em class="property"><span class="pre">:</span> <span class="pre">pathlib.Path</span></em><a class="headerlink" href="#compiler_gym.datasets.Dataset.site_data_path" title="Permalink to this definition">¶</a></dt>
<dd><p>The filesystem path used to store persistent dataset files.</p>
<p>This directory may not exist.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Path</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.datasets.Dataset.site_data_size_in_bytes">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">site_data_size_in_bytes</span></span><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#compiler_gym.datasets.Dataset.site_data_size_in_bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>The total size of the on-disk data used by this dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.datasets.Dataset.size">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">size</span></span><em class="property"><span class="pre">:</span> <span class="pre">Union[int,</span> <span class="pre">float]</span></em><a class="headerlink" href="#compiler_gym.datasets.Dataset.size" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of benchmarks in the dataset. If the number of benchmarks
is unbounded, for example because the dataset represents a program
generator that can produce an infinite number of programs, the value is
<code class="code docutils literal notranslate"><span class="pre">math.inf</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Union[int, float]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.Dataset.uninstall">
<span class="sig-name descname"><span class="pre">uninstall</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">None</span><a class="reference internal" href="../_modules/compiler_gym/datasets/dataset.html#Dataset.uninstall"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Dataset.uninstall" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove any local data for this benchmark.</p>
<p>This method undoes the work of <a class="reference internal" href="#compiler_gym.datasets.Dataset.install" title="compiler_gym.datasets.Dataset.install"><code class="xref py py-meth docutils literal notranslate"><span class="pre">install()</span></code></a>. The dataset can still be used
after calling this method.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.datasets.Dataset.validatable">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">validatable</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#compiler_gym.datasets.Dataset.validatable" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the dataset is validatable. A validatable dataset is one
where the behavior of the benchmarks can be checked by compiling the
programs to binaries and executing them. If the benchmarks crash, or are
found to have different behavior, then validation fails. This type of
validation is used to check that the compiler has not broken the
semantics of the program.</p>
<p>This property takes a string and is used for documentation purposes
only. Suggested values are “Yes”, “No”, or “Partial”.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.datasets.Dataset.version">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">version</span></span><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#compiler_gym.datasets.Dataset.version" title="Permalink to this definition">¶</a></dt>
<dd><p>The version tag for this dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.datasets.DatasetInitError">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">compiler_gym.datasets.</span></span><span class="sig-name descname"><span class="pre">DatasetInitError</span></span><a class="reference internal" href="../_modules/compiler_gym/datasets/dataset.html#DatasetInitError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.DatasetInitError" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for errors raised if a dataset fails to initialize.</p>
</dd></dl>

</div>
<div class="section" id="filesdataset">
<h2><a class="toc-backref" href="#id3">FilesDataset</a><a class="headerlink" href="#filesdataset" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.datasets.FilesDataset">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">compiler_gym.datasets.</span></span><span class="sig-name descname"><span class="pre">FilesDataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset_root</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pathlib.Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">benchmark_file_suffix</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">memoize_uris</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">dataset_args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/datasets/files_dataset.html#FilesDataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.FilesDataset" title="Permalink to this definition">¶</a></dt>
<dd><p>A dataset comprising a directory tree of files.</p>
<p>A FilesDataset is a root directory that contains (a possibly nested tree of)
files, where each file represents a benchmark. The directory contents can be
filtered by specifying a filename suffix that files must match.</p>
<p>The URI of benchmarks is the relative path of each file, stripped of a
required filename suffix, if specified. For example, given the following
file tree:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">dataset</span><span class="o">/</span><span class="n">a</span><span class="o">.</span><span class="n">txt</span>
<span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">dataset</span><span class="o">/</span><span class="n">LICENSE</span>
<span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">dataset</span><span class="o">/</span><span class="n">subdir</span><span class="o">/</span><span class="n">subdir</span><span class="o">/</span><span class="n">b</span><span class="o">.</span><span class="n">txt</span>
<span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">dataset</span><span class="o">/</span><span class="n">subdir</span><span class="o">/</span><span class="n">subdir</span><span class="o">/</span><span class="n">c</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>a FilesDataset <code class="code docutils literal notranslate"><span class="pre">benchmark://ds-v0</span></code> rooted at <code class="code docutils literal notranslate"><span class="pre">/tmp/dataset</span></code> with
filename suffix <code class="code docutils literal notranslate"><span class="pre">.txt</span></code> will contain the following URIs:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">benchmark_uris</span><span class="p">())</span>
<span class="go">[</span>
<span class="go">    &quot;benchmark://ds-v0/a&quot;,</span>
<span class="go">    &quot;benchmark://ds-v0/subdir/subdir/b&quot;,</span>
<span class="go">    &quot;benchmark://ds-v0/subdir/subdir/c&quot;,</span>
<span class="go">]</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.FilesDataset.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset_root</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pathlib.Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">benchmark_file_suffix</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">memoize_uris</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">dataset_args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/datasets/files_dataset.html#FilesDataset.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.FilesDataset.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset_root</strong> – The root directory to look for benchmark files.</p></li>
<li><p><strong>benchmark_file_suffix</strong> – A file extension that must be matched for
a file to be used as a benchmark.</p></li>
<li><p><strong>memoize_uris</strong> – Whether to memoize the list of URIs contained in
the dataset. Memoizing the URIs enables faster repeated iteration
over <a class="reference internal" href="#compiler_gym.datasets.Dataset.benchmark_uris" title="compiler_gym.datasets.Dataset.benchmark_uris"><code class="xref py py-meth docutils literal notranslate"><span class="pre">dataset.benchmark_uris()</span></code></a> at the expense of
increased memory overhead as the file list must be kept in memory.</p></li>
<li><p><strong>dataset_args</strong> – See <a class="reference internal" href="#compiler_gym.datasets.Dataset.__init__" title="compiler_gym.datasets.Dataset.__init__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Dataset.__init__()</span></code></a>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.FilesDataset.benchmark">
<span class="sig-name descname"><span class="pre">benchmark</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uri</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.benchmark.Benchmark"><span class="pre">compiler_gym.datasets.benchmark.Benchmark</span></a><a class="reference internal" href="../_modules/compiler_gym/datasets/files_dataset.html#FilesDataset.benchmark"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.FilesDataset.benchmark" title="Permalink to this definition">¶</a></dt>
<dd><p>Select a benchmark.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>uri</strong> – The URI of the benchmark to return.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <a class="reference internal" href="#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.Benchmark"><code class="xref py py-class docutils literal notranslate"><span class="pre">Benchmark</span></code></a>
instance.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>LookupError</strong> – If <code class="code docutils literal notranslate"><span class="pre">uri</span></code> is not found.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.FilesDataset.benchmark_uris">
<span class="sig-name descname"><span class="pre">benchmark_uris</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/compiler_gym/datasets/files_dataset.html#FilesDataset.benchmark_uris"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.FilesDataset.benchmark_uris" title="Permalink to this definition">¶</a></dt>
<dd><p>Enumerate the (possibly infinite) benchmark URIs.</p>
<p>Iteration order is consistent across runs. The order of
<a class="reference internal" href="#compiler_gym.datasets.Dataset.benchmarks" title="compiler_gym.datasets.Dataset.benchmarks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">benchmarks()</span></code></a> and
<a class="reference internal" href="#compiler_gym.datasets.Dataset.benchmark_uris" title="compiler_gym.datasets.Dataset.benchmark_uris"><code class="xref py py-meth docutils literal notranslate"><span class="pre">benchmark_uris()</span></code></a>
is the same.</p>
<p>If the number of benchmarks in the dataset is infinite
(<code class="code docutils literal notranslate"><span class="pre">len(dataset)</span> <span class="pre">==</span> <span class="pre">math.inf</span></code>), the iterable returned by this method
will continue indefinitely.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An iterable sequence of benchmark URI strings.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.datasets.FilesDataset.size">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">size</span></span><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#compiler_gym.datasets.FilesDataset.size" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of benchmarks in the dataset. If the number of benchmarks
is unbounded, for example because the dataset represents a program
generator that can produce an infinite number of programs, the value is
<code class="code docutils literal notranslate"><span class="pre">math.inf</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Union[int, float]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="tardataset">
<h2><a class="toc-backref" href="#id4">TarDataset</a><a class="headerlink" href="#tardataset" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.datasets.TarDataset">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">compiler_gym.datasets.</span></span><span class="sig-name descname"><span class="pre">TarDataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tar_urls</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tar_sha256</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tar_compression</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'bz2'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strip_prefix</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">dataset_args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/datasets/tar_dataset.html#TarDataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.TarDataset" title="Permalink to this definition">¶</a></dt>
<dd><p>A dataset comprising a files tree stored in a tar archive.</p>
<p>This extends the <a class="reference internal" href="#compiler_gym.datasets.FilesDataset" title="compiler_gym.datasets.FilesDataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">FilesDataset</span></code></a>
class by adding support for compressed archives of files. The archive is
downloaded and unpacked on-demand.</p>
<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.TarDataset.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tar_urls</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tar_sha256</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tar_compression</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'bz2'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strip_prefix</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">dataset_args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/datasets/tar_dataset.html#TarDataset.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.TarDataset.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tar_urls</strong> – A list of redundant URLS to download the tar archive from.</p></li>
<li><p><strong>tar_sha256</strong> – The SHA256 checksum of the downloaded tar archive.</p></li>
<li><p><strong>tar_compression</strong> – The tar archive compression type. One of
{“bz2”, “gz”}.</p></li>
<li><p><strong>strip_prefix</strong> – An optional path prefix to strip. Only files that
match this path prefix will be used as benchmarks.</p></li>
<li><p><strong>dataset_args</strong> – See <a class="reference internal" href="#compiler_gym.datasets.FilesDataset.__init__" title="compiler_gym.datasets.FilesDataset.__init__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FilesDataset.__init__()</span></code></a>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.TarDataset.install">
<span class="sig-name descname"><span class="pre">install</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">None</span><a class="reference internal" href="../_modules/compiler_gym/datasets/tar_dataset.html#TarDataset.install"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.TarDataset.install" title="Permalink to this definition">¶</a></dt>
<dd><p>Install this dataset locally.</p>
<p>Implementing this method is optional. If implementing this method, you
must call <code class="code docutils literal notranslate"><span class="pre">super().install()</span></code> first.</p>
<p>This method should not perform redundant work. This method should first
detect whether any work needs to be done so that repeated calls to
<code class="code docutils literal notranslate"><span class="pre">install()</span></code> will complete quickly.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.datasets.TarDataset.installed">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">installed</span></span><em class="property"><span class="pre">:</span> <span class="pre">bool</span></em><a class="headerlink" href="#compiler_gym.datasets.TarDataset.installed" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the dataset is installed locally. Installation occurs
automatically on first use, or by calling <a class="reference internal" href="#compiler_gym.datasets.Dataset.install" title="compiler_gym.datasets.Dataset.install"><code class="xref py py-meth docutils literal notranslate"><span class="pre">install()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="tardatasetwithmanifest">
<h2><a class="toc-backref" href="#id5">TarDatasetWithManifest</a><a class="headerlink" href="#tardatasetwithmanifest" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.datasets.TarDatasetWithManifest">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">compiler_gym.datasets.</span></span><span class="sig-name descname"><span class="pre">TarDatasetWithManifest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">manifest_urls</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manifest_sha256</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manifest_compression</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'bz2'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">dataset_args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/datasets/tar_dataset.html#TarDatasetWithManifest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.TarDatasetWithManifest" title="Permalink to this definition">¶</a></dt>
<dd><p>A tarball-based dataset that reads the benchmark URIs from a separate
manifest file.</p>
<p>A manifest file is a plain text file containing a list of benchmark names,
one per line, and is shipped separately from the tar file. The idea is to
allow the list of benchmark URIs to be enumerated in a more lightweight
manner than downloading and unpacking the entire dataset. It does this by
downloading and unpacking only the manifest to iterate over the URIs.</p>
<p>The manifest file is assumed to be correct and is not validated.</p>
<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.TarDatasetWithManifest.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">manifest_urls</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manifest_sha256</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">manifest_compression</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'bz2'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">dataset_args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/datasets/tar_dataset.html#TarDatasetWithManifest.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.TarDatasetWithManifest.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>manifest_urls</strong> – A list of redundant URLS to download the
compressed text file containing a list of benchmark URI suffixes,
one per line.</p></li>
<li><p><strong>manifest_sha256</strong> – The sha256 checksum of the compressed manifest
file.</p></li>
<li><p><strong>manifest_compression</strong> – The manifest compression type. One of
{“bz2”, “gz”}.</p></li>
<li><p><strong>dataset_args</strong> – See <a class="reference internal" href="#compiler_gym.datasets.TarDataset.__init__" title="compiler_gym.datasets.TarDataset.__init__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TarDataset.__init__()</span></code></a>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.TarDatasetWithManifest.benchmark_uris">
<span class="sig-name descname"><span class="pre">benchmark_uris</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/compiler_gym/datasets/tar_dataset.html#TarDatasetWithManifest.benchmark_uris"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.TarDatasetWithManifest.benchmark_uris" title="Permalink to this definition">¶</a></dt>
<dd><p>Enumerate the (possibly infinite) benchmark URIs.</p>
<p>Iteration order is consistent across runs. The order of
<a class="reference internal" href="#compiler_gym.datasets.Dataset.benchmarks" title="compiler_gym.datasets.Dataset.benchmarks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">benchmarks()</span></code></a> and
<a class="reference internal" href="#compiler_gym.datasets.Dataset.benchmark_uris" title="compiler_gym.datasets.Dataset.benchmark_uris"><code class="xref py py-meth docutils literal notranslate"><span class="pre">benchmark_uris()</span></code></a>
is the same.</p>
<p>If the number of benchmarks in the dataset is infinite
(<code class="code docutils literal notranslate"><span class="pre">len(dataset)</span> <span class="pre">==</span> <span class="pre">math.inf</span></code>), the iterable returned by this method
will continue indefinitely.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An iterable sequence of benchmark URI strings.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.datasets.TarDatasetWithManifest.size">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">size</span></span><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#compiler_gym.datasets.TarDatasetWithManifest.size" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of benchmarks in the dataset. If the number of benchmarks
is unbounded, for example because the dataset represents a program
generator that can produce an infinite number of programs, the value is
<code class="code docutils literal notranslate"><span class="pre">math.inf</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Union[int, float]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="datasets">
<h2><a class="toc-backref" href="#id6">Datasets</a><a class="headerlink" href="#datasets" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.datasets.Datasets">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">compiler_gym.datasets.</span></span><span class="sig-name descname"><span class="pre">Datasets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">datasets</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#compiler_gym.datasets.Dataset" title="compiler_gym.datasets.dataset.Dataset"><span class="pre">compiler_gym.datasets.dataset.Dataset</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/datasets/datasets.html#Datasets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Datasets" title="Permalink to this definition">¶</a></dt>
<dd><p>A collection of datasets.</p>
<p>This class provides a dictionary-like interface for indexing and iterating
over multiple <a class="reference internal" href="#compiler_gym.datasets.Dataset" title="compiler_gym.datasets.Dataset"><code class="xref py py-class docutils literal notranslate"><span class="pre">Dataset</span></code></a> objects.
Select a dataset by URI using:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">env</span><span class="o">.</span><span class="n">datasets</span><span class="p">[</span><span class="s2">&quot;benchmark://cbench-v1&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>Check whether a dataset exists using:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="s2">&quot;benchmark://cbench-v1&quot;</span> <span class="ow">in</span> <span class="n">env</span><span class="o">.</span><span class="n">datasets</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Or iterate over the datasets using:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">dataset</span> <span class="ow">in</span> <span class="n">env</span><span class="o">.</span><span class="n">datasets</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="go">benchmark://cbench-v1</span>
<span class="go">benchmark://github-v0</span>
<span class="go">benchmark://npb-v0</span>
</pre></div>
</div>
<p>To select a benchmark from the datasets, use <a class="reference internal" href="#compiler_gym.datasets.Datasets.benchmark" title="compiler_gym.datasets.Datasets.benchmark"><code class="xref py py-meth docutils literal notranslate"><span class="pre">benchmark()</span></code></a>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">env</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">benchmark</span><span class="p">(</span><span class="s2">&quot;benchmark://a-v0/a&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Use the <a class="reference internal" href="#compiler_gym.datasets.Datasets.benchmarks" title="compiler_gym.datasets.Datasets.benchmarks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">benchmarks()</span></code></a> method to iterate over every benchmark in the
datasets in a stable round robin order:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">benchmark</span> <span class="ow">in</span> <span class="n">env</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">benchmarks</span><span class="p">():</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">benchmark</span><span class="p">)</span>
<span class="go">benchmark://cbench-v1/1</span>
<span class="go">benchmark://github-v0/1</span>
<span class="go">benchmark://npb-v0/1</span>
<span class="go">benchmark://cbench-v1/2</span>
<span class="gp">...</span>
</pre></div>
</div>
<p>If you want to exclude a dataset, delete it:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">env</span><span class="o">.</span><span class="n">datasets</span><span class="p">[</span><span class="s2">&quot;benchmark://b-v0&quot;</span><span class="p">]</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.Datasets.__len__">
<span class="sig-name descname"><span class="pre">__len__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">int</span><a class="reference internal" href="../_modules/compiler_gym/datasets/datasets.html#Datasets.__len__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Datasets.__len__" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of datasets in the collection.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.Datasets.__getitem__">
<span class="sig-name descname"><span class="pre">__getitem__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#compiler_gym.datasets.Dataset" title="compiler_gym.datasets.dataset.Dataset"><span class="pre">compiler_gym.datasets.dataset.Dataset</span></a><a class="reference internal" href="../_modules/compiler_gym/datasets/datasets.html#Datasets.__getitem__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Datasets.__getitem__" title="Permalink to this definition">¶</a></dt>
<dd><p>Lookup a dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dataset</strong> – A dataset name.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <a class="reference internal" href="#compiler_gym.datasets.Dataset" title="compiler_gym.datasets.Dataset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Dataset</span></code></a> instance.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>LookupError</strong> – If <code class="code docutils literal notranslate"><span class="pre">dataset</span></code> is not found.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.Datasets.__setitem__">
<span class="sig-name descname"><span class="pre">__setitem__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#compiler_gym.datasets.Dataset" title="compiler_gym.datasets.dataset.Dataset"><span class="pre">compiler_gym.datasets.dataset.Dataset</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/datasets/datasets.html#Datasets.__setitem__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Datasets.__setitem__" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a dataset to the collection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> – The name of the dataset.</p></li>
<li><p><strong>dataset</strong> – The dataset to add.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.Datasets.__delitem__">
<span class="sig-name descname"><span class="pre">__delitem__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/datasets/datasets.html#Datasets.__delitem__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Datasets.__delitem__" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a dataset from the collection.</p>
<p>This does not affect any underlying storage used by dataset. See
<code class="xref py py-meth docutils literal notranslate"><span class="pre">uninstall()</span></code> to clean
up.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dataset</strong> – The name of a dataset.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="code docutils literal notranslate"><span class="pre">True</span></code> if the dataset was removed, <code class="code docutils literal notranslate"><span class="pre">False</span></code> if it
was already removed.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.Datasets.__contains__">
<span class="sig-name descname"><span class="pre">__contains__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">bool</span><a class="reference internal" href="../_modules/compiler_gym/datasets/datasets.html#Datasets.__contains__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Datasets.__contains__" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns whether the dataset is contained.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.Datasets.__iter__">
<span class="sig-name descname"><span class="pre">__iter__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#compiler_gym.datasets.Dataset" title="compiler_gym.datasets.dataset.Dataset"><span class="pre">compiler_gym.datasets.dataset.Dataset</span></a><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/compiler_gym/datasets/datasets.html#Datasets.__iter__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Datasets.__iter__" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over the datasets.</p>
<p>Dataset order is consistent across runs.</p>
<p>Equivalent to <code class="xref py py-meth docutils literal notranslate"><span class="pre">datasets.datasets()</span></code>, but without the ability to
iterate over the deprecated datasets.</p>
<p>If the number of benchmarks in any of the datasets is infinite
(<code class="code docutils literal notranslate"><span class="pre">len(dataset)</span> <span class="pre">==</span> <span class="pre">math.inf</span></code>), the iterable returned by this method
will continue indefinitely.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An iterable sequence of <a class="reference internal" href="#compiler_gym.datasets.Dataset" title="compiler_gym.datasets.Dataset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Dataset</span></code></a> instances.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.Datasets.benchmark">
<span class="sig-name descname"><span class="pre">benchmark</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">uri</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.benchmark.Benchmark"><span class="pre">compiler_gym.datasets.benchmark.Benchmark</span></a><a class="reference internal" href="../_modules/compiler_gym/datasets/datasets.html#Datasets.benchmark"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Datasets.benchmark" title="Permalink to this definition">¶</a></dt>
<dd><p>Select a benchmark.</p>
<p>Returns the corresponding <a class="reference internal" href="#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.Benchmark"><code class="xref py py-class docutils literal notranslate"><span class="pre">Benchmark</span></code></a>, regardless of whether the containing
dataset is installed or deprecated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>uri</strong> – The URI of the benchmark to return.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <a class="reference internal" href="#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.Benchmark"><code class="xref py py-class docutils literal notranslate"><span class="pre">Benchmark</span></code></a>
instance.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.Datasets.benchmark_uris">
<span class="sig-name descname"><span class="pre">benchmark_uris</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">with_deprecated</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/compiler_gym/datasets/datasets.html#Datasets.benchmark_uris"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Datasets.benchmark_uris" title="Permalink to this definition">¶</a></dt>
<dd><p>Enumerate the (possibly infinite) benchmark URIs.</p>
<p>Benchmark URI order is consistent across runs. URIs from datasets are
returned in round robin order. The order of <a class="reference internal" href="#compiler_gym.datasets.Datasets.benchmarks" title="compiler_gym.datasets.Datasets.benchmarks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">benchmarks()</span></code></a> and <a class="reference internal" href="#compiler_gym.datasets.Datasets.benchmark_uris" title="compiler_gym.datasets.Datasets.benchmark_uris"><code class="xref py py-meth docutils literal notranslate"><span class="pre">benchmark_uris()</span></code></a> is the same.</p>
<p>If the number of benchmarks in any of the datasets is infinite
(<code class="code docutils literal notranslate"><span class="pre">len(dataset)</span> <span class="pre">==</span> <span class="pre">math.inf</span></code>), the iterable returned by this method
will continue indefinitely.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>with_deprecated</strong> – If <code class="code docutils literal notranslate"><span class="pre">True</span></code>, include benchmarks from
datasets that have been marked deprecated.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An iterable sequence of benchmark URI strings.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.Datasets.benchmarks">
<span class="sig-name descname"><span class="pre">benchmarks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">with_deprecated</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.benchmark.Benchmark"><span class="pre">compiler_gym.datasets.benchmark.Benchmark</span></a><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/compiler_gym/datasets/datasets.html#Datasets.benchmarks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Datasets.benchmarks" title="Permalink to this definition">¶</a></dt>
<dd><p>Enumerate the (possibly infinite) benchmarks lazily.</p>
<p>Benchmarks order is consistent across runs. One benchmark from each
dataset is returned in round robin order until all datasets have been
fully enumerated. The order of <a class="reference internal" href="#compiler_gym.datasets.Datasets.benchmarks" title="compiler_gym.datasets.Datasets.benchmarks"><code class="xref py py-meth docutils literal notranslate"><span class="pre">benchmarks()</span></code></a> and <a class="reference internal" href="#compiler_gym.datasets.Datasets.benchmark_uris" title="compiler_gym.datasets.Datasets.benchmark_uris"><code class="xref py py-meth docutils literal notranslate"><span class="pre">benchmark_uris()</span></code></a> is the same.</p>
<p>If the number of benchmarks in any of the datasets is infinite
(<code class="code docutils literal notranslate"><span class="pre">len(dataset)</span> <span class="pre">==</span> <span class="pre">math.inf</span></code>), the iterable returned by this method
will continue indefinitely.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>with_deprecated</strong> – If <code class="code docutils literal notranslate"><span class="pre">True</span></code>, include benchmarks from
datasets that have been marked deprecated.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An iterable sequence of <a class="reference internal" href="#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.Benchmark"><code class="xref py py-class docutils literal notranslate"><span class="pre">Benchmark</span></code></a> instances.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.Datasets.dataset">
<span class="sig-name descname"><span class="pre">dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#compiler_gym.datasets.Dataset" title="compiler_gym.datasets.dataset.Dataset"><span class="pre">compiler_gym.datasets.dataset.Dataset</span></a><a class="reference internal" href="../_modules/compiler_gym/datasets/datasets.html#Datasets.dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Datasets.dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a dataset.</p>
<p>Return the corresponding <a class="reference internal" href="#compiler_gym.datasets.Dataset" title="compiler_gym.datasets.Dataset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Dataset</span></code></a>. Name lookup will succeed whether or
not the dataset is deprecated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dataset</strong> – A dataset name.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <a class="reference internal" href="#compiler_gym.datasets.Dataset" title="compiler_gym.datasets.Dataset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Dataset</span></code></a> instance.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>LookupError</strong> – If <code class="code docutils literal notranslate"><span class="pre">dataset</span></code> is not found.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.Datasets.datasets">
<span class="sig-name descname"><span class="pre">datasets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">with_deprecated</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#compiler_gym.datasets.Dataset" title="compiler_gym.datasets.dataset.Dataset"><span class="pre">compiler_gym.datasets.dataset.Dataset</span></a><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/compiler_gym/datasets/datasets.html#Datasets.datasets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Datasets.datasets" title="Permalink to this definition">¶</a></dt>
<dd><p>Enumerate the datasets.</p>
<p>Dataset order is consistent across runs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>with_deprecated</strong> – If <code class="code docutils literal notranslate"><span class="pre">True</span></code>, include datasets that have been
marked as deprecated.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An iterable sequence of <a class="reference internal" href="#compiler_gym.datasets.Dataset" title="compiler_gym.datasets.Dataset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Dataset</span></code></a> instances.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.datasets.Datasets.random_benchmark">
<span class="sig-name descname"><span class="pre">random_benchmark</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">random_state</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.random._generator.Generator</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.benchmark.Benchmark"><span class="pre">compiler_gym.datasets.benchmark.Benchmark</span></a><a class="reference internal" href="../_modules/compiler_gym/datasets/datasets.html#Datasets.random_benchmark"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.datasets.Datasets.random_benchmark" title="Permalink to this definition">¶</a></dt>
<dd><p>Select a benchmark randomly.</p>
<p>First, a dataset is selected uniformly randomly using
<code class="code docutils literal notranslate"><span class="pre">random_state.choice(list(datasets))</span></code>. The
<a class="reference internal" href="#compiler_gym.datasets.Dataset.random_benchmark" title="compiler_gym.datasets.Dataset.random_benchmark"><code class="xref py py-meth docutils literal notranslate"><span class="pre">random_benchmark()</span></code></a> method of that dataset
is then called to select a benchmark.</p>
<p>Note that the distribution of benchmarks selected by this method is not
biased by the size of each dataset, since datasets are selected
uniformly. This means that datasets with a small number of benchmarks
will be overrepresented compared to datasets with many benchmarks. To
correct for this bias, use the number of benchmarks in each dataset as
a weight for the random selection:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rng</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">default_rng</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">finite_datasets</span> <span class="o">=</span> <span class="p">[</span><span class="n">d</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">env</span><span class="o">.</span><span class="n">datasets</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="o">!=</span> <span class="n">math</span><span class="o">.</span><span class="n">inf</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">rng</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span>
<span class="go">    finite_datasets,</span>
<span class="go">    p=[len(d) for d in finite_datasets]</span>
<span class="go">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span><span class="o">.</span><span class="n">random_benchmark</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">rng</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>random_state</strong> – A random number generator. If not provided, a
default <code class="code docutils literal notranslate"><span class="pre">np.random.default_rng()</span></code> is used.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <a class="reference internal" href="#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.Benchmark"><code class="xref py py-class docutils literal notranslate"><span class="pre">Benchmark</span></code></a>
instance.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="envs.html" class="btn btn-neutral float-right" title="compiler_gym.envs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="compiler_gym.html" class="btn btn-neutral float-left" title="compiler_gym" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright Facebook AI Research.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'G-T95G5EVYXM', 'auto');
    
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>