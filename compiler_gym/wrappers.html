<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>compiler_gym.wrappers &mdash; CompilerGym 0.2.5 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="compiler_gym/envs/llvm/service" href="../cc/compiler_gym/envs/llvm/service.html" />
    <link rel="prev" title="compiler_gym.views" href="views.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html">
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.2.5
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">Command Line Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rpc.html">RPC Service Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Environments</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../llvm/index.html">LLVM Environment Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../envs/gcc.html">GCC Environment Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../envs/loop_tool.html">loop_tool Environment Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../envs/mlir.html">MLIR Environment Reference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python API Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="compiler_gym.html">compiler_gym</a></li>
<li class="toctree-l1"><a class="reference internal" href="datasets.html">compiler_gym.datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="envs.html">compiler_gym.envs</a></li>
<li class="toctree-l1"><a class="reference internal" href="envs/gcc.html">compiler_gym.envs.gcc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../llvm/api.html">compiler_gym.envs.llvm</a></li>
<li class="toctree-l1"><a class="reference internal" href="leaderboard.html">compiler_gym.leaderboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="service.html">compiler_gym.service</a></li>
<li class="toctree-l1"><a class="reference internal" href="service/runtime.html">compiler_gym.service.runtime</a></li>
<li class="toctree-l1"><a class="reference internal" href="spaces.html">compiler_gym.spaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="views.html">compiler_gym.views</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">compiler_gym.wrappers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#base-wrappers">Base wrappers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.wrappers.CompilerEnvWrapper"><code class="docutils literal notranslate"><span class="pre">CompilerEnvWrapper</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#compiler_gym.wrappers.CompilerEnvWrapper.__init__"><code class="docutils literal notranslate"><span class="pre">CompilerEnvWrapper.__init__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.wrappers.ActionWrapper"><code class="docutils literal notranslate"><span class="pre">ActionWrapper</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#compiler_gym.wrappers.ActionWrapper.action"><code class="docutils literal notranslate"><span class="pre">ActionWrapper.action()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#compiler_gym.wrappers.ActionWrapper.reverse_action"><code class="docutils literal notranslate"><span class="pre">ActionWrapper.reverse_action()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.wrappers.ObservationWrapper"><code class="docutils literal notranslate"><span class="pre">ObservationWrapper</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#compiler_gym.wrappers.ObservationWrapper.observation"><code class="docutils literal notranslate"><span class="pre">ObservationWrapper.observation()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.wrappers.RewardWrapper"><code class="docutils literal notranslate"><span class="pre">RewardWrapper</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#compiler_gym.wrappers.RewardWrapper.reward"><code class="docutils literal notranslate"><span class="pre">RewardWrapper.reward()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#action-space-wrappers">Action space wrappers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.wrappers.CommandlineWithTerminalAction"><code class="docutils literal notranslate"><span class="pre">CommandlineWithTerminalAction</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#compiler_gym.wrappers.CommandlineWithTerminalAction.__init__"><code class="docutils literal notranslate"><span class="pre">CommandlineWithTerminalAction.__init__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.wrappers.ConstrainedCommandline"><code class="docutils literal notranslate"><span class="pre">ConstrainedCommandline</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#compiler_gym.wrappers.ConstrainedCommandline.__init__"><code class="docutils literal notranslate"><span class="pre">ConstrainedCommandline.__init__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.wrappers.TimeLimit"><code class="docutils literal notranslate"><span class="pre">TimeLimit</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#compiler_gym.wrappers.TimeLimit.__init__"><code class="docutils literal notranslate"><span class="pre">TimeLimit.__init__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.wrappers.ForkOnStep"><code class="docutils literal notranslate"><span class="pre">ForkOnStep</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#compiler_gym.wrappers.ForkOnStep.__init__"><code class="docutils literal notranslate"><span class="pre">ForkOnStep.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#compiler_gym.wrappers.ForkOnStep.undo"><code class="docutils literal notranslate"><span class="pre">ForkOnStep.undo()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#datasets-wrappers">Datasets wrappers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.wrappers.IterateOverBenchmarks"><code class="docutils literal notranslate"><span class="pre">IterateOverBenchmarks</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#compiler_gym.wrappers.IterateOverBenchmarks.__init__"><code class="docutils literal notranslate"><span class="pre">IterateOverBenchmarks.__init__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.wrappers.CycleOverBenchmarks"><code class="docutils literal notranslate"><span class="pre">CycleOverBenchmarks</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#compiler_gym.wrappers.CycleOverBenchmarks.__init__"><code class="docutils literal notranslate"><span class="pre">CycleOverBenchmarks.__init__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.wrappers.CycleOverBenchmarksIterator"><code class="docutils literal notranslate"><span class="pre">CycleOverBenchmarksIterator</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#compiler_gym.wrappers.CycleOverBenchmarksIterator.__init__"><code class="docutils literal notranslate"><span class="pre">CycleOverBenchmarksIterator.__init__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.wrappers.RandomOrderBenchmarks"><code class="docutils literal notranslate"><span class="pre">RandomOrderBenchmarks</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#compiler_gym.wrappers.RandomOrderBenchmarks.__init__"><code class="docutils literal notranslate"><span class="pre">RandomOrderBenchmarks.__init__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#llvm-environment-wrappers">LLVM Environment wrappers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.wrappers.RuntimePointEstimateReward"><code class="docutils literal notranslate"><span class="pre">RuntimePointEstimateReward</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#compiler_gym.wrappers.RuntimePointEstimateReward.__init__"><code class="docutils literal notranslate"><span class="pre">RuntimePointEstimateReward.__init__()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#compiler_gym.wrappers.SynchronousSqliteLogger"><code class="docutils literal notranslate"><span class="pre">SynchronousSqliteLogger</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#compiler_gym.wrappers.SynchronousSqliteLogger.__init__"><code class="docutils literal notranslate"><span class="pre">SynchronousSqliteLogger.__init__()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#compiler_gym.wrappers.SynchronousSqliteLogger.flush"><code class="docutils literal notranslate"><span class="pre">SynchronousSqliteLogger.flush()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">C++ API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cc/compiler_gym/envs/llvm/service.html">compiler_gym/envs/llvm/service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cc/compiler_gym/service.html">compiler_gym/service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cc/compiler_gym/service/runtime.html">compiler_gym/service/runtime</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cc/compiler_gym/util.html">compiler_gym/util</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">CompilerGym</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>compiler_gym.wrappers</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/compiler_gym/wrappers.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-compiler_gym.wrappers">
<span id="compiler-gym-wrappers"></span><h1>compiler_gym.wrappers<a class="headerlink" href="#module-compiler_gym.wrappers" title="Permalink to this heading"></a></h1>
<p>The <code class="code docutils literal notranslate"><span class="pre">compiler_gym.wrappers</span></code> module provides a set of classes that can
be used to transform an environment in a modular way.</p>
<p>For example:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">env</span> <span class="o">=</span> <span class="n">compiler_gym</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s2">&quot;llvm-v0&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span> <span class="o">=</span> <span class="n">TimeLimit</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span> <span class="o">=</span> <span class="n">CycleOverBenchmarks</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">env</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">benchmarks</span><span class="o">=</span><span class="p">[</span>
<span class="gp">... </span>        <span class="s2">&quot;benchmark://cbench-v1/crc32&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s2">&quot;benchmark://cbench-v1/qsort&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>CompilerGym environments are incompatible with the <a class="reference external" href="https://github.com/openai/gym/tree/master/gym/wrappers">OpenAI Gym wrappers</a>. This is because
CompilerGym extends the environment API with additional arguments and
methods. You must use the wrappers from this module when wrapping
CompilerGym environments. We provide a set of base wrappers that are
equivalent to those in OpenAI Gym that you can use to write your own
wrappers.</p>
</div>
<div class="contents local topic" id="document-contents">
<p class="topic-title">Document contents:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#base-wrappers" id="id1">Base wrappers</a></p></li>
<li><p><a class="reference internal" href="#action-space-wrappers" id="id2">Action space wrappers</a></p></li>
<li><p><a class="reference internal" href="#datasets-wrappers" id="id3">Datasets wrappers</a></p></li>
<li><p><a class="reference internal" href="#llvm-environment-wrappers" id="id4">LLVM Environment wrappers</a></p></li>
</ul>
</div>
<section id="base-wrappers">
<h2><a class="toc-backref" href="#id1">Base wrappers</a><a class="headerlink" href="#base-wrappers" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.wrappers.CompilerEnvWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">compiler_gym.wrappers.</span></span><span class="sig-name descname"><span class="pre">CompilerEnvWrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.compiler_env.CompilerEnv"><span class="pre">CompilerEnv</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/wrappers/core.html#CompilerEnvWrapper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.wrappers.CompilerEnvWrapper" title="Permalink to this definition"></a></dt>
<dd><p>Wraps a <a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.CompilerEnv"><code class="xref py py-class docutils literal notranslate"><span class="pre">CompilerEnv</span></code></a> environment
to allow a modular transformation.</p>
<p>This class is the base class for all wrappers. This class must be used
rather than <code class="code docutils literal notranslate"><span class="pre">gym.Wrapper</span></code> to support the CompilerGym API extensions
such as the <code class="code docutils literal notranslate"><span class="pre">fork()</span></code> method.</p>
<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.wrappers.CompilerEnvWrapper.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.compiler_env.CompilerEnv"><span class="pre">CompilerEnv</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/wrappers/core.html#CompilerEnvWrapper.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.wrappers.CompilerEnvWrapper.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Constructor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>env</strong> – The environment to wrap.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – If <code class="code docutils literal notranslate"><span class="pre">env</span></code> is not a <a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.CompilerEnv"><code class="xref py py-class docutils literal notranslate"><span class="pre">CompilerEnv</span></code></a>.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.wrappers.ActionWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">compiler_gym.wrappers.</span></span><span class="sig-name descname"><span class="pre">ActionWrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.compiler_env.CompilerEnv"><span class="pre">CompilerEnv</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/wrappers/core.html#ActionWrapper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.wrappers.ActionWrapper" title="Permalink to this definition"></a></dt>
<dd><p>Wraps a <a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.CompilerEnv"><code class="xref py py-class docutils literal notranslate"><span class="pre">CompilerEnv</span></code></a> environment
to allow an action space transformation.</p>
<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.wrappers.ActionWrapper.action">
<span class="sig-name descname"><span class="pre">action</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">action</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ActionType</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ActionType</span></span></span><a class="reference internal" href="../_modules/compiler_gym/wrappers/core.html#ActionWrapper.action"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.wrappers.ActionWrapper.action" title="Permalink to this definition"></a></dt>
<dd><p>Translate the action to the new space.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.wrappers.ActionWrapper.reverse_action">
<span class="sig-name descname"><span class="pre">reverse_action</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">action</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ActionType</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ActionType</span></span></span><a class="reference internal" href="../_modules/compiler_gym/wrappers/core.html#ActionWrapper.reverse_action"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.wrappers.ActionWrapper.reverse_action" title="Permalink to this definition"></a></dt>
<dd><p>Translate an action from the new space to the wrapped space.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.wrappers.ObservationWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">compiler_gym.wrappers.</span></span><span class="sig-name descname"><span class="pre">ObservationWrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.compiler_env.CompilerEnv"><span class="pre">CompilerEnv</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/wrappers/core.html#ObservationWrapper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.wrappers.ObservationWrapper" title="Permalink to this definition"></a></dt>
<dd><p>Wraps a <a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.CompilerEnv"><code class="xref py py-class docutils literal notranslate"><span class="pre">CompilerEnv</span></code></a> environment
to allow an observation space transformation.</p>
<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.wrappers.ObservationWrapper.observation">
<span class="sig-name descname"><span class="pre">observation</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#compiler_gym.wrappers.ObservationWrapper.observation" title="Permalink to this definition"></a></dt>
<dd><p>A view of the available observation spaces that permits
on-demand computation of observations.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.wrappers.RewardWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">compiler_gym.wrappers.</span></span><span class="sig-name descname"><span class="pre">RewardWrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.compiler_env.CompilerEnv"><span class="pre">CompilerEnv</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/wrappers/core.html#RewardWrapper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.wrappers.RewardWrapper" title="Permalink to this definition"></a></dt>
<dd><p>Wraps a <a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.CompilerEnv"><code class="xref py py-class docutils literal notranslate"><span class="pre">CompilerEnv</span></code></a> environment
to allow an reward space transformation.</p>
<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.wrappers.RewardWrapper.reward">
<span class="sig-name descname"><span class="pre">reward</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#compiler_gym.wrappers.RewardWrapper.reward" title="Permalink to this definition"></a></dt>
<dd><p>A view of the available reward spaces that permits on-demand
computation of rewards.</p>
</dd></dl>

</dd></dl>

</section>
<section id="action-space-wrappers">
<h2><a class="toc-backref" href="#id2">Action space wrappers</a><a class="headerlink" href="#action-space-wrappers" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.wrappers.CommandlineWithTerminalAction">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">compiler_gym.wrappers.</span></span><span class="sig-name descname"><span class="pre">CommandlineWithTerminalAction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.compiler_env.CompilerEnv"><span class="pre">CompilerEnv</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">terminal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">CommandlineFlag(name='end-of-episode',</span> <span class="pre">flag='#</span> <span class="pre">end-of-episode',</span> <span class="pre">description='End</span> <span class="pre">the</span> <span class="pre">episode')</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/wrappers/commandline.html#CommandlineWithTerminalAction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.wrappers.CommandlineWithTerminalAction" title="Permalink to this definition"></a></dt>
<dd><p>Creates a new action space with a special “end of episode” terminal
action at the start. If step() is called with it, the “done” flag is set.</p>
<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.wrappers.CommandlineWithTerminalAction.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.compiler_env.CompilerEnv"><span class="pre">CompilerEnv</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">terminal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">CommandlineFlag(name='end-of-episode',</span> <span class="pre">flag='#</span> <span class="pre">end-of-episode',</span> <span class="pre">description='End</span> <span class="pre">the</span> <span class="pre">episode')</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/wrappers/commandline.html#CommandlineWithTerminalAction.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.wrappers.CommandlineWithTerminalAction.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Constructor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>env</strong> – The environment to wrap.</p></li>
<li><p><strong>terminal</strong> – The flag to use as the terminal action. Optional.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.wrappers.ConstrainedCommandline">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">compiler_gym.wrappers.</span></span><span class="sig-name descname"><span class="pre">ConstrainedCommandline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.compiler_env.CompilerEnv"><span class="pre">CompilerEnv</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">flags</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/wrappers/commandline.html#ConstrainedCommandline"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.wrappers.ConstrainedCommandline" title="Permalink to this definition"></a></dt>
<dd><p>Constrains a Commandline action space to a subset of the original space’s
flags.</p>
<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.wrappers.ConstrainedCommandline.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.compiler_env.CompilerEnv"><span class="pre">CompilerEnv</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">flags</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/wrappers/commandline.html#ConstrainedCommandline.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.wrappers.ConstrainedCommandline.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Constructor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>env</strong> – The environment to wrap.</p></li>
<li><p><strong>flags</strong> – A list of entries from <code class="code docutils literal notranslate"><span class="pre">env.action_space.flags</span></code>
denoting flags that are available in this wrapped environment.</p></li>
<li><p><strong>name</strong> – The name of the new action space.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.wrappers.TimeLimit">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">compiler_gym.wrappers.</span></span><span class="sig-name descname"><span class="pre">TimeLimit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.compiler_env.CompilerEnv"><span class="pre">CompilerEnv</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_episode_steps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/wrappers/time_limit.html#TimeLimit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.wrappers.TimeLimit" title="Permalink to this definition"></a></dt>
<dd><p>A step-limited wrapper that is compatible with CompilerGym.</p>
<p>Example usage:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">env</span> <span class="o">=</span> <span class="n">TimeLimit</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="n">max_episode_steps</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">done</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">done</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">done</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">done</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.wrappers.TimeLimit.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.compiler_env.CompilerEnv"><span class="pre">CompilerEnv</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_episode_steps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/wrappers/time_limit.html#TimeLimit.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.wrappers.TimeLimit.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Constructor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>env</strong> – The environment to wrap.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – If <code class="code docutils literal notranslate"><span class="pre">env</span></code> is not a <a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.CompilerEnv"><code class="xref py py-class docutils literal notranslate"><span class="pre">CompilerEnv</span></code></a>.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.wrappers.ForkOnStep">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">compiler_gym.wrappers.</span></span><span class="sig-name descname"><span class="pre">ForkOnStep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.compiler_env.CompilerEnv"><span class="pre">CompilerEnv</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/wrappers/fork.html#ForkOnStep"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.wrappers.ForkOnStep" title="Permalink to this definition"></a></dt>
<dd><p>A wrapper that creates a fork of the environment before every step.</p>
<p>This wrapper creates a new fork of the environment before every call to
<a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv.reset" title="compiler_gym.envs.CompilerEnv.reset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">env.reset()</span></code></a>. Because of this,
this environment supports an additional <a class="reference internal" href="#compiler_gym.wrappers.ForkOnStep.undo" title="compiler_gym.wrappers.ForkOnStep.undo"><code class="xref py py-meth docutils literal notranslate"><span class="pre">env.undo()</span></code></a> method that can be used to
backtrack.</p>
<p>Example usage:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">env</span> <span class="o">=</span> <span class="n">ForkOnStep</span><span class="p">(</span><span class="n">compiler_gym</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s2">&quot;llvm-v0&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span><span class="o">.</span><span class="n">actions</span>
<span class="go">[0]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span><span class="o">.</span><span class="n">undo</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span><span class="o">.</span><span class="n">actions</span>
<span class="go">[]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Variables</dt>
<dd class="field-odd"><p><strong>stack</strong> (<em>List</em><em>[</em><a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.CompilerEnv"><em>CompilerEnv</em></a><em>]</em>) – A fork of the environment before every previous call to
<a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv.reset" title="compiler_gym.envs.CompilerEnv.reset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">env.reset()</span></code></a>, ordered
oldest to newest.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.wrappers.ForkOnStep.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.compiler_env.CompilerEnv"><span class="pre">CompilerEnv</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/wrappers/fork.html#ForkOnStep.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.wrappers.ForkOnStep.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Constructor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>env</strong> – The environment to wrap.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.wrappers.ForkOnStep.undo">
<span class="sig-name descname"><span class="pre">undo</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.compiler_env.CompilerEnv"><span class="pre">CompilerEnv</span></a></span></span><a class="reference internal" href="../_modules/compiler_gym/wrappers/fork.html#ForkOnStep.undo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.wrappers.ForkOnStep.undo" title="Permalink to this definition"></a></dt>
<dd><p>Undo the previous action.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Self.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="datasets-wrappers">
<h2><a class="toc-backref" href="#id3">Datasets wrappers</a><a class="headerlink" href="#datasets-wrappers" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.wrappers.IterateOverBenchmarks">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">compiler_gym.wrappers.</span></span><span class="sig-name descname"><span class="pre">IterateOverBenchmarks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.compiler_env.CompilerEnv"><span class="pre">CompilerEnv</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">benchmarks</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="datasets.html#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.benchmark.Benchmark"><span class="pre">Benchmark</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fork_shares_iterator</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/wrappers/datasets.html#IterateOverBenchmarks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.wrappers.IterateOverBenchmarks" title="Permalink to this definition"></a></dt>
<dd><p>Iterate over a (possibly infinite) sequence of benchmarks on each call to
reset(). Will raise <code class="code docutils literal notranslate"><span class="pre">StopIteration</span></code> on <a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv.reset" title="compiler_gym.envs.CompilerEnv.reset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">reset()</span></code></a> once the iterator is exhausted. Use
<a class="reference internal" href="#compiler_gym.wrappers.CycleOverBenchmarks" title="compiler_gym.wrappers.CycleOverBenchmarks"><code class="xref py py-class docutils literal notranslate"><span class="pre">CycleOverBenchmarks</span></code></a> or <a class="reference internal" href="#compiler_gym.wrappers.RandomOrderBenchmarks" title="compiler_gym.wrappers.RandomOrderBenchmarks"><code class="xref py py-class docutils literal notranslate"><span class="pre">RandomOrderBenchmarks</span></code></a> for wrappers
which will loop over the benchmarks.</p>
<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.wrappers.IterateOverBenchmarks.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.compiler_env.CompilerEnv"><span class="pre">CompilerEnv</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">benchmarks</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="datasets.html#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.benchmark.Benchmark"><span class="pre">Benchmark</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fork_shares_iterator</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/wrappers/datasets.html#IterateOverBenchmarks.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.wrappers.IterateOverBenchmarks.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Constructor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>env</strong> – The environment to wrap.</p></li>
<li><p><strong>benchmarks</strong> – An iterable sequence of benchmarks.</p></li>
<li><p><strong>fork_shares_iterator</strong> – If <code class="code docutils literal notranslate"><span class="pre">True</span></code>, the <code class="code docutils literal notranslate"><span class="pre">benchmarks</span></code>
iterator will bet shared by a forked environment created by
<a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv.fork" title="compiler_gym.envs.CompilerEnv.fork"><code class="xref py py-meth docutils literal notranslate"><span class="pre">env.fork()</span></code></a>. This means
that calling <a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv.reset" title="compiler_gym.envs.CompilerEnv.reset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">env.reset()</span></code></a> with one environment will
advance the iterator in the other. If <code class="code docutils literal notranslate"><span class="pre">False</span></code>, forked
environments will use <code class="code docutils literal notranslate"><span class="pre">itertools.tee()</span></code> to create a copy of
the iterator so that each iterator may advance independently.
However, this requires shared buffers between the environments which
can lead to memory overheads if <a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv.reset" title="compiler_gym.envs.CompilerEnv.reset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">env.reset()</span></code></a> is called many times more in
one environment than the other.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.wrappers.CycleOverBenchmarks">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">compiler_gym.wrappers.</span></span><span class="sig-name descname"><span class="pre">CycleOverBenchmarks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.compiler_env.CompilerEnv"><span class="pre">CompilerEnv</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">benchmarks</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="datasets.html#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.benchmark.Benchmark"><span class="pre">Benchmark</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fork_shares_iterator</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/wrappers/datasets.html#CycleOverBenchmarks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.wrappers.CycleOverBenchmarks" title="Permalink to this definition"></a></dt>
<dd><p>Cycle through a list of benchmarks on each call to <a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv.reset" title="compiler_gym.envs.CompilerEnv.reset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">reset()</span></code></a>. Same as
<a class="reference internal" href="#compiler_gym.wrappers.IterateOverBenchmarks" title="compiler_gym.wrappers.IterateOverBenchmarks"><code class="xref py py-class docutils literal notranslate"><span class="pre">IterateOverBenchmarks</span></code></a> except the list of benchmarks repeats once
exhausted.</p>
<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.wrappers.CycleOverBenchmarks.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.compiler_env.CompilerEnv"><span class="pre">CompilerEnv</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">benchmarks</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="datasets.html#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.benchmark.Benchmark"><span class="pre">Benchmark</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fork_shares_iterator</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/wrappers/datasets.html#CycleOverBenchmarks.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.wrappers.CycleOverBenchmarks.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Constructor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>env</strong> – The environment to wrap.</p></li>
<li><p><strong>benchmarks</strong> – An iterable sequence of benchmarks.</p></li>
<li><p><strong>fork_shares_iterator</strong> – If <code class="code docutils literal notranslate"><span class="pre">True</span></code>, the <code class="code docutils literal notranslate"><span class="pre">benchmarks</span></code>
iterator will be shared by a forked environment created by
<a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv.fork" title="compiler_gym.envs.CompilerEnv.fork"><code class="xref py py-meth docutils literal notranslate"><span class="pre">env.fork()</span></code></a>. This means
that calling <a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv.reset" title="compiler_gym.envs.CompilerEnv.reset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">env.reset()</span></code></a> with one environment will
advance the iterator in the other. If <code class="code docutils literal notranslate"><span class="pre">False</span></code>, forked
environments will use <code class="code docutils literal notranslate"><span class="pre">itertools.tee()</span></code> to create a copy of
the iterator so that each iterator may advance independently.
However, this requires shared buffers between the environments which
can lead to memory overheads if <a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv.reset" title="compiler_gym.envs.CompilerEnv.reset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">env.reset()</span></code></a> is called many times more in
one environment than the other.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.wrappers.CycleOverBenchmarksIterator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">compiler_gym.wrappers.</span></span><span class="sig-name descname"><span class="pre">CycleOverBenchmarksIterator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.compiler_env.CompilerEnv"><span class="pre">CompilerEnv</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">make_benchmark_iterator</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="datasets.html#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.benchmark.Benchmark"><span class="pre">Benchmark</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/wrappers/datasets.html#CycleOverBenchmarksIterator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.wrappers.CycleOverBenchmarksIterator" title="Permalink to this definition"></a></dt>
<dd><p>Same as <a class="reference internal" href="#compiler_gym.wrappers.CycleOverBenchmarks" title="compiler_gym.wrappers.CycleOverBenchmarks"><code class="xref py py-class docutils literal notranslate"><span class="pre">CycleOverBenchmarks</span></code></a> except that the user generates
the iterator.</p>
<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.wrappers.CycleOverBenchmarksIterator.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.compiler_env.CompilerEnv"><span class="pre">CompilerEnv</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">make_benchmark_iterator</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="datasets.html#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.benchmark.Benchmark"><span class="pre">Benchmark</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/wrappers/datasets.html#CycleOverBenchmarksIterator.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.wrappers.CycleOverBenchmarksIterator.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Constructor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>env</strong> – The environment to wrap.</p></li>
<li><p><strong>make_benchmark_iterator</strong> – A callback that returns an iterator over
a sequence of benchmarks. Once the iterator is exhausted, this
callback is called to produce a new iterator.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.wrappers.RandomOrderBenchmarks">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">compiler_gym.wrappers.</span></span><span class="sig-name descname"><span class="pre">RandomOrderBenchmarks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.compiler_env.CompilerEnv"><span class="pre">CompilerEnv</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">benchmarks</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="datasets.html#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.benchmark.Benchmark"><span class="pre">Benchmark</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rng</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Generator</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/wrappers/datasets.html#RandomOrderBenchmarks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.wrappers.RandomOrderBenchmarks" title="Permalink to this definition"></a></dt>
<dd><p>Select randomly from a list of benchmarks on each call to <a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv.reset" title="compiler_gym.envs.CompilerEnv.reset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">reset()</span></code></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Uniform random selection is provided by evaluating the input benchmarks
iterator into a list and sampling randomly from the list. For very large
and infinite iterables of benchmarks you must use the
<a class="reference internal" href="#compiler_gym.wrappers.IterateOverBenchmarks" title="compiler_gym.wrappers.IterateOverBenchmarks"><code class="xref py py-class docutils literal notranslate"><span class="pre">IterateOverBenchmarks</span></code></a> wrapper with your own
random sampling iterator.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.wrappers.RandomOrderBenchmarks.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="envs.html#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.compiler_env.CompilerEnv"><span class="pre">CompilerEnv</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">benchmarks</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="datasets.html#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.benchmark.Benchmark"><span class="pre">Benchmark</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rng</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Generator</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/wrappers/datasets.html#RandomOrderBenchmarks.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.wrappers.RandomOrderBenchmarks.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Constructor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>env</strong> – The environment to wrap.</p></li>
<li><p><strong>benchmarks</strong> – An iterable sequence of benchmarks. The entirety of
this input iterator is evaluated during construction.</p></li>
<li><p><strong>rng</strong> – A random number generator to use for random benchmark
selection.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="llvm-environment-wrappers">
<h2><a class="toc-backref" href="#id4">LLVM Environment wrappers</a><a class="headerlink" href="#llvm-environment-wrappers" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.wrappers.RuntimePointEstimateReward">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">compiler_gym.wrappers.</span></span><span class="sig-name descname"><span class="pre">RuntimePointEstimateReward</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">env:</span> <span class="pre">~compiler_gym.envs.llvm.llvm_env.LlvmEnv,</span> <span class="pre">runtime_count:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">30,</span> <span class="pre">warmup_count:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">0,</span> <span class="pre">estimator:</span> <span class="pre">~typing.Callable[[~typing.Iterable[float]],</span> <span class="pre">float]</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">median&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/wrappers/llvm.html#RuntimePointEstimateReward"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.wrappers.RuntimePointEstimateReward" title="Permalink to this definition"></a></dt>
<dd><p>LLVM wrapper that uses a point estimate of program runtime as reward.</p>
<p>This class wraps an LLVM environment and registers a new runtime reward
space. Runtime is estimated from one or more runtime measurements, after
optionally running one or more warmup runs. At each step, reward is the
change in runtime estimate from the runtime estimate at the previous step.</p>
<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.wrappers.RuntimePointEstimateReward.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">env:</span> <span class="pre">~compiler_gym.envs.llvm.llvm_env.LlvmEnv,</span> <span class="pre">runtime_count:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">30,</span> <span class="pre">warmup_count:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">0,</span> <span class="pre">estimator:</span> <span class="pre">~typing.Callable[[~typing.Iterable[float]],</span> <span class="pre">float]</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">median&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/wrappers/llvm.html#RuntimePointEstimateReward.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.wrappers.RuntimePointEstimateReward.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Constructor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>env</strong> – The environment to wrap.</p></li>
<li><p><strong>runtime_count</strong> – The number of times to execute the binary when
estimating the runtime.</p></li>
<li><p><strong>warmup_count</strong> – The number of warmup runs of the binary to perform
before measuring the runtime.</p></li>
<li><p><strong>estimator</strong> – A function that takes a list of runtime measurements
and produces a point estimate.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.wrappers.SynchronousSqliteLogger">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">compiler_gym.wrappers.</span></span><span class="sig-name descname"><span class="pre">SynchronousSqliteLogger</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="envs.html#compiler_gym.envs.LlvmEnv" title="compiler_gym.envs.llvm.llvm_env.LlvmEnv"><span class="pre">LlvmEnv</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">db_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">commit_frequency_in_seconds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">300</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_step_buffer_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">5000</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/wrappers/sqlite_logger.html#SynchronousSqliteLogger"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.wrappers.SynchronousSqliteLogger" title="Permalink to this definition"></a></dt>
<dd><p>A wrapper for an LLVM environment that logs all transitions to an sqlite
database.</p>
<p>Wrap an existing LLVM environment and then use it as per normal:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">env</span> <span class="o">=</span> <span class="n">SynchronousSqliteLogger</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">env</span><span class="o">=</span><span class="n">gym</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s2">&quot;llvm-autophase-ic-v0&quot;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">db_path</span><span class="o">=</span><span class="s2">&quot;example.db&quot;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>Connect to the database file you specified:</p>
<p>There are two tables:</p>
<ol class="arabic simple">
<li><p>States: records every unique combination of benchmark + actions. For each
entry, records an identifying state ID, the episode reward, and whether
the episode is terminated:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sqlite</span><span class="o">&gt;</span> <span class="o">.</span><span class="n">mode</span> <span class="n">markdown</span>
<span class="n">sqlite</span><span class="o">&gt;</span> <span class="o">.</span><span class="n">headers</span> <span class="n">on</span>
<span class="n">sqlite</span><span class="o">&gt;</span> <span class="n">select</span> <span class="o">*</span> <span class="kn">from</span> <span class="nn">States</span> <span class="n">limit</span> <span class="mi">5</span><span class="p">;</span>
<span class="o">|</span>      <span class="n">benchmark_uri</span>       <span class="o">|</span> <span class="n">done</span> <span class="o">|</span> <span class="n">ir_instruction_count_oz_reward</span> <span class="o">|</span>                                 <span class="n">state_id</span> <span class="o">|</span> <span class="n">actions</span> <span class="o">|</span>
<span class="o">|--------------------------|------|--------------------------------|------------------------------------------|----------------|</span>
<span class="o">|</span> <span class="n">generator</span><span class="p">:</span><span class="o">//</span><span class="n">csmith</span><span class="o">-</span><span class="n">v0</span><span class="o">/</span><span class="mi">99</span> <span class="o">|</span> <span class="mi">0</span>    <span class="o">|</span> <span class="mf">0.0</span>                            <span class="o">|</span> <span class="n">d625b874e58f6d357b816e21871297ac5c001cf0</span> <span class="o">|</span>                <span class="o">|</span>
<span class="o">|</span> <span class="n">generator</span><span class="p">:</span><span class="o">//</span><span class="n">csmith</span><span class="o">-</span><span class="n">v0</span><span class="o">/</span><span class="mi">99</span> <span class="o">|</span> <span class="mi">0</span>    <span class="o">|</span> <span class="mf">0.0</span>                            <span class="o">|</span> <span class="n">d625b874e58f6d357b816e21871297ac5c001cf0</span> <span class="o">|</span> <span class="mi">31</span>             <span class="o">|</span>
<span class="o">|</span> <span class="n">generator</span><span class="p">:</span><span class="o">//</span><span class="n">csmith</span><span class="o">-</span><span class="n">v0</span><span class="o">/</span><span class="mi">99</span> <span class="o">|</span> <span class="mi">0</span>    <span class="o">|</span> <span class="mf">0.0</span>                            <span class="o">|</span> <span class="mi">52</span><span class="n">f7142ef606d8b1dec2ff3371c7452c8d7b81ea</span> <span class="o">|</span> <span class="mi">31</span> <span class="mi">116</span>         <span class="o">|</span>
<span class="o">|</span> <span class="n">generator</span><span class="p">:</span><span class="o">//</span><span class="n">csmith</span><span class="o">-</span><span class="n">v0</span><span class="o">/</span><span class="mi">99</span> <span class="o">|</span> <span class="mi">0</span>    <span class="o">|</span> <span class="mf">0.268005818128586</span>              <span class="o">|</span> <span class="n">d8c05bd41b7a6c6157b6a8f0f5093907c7cc7ecf</span> <span class="o">|</span> <span class="mi">31</span> <span class="mi">116</span> <span class="mi">103</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">generator</span><span class="p">:</span><span class="o">//</span><span class="n">csmith</span><span class="o">-</span><span class="n">v0</span><span class="o">/</span><span class="mi">99</span> <span class="o">|</span> <span class="mi">0</span>    <span class="o">|</span> <span class="mf">0.288621664047241</span>              <span class="o">|</span> <span class="n">c4d7ecd3807793a0d8bc281104c7f5a8aa4670f9</span> <span class="o">|</span> <span class="mi">31</span> <span class="mi">116</span> <span class="mi">103</span> <span class="mi">109</span> <span class="o">|</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Observations: records pickled, compressed, and text observation values
for each unique state.</p></li>
</ol>
<p>Caveats of this implementation:</p>
<ol class="arabic simple">
<li><p>Only <a class="reference internal" href="envs.html#compiler_gym.envs.LlvmEnv" title="compiler_gym.envs.LlvmEnv"><code class="xref py py-class docutils literal notranslate"><span class="pre">LlvmEnv</span></code></a> environments may be
wrapped.</p></li>
<li><p>The wrapped environment must have an observation space and reward space
set.</p></li>
<li><p>The observation spaces and reward spaces that are logged to database
are hardcoded. To change what is recorded, you must copy and modify this
implementation.</p></li>
<li><p>Writing to the database is synchronous and adds significant overhead to
the compute cost of the environment.</p></li>
</ol>
<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.wrappers.SynchronousSqliteLogger.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="envs.html#compiler_gym.envs.LlvmEnv" title="compiler_gym.envs.llvm.llvm_env.LlvmEnv"><span class="pre">LlvmEnv</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">db_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">commit_frequency_in_seconds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">300</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_step_buffer_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">5000</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/wrappers/sqlite_logger.html#SynchronousSqliteLogger.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.wrappers.SynchronousSqliteLogger.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Constructor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>env</strong> – The environment to wrap.</p></li>
<li><p><strong>db_path</strong> – The path of the database to log to. This file may
already exist. If it does, new entries are appended. If the files
does not exist, it is created.</p></li>
<li><p><strong>commit_frequency_in_seconds</strong> – The maximum amount of time to elapse
before writing pending logs to the database.</p></li>
<li><p><strong>max_step_buffer_length</strong> – The maximum number of calls to
<code class="code docutils literal notranslate"><span class="pre">step()</span></code> before writing pending logs to the database.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.wrappers.SynchronousSqliteLogger.flush">
<span class="sig-name descname"><span class="pre">flush</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../_modules/compiler_gym/wrappers/sqlite_logger.html#SynchronousSqliteLogger.flush"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.wrappers.SynchronousSqliteLogger.flush" title="Permalink to this definition"></a></dt>
<dd><p>Flush the buffered steps and observations to database.</p>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="views.html" class="btn btn-neutral float-left" title="compiler_gym.views" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../cc/compiler_gym/envs/llvm/service.html" class="btn btn-neutral float-right" title="compiler_gym/envs/llvm/service" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Meta Platforms, Inc.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-WJN2CKJJKH"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-WJN2CKJJKH', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>