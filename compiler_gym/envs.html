<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>compiler_gym.envs &mdash; CompilerGym 0.2.4 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="compiler_gym.envs.gcc" href="envs/gcc.html" />
    <link rel="prev" title="compiler_gym.datasets" href="datasets.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html">
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.2.4
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">Command Line Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rpc.html">RPC Service Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption"><span class="caption-text">Environments</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../llvm/index.html">LLVM Environment Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../envs/gcc.html">GCC Environment Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../envs/loop_tool.html">loop_tool Environment Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../envs/mlir.html">MLIR Environment Reference</a></li>
</ul>
<p class="caption"><span class="caption-text">Python API Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="compiler_gym.html">compiler_gym</a></li>
<li class="toctree-l1"><a class="reference internal" href="datasets.html">compiler_gym.datasets</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">compiler_gym.envs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#compilerenv">CompilerEnv</a></li>
<li class="toctree-l2"><a class="reference internal" href="#llvmenv">LlvmEnv</a></li>
<li class="toctree-l2"><a class="reference internal" href="#gccenv">GccEnv</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="envs/gcc.html">compiler_gym.envs.gcc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../llvm/api.html">compiler_gym.envs.llvm</a></li>
<li class="toctree-l1"><a class="reference internal" href="leaderboard.html">compiler_gym.leaderboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="service.html">compiler_gym.service</a></li>
<li class="toctree-l1"><a class="reference internal" href="service/runtime.html">compiler_gym.service.runtime</a></li>
<li class="toctree-l1"><a class="reference internal" href="spaces.html">compiler_gym.spaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="views.html">compiler_gym.views</a></li>
<li class="toctree-l1"><a class="reference internal" href="wrappers.html">compiler_gym.wrappers</a></li>
</ul>
<p class="caption"><span class="caption-text">C++ API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cc/compiler_gym/envs/llvm/service.html">compiler_gym/envs/llvm/service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cc/compiler_gym/service.html">compiler_gym/service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cc/compiler_gym/service/runtime.html">compiler_gym/service/runtime</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cc/compiler_gym/util.html">compiler_gym/util</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">CompilerGym</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>compiler_gym.envs</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/compiler_gym/envs.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="compiler-gym-envs">
<h1>compiler_gym.envs<a class="headerlink" href="#compiler-gym-envs" title="Permalink to this headline"></a></h1>
<p>The <a class="reference internal" href="#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.CompilerEnv"><code class="xref py py-class docutils literal notranslate"><span class="pre">CompilerEnv</span></code></a> environment
is a drop-in replacement for the basic <code class="code docutils literal notranslate"><span class="pre">gym.Env</span></code> class, with
extended functionality for compilers. Some compiler services may further
extend the functionality by subclassing from
<a class="reference internal" href="#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.CompilerEnv"><code class="xref py py-class docutils literal notranslate"><span class="pre">CompilerEnv</span></code></a>. The following
environment classes are available:</p>
<div class="contents local topic" id="environment-classes">
<p class="topic-title">Environment Classes:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#compilerenv" id="id1">CompilerEnv</a></p></li>
<li><p><a class="reference internal" href="#llvmenv" id="id2">LlvmEnv</a></p></li>
<li><p><a class="reference internal" href="#gccenv" id="id3">GccEnv</a></p></li>
</ul>
</div>
<div class="section" id="compilerenv">
<h2><a class="toc-backref" href="#id1">CompilerEnv</a><a class="headerlink" href="#compilerenv" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.envs.CompilerEnv">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">compiler_gym.envs.</span></span><span class="sig-name descname"><span class="pre">CompilerEnv</span></span><a class="reference internal" href="../_modules/compiler_gym/envs/compiler_env.html#CompilerEnv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.CompilerEnv" title="Permalink to this definition"></a></dt>
<dd><p>An OpenAI gym environment for compiler optimizations.</p>
<p>The easiest way to create a CompilerGym environment is to call
<code class="code docutils literal notranslate"><span class="pre">gym.make()</span></code> on one of the registered environments:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">env</span> <span class="o">=</span> <span class="n">gym</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s2">&quot;llvm-v0&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>See <code class="code docutils literal notranslate"><span class="pre">compiler_gym.COMPILER_GYM_ENVS</span></code> for a list of registered
environment names.</p>
<p>Alternatively, an environment can be constructed directly, such as by
connecting to a running compiler service at <code class="code docutils literal notranslate"><span class="pre">localhost:8080</span></code> (see
<a class="reference internal" href="service.html"><span class="doc">this document</span></a> for more details):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">env</span> <span class="o">=</span> <span class="n">ClientServiceCompilerEnv</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">service</span><span class="o">=</span><span class="s2">&quot;localhost:8080&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">observation_space</span><span class="o">=</span><span class="s2">&quot;features&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">reward_space</span><span class="o">=</span><span class="s2">&quot;runtime&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">rewards</span><span class="o">=</span><span class="p">[</span><span class="n">env_reward_spaces</span><span class="p">],</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>Once constructed, an environment can be used in exactly the same way as a
regular <code class="code docutils literal notranslate"><span class="pre">gym.Env</span></code>, e.g.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">observation</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cumulative_reward</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">action</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">action_space</span><span class="o">.</span><span class="n">sample</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">observation</span><span class="p">,</span> <span class="n">reward</span><span class="p">,</span> <span class="n">done</span><span class="p">,</span> <span class="n">info</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">cumulative_reward</span> <span class="o">+=</span> <span class="n">reward</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">if</span> <span class="n">done</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">break</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Reward after </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2"> steps: </span><span class="si">{</span><span class="n">cumulative_reward</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="go">Reward after 100 steps: -0.32123</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.envs.CompilerEnv.__init__">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/envs/compiler_env.html#CompilerEnv.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.CompilerEnv.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Construct an environment.</p>
<p>Do not construct an environment directly. Use <code class="code docutils literal notranslate"><span class="pre">gym.make()</span></code> on one
of the registered environments:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">gym</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s2">&quot;llvm-v0&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">env</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">pass</span>  <span class="c1"># Use environment</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.envs.CompilerEnv.action_space">
<em class="property"><span class="pre">abstract</span> <span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">action_space</span></span><em class="property"><span class="pre">:</span> <span class="pre">gym.spaces.space.Space</span></em><a class="headerlink" href="#compiler_gym.envs.CompilerEnv.action_space" title="Permalink to this definition"></a></dt>
<dd><p>The current action space.</p>
<dl class="field-list simple">
<dt class="field-odd">Getter</dt>
<dd class="field-odd"><p>Get the current action space.</p>
</dd>
<dt class="field-even">Setter</dt>
<dd class="field-even"><p>Set the action space to use. Must be an entry in
<code class="code docutils literal notranslate"><span class="pre">action_spaces</span></code>. If <code class="code docutils literal notranslate"><span class="pre">None</span></code>, the default action space is
selected.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.envs.CompilerEnv.action_spaces">
<em class="property"><span class="pre">abstract</span> <span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">action_spaces</span></span><em class="property"><span class="pre">:</span> <span class="pre">List[str]</span></em><a class="headerlink" href="#compiler_gym.envs.CompilerEnv.action_spaces" title="Permalink to this definition"></a></dt>
<dd><p>A list of supported action space names.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.envs.CompilerEnv.apply">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">apply</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="compiler_gym.html#compiler_gym.CompilerEnvState" title="compiler_gym.compiler_env_state.CompilerEnvState"><span class="pre">compiler_gym.compiler_env_state.CompilerEnvState</span></a></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">None</span><a class="reference internal" href="../_modules/compiler_gym/envs/compiler_env.html#CompilerEnv.apply"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.CompilerEnv.apply" title="Permalink to this definition"></a></dt>
<dd><p>Replay this state on the given environment.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>state</strong> – A <a class="reference internal" href="compiler_gym.html#compiler_gym.CompilerEnvState" title="compiler_gym.CompilerEnvState"><code class="xref py py-class docutils literal notranslate"><span class="pre">CompilerEnvState</span></code></a>
instance.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If this state cannot be applied.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.envs.CompilerEnv.benchmark">
<em class="property"><span class="pre">abstract</span> <span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">benchmark</span></span><em class="property"><span class="pre">:</span> <span class="pre">compiler_gym.datasets.benchmark.Benchmark</span></em><a class="headerlink" href="#compiler_gym.envs.CompilerEnv.benchmark" title="Permalink to this definition"></a></dt>
<dd><p>Get or set the benchmark to use.</p>
<dl class="field-list simple">
<dt class="field-odd">Getter</dt>
<dd class="field-odd"><p>Get <a class="reference internal" href="datasets.html#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.Benchmark"><code class="xref py py-class docutils literal notranslate"><span class="pre">Benchmark</span></code></a> that
is currently in use.</p>
</dd>
<dt class="field-even">Setter</dt>
<dd class="field-even"><p>Set the benchmark to use. Either a <a class="reference internal" href="datasets.html#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.Benchmark"><code class="xref py py-class docutils literal notranslate"><span class="pre">Benchmark</span></code></a> instance, or the URI of a
benchmark as in <a class="reference internal" href="datasets.html#compiler_gym.datasets.Datasets.benchmark_uris" title="compiler_gym.datasets.Datasets.benchmark_uris"><code class="xref py py-meth docutils literal notranslate"><span class="pre">env.datasets.benchmark_uris()</span></code></a>.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Setting a new benchmark has no effect until
<a class="reference internal" href="#compiler_gym.envs.CompilerEnv.reset" title="compiler_gym.envs.CompilerEnv.reset"><code class="xref py py-func docutils literal notranslate"><span class="pre">env.reset()</span></code></a> is called.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.envs.CompilerEnv.close">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/envs/compiler_env.html#CompilerEnv.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.CompilerEnv.close" title="Permalink to this definition"></a></dt>
<dd><p>Close the environment.</p>
<p>Once closed, <a class="reference internal" href="#compiler_gym.envs.CompilerEnv.reset" title="compiler_gym.envs.CompilerEnv.reset"><code class="xref py py-func docutils literal notranslate"><span class="pre">reset()</span></code></a> must be called before the environment is used
again.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You must make sure to call <code class="code docutils literal notranslate"><span class="pre">env.close()</span></code> on a CompilerGym
environment when you are done with it. This is needed to perform
manual tidying up of temporary files and processes. See <a class="reference internal" href="../faq.html#do-i-need-to-call-env-close"><span class="std std-ref">the
FAQ</span></a> for more details.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.envs.CompilerEnv.commandline">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">commandline</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">str</span><a class="reference internal" href="../_modules/compiler_gym/envs/compiler_env.html#CompilerEnv.commandline"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.CompilerEnv.commandline" title="Permalink to this definition"></a></dt>
<dd><p>Interface for <a class="reference internal" href="#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.CompilerEnv"><code class="xref py py-class docutils literal notranslate"><span class="pre">CompilerEnv</span></code></a>
subclasses to provide an equivalent commandline invocation to the
current environment state.</p>
<p>See also <a class="reference internal" href="#compiler_gym.envs.CompilerEnv.commandline_to_actions" title="compiler_gym.envs.CompilerEnv.commandline_to_actions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">commandline_to_actions()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A string commandline invocation.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.envs.CompilerEnv.commandline_to_actions">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">commandline_to_actions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">commandline</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">compiler_gym.util.gym_type_hints.ActionType</span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/compiler_gym/envs/compiler_env.html#CompilerEnv.commandline_to_actions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.CompilerEnv.commandline_to_actions" title="Permalink to this definition"></a></dt>
<dd><p>Interface for <a class="reference internal" href="#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.CompilerEnv"><code class="xref py py-class docutils literal notranslate"><span class="pre">CompilerEnv</span></code></a>
subclasses to convert from a commandline invocation to a sequence of
actions.</p>
<p>See also <a class="reference internal" href="#compiler_gym.envs.CompilerEnv.commandline" title="compiler_gym.envs.CompilerEnv.commandline"><code class="xref py py-meth docutils literal notranslate"><span class="pre">commandline()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of actions.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.envs.CompilerEnv.compiler_version">
<em class="property"><span class="pre">abstract</span> <span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">compiler_version</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#compiler_gym.envs.CompilerEnv.compiler_version" title="Permalink to this definition"></a></dt>
<dd><p>The version string of the underlying compiler that this service supports.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.envs.CompilerEnv.episode_reward">
<em class="property"><span class="pre">abstract</span> <span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">episode_reward</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional[float]</span></em><a class="headerlink" href="#compiler_gym.envs.CompilerEnv.episode_reward" title="Permalink to this definition"></a></dt>
<dd><p><cite>CompilerEnv.reward_space
&lt;compiler_gym.envs.CompilerGym.reward_space&gt;</cite> is set, this value is the
sum of all rewards for the current episode.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>If</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>func</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.envs.CompilerEnv.episode_walltime">
<em class="property"><span class="pre">abstract</span> <span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">episode_walltime</span></span><em class="property"><span class="pre">:</span> <span class="pre">float</span></em><a class="headerlink" href="#compiler_gym.envs.CompilerEnv.episode_walltime" title="Permalink to this definition"></a></dt>
<dd><p>Return the amount of time in seconds since the last call to
<a class="reference internal" href="#compiler_gym.envs.CompilerEnv.reset" title="compiler_gym.envs.CompilerEnv.reset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">reset()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.envs.CompilerEnv.fork">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">fork</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="#compiler_gym.envs.CompilerEnv" title="compiler_gym.envs.compiler_env.CompilerEnv"><span class="pre">compiler_gym.envs.compiler_env.CompilerEnv</span></a><a class="reference internal" href="../_modules/compiler_gym/envs/compiler_env.html#CompilerEnv.fork"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.CompilerEnv.fork" title="Permalink to this definition"></a></dt>
<dd><p>Fork a new environment with exactly the same state.</p>
<p>This creates a duplicate environment instance with the current state.
The new environment is entirely independently of the source environment.
The user must call <a class="reference internal" href="#compiler_gym.envs.CompilerEnv.close" title="compiler_gym.envs.CompilerEnv.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code></a>
on the original and new environments.</p>
<p>If not already in an episode, <a class="reference internal" href="#compiler_gym.envs.CompilerEnv.reset" title="compiler_gym.envs.CompilerEnv.reset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">reset()</span></code></a> is called.</p>
<p>Example usage:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">env</span> <span class="o">=</span> <span class="n">gym</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s2">&quot;llvm-v0&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="go"># ... use env</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_env</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">fork</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_env</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">env</span><span class="o">.</span><span class="n">state</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A new environment instance.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.envs.CompilerEnv.in_episode">
<em class="property"><span class="pre">abstract</span> <span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">in_episode</span></span><em class="property"><span class="pre">:</span> <span class="pre">bool</span></em><a class="headerlink" href="#compiler_gym.envs.CompilerEnv.in_episode" title="Permalink to this definition"></a></dt>
<dd><p>Whether the service is ready for <a class="reference internal" href="#compiler_gym.envs.CompilerEnv.step" title="compiler_gym.envs.CompilerEnv.step"><code class="xref py py-func docutils literal notranslate"><span class="pre">step()</span></code></a> to be called,
i.e. <a class="reference internal" href="#compiler_gym.envs.CompilerEnv.reset" title="compiler_gym.envs.CompilerEnv.reset"><code class="xref py py-func docutils literal notranslate"><span class="pre">reset()</span></code></a> has been called and <a class="reference internal" href="#compiler_gym.envs.CompilerEnv.close" title="compiler_gym.envs.CompilerEnv.close"><code class="xref py py-func docutils literal notranslate"><span class="pre">close()</span></code></a> has not.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="code docutils literal notranslate"><span class="pre">True</span></code> if in an episode, else <code class="code docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.envs.CompilerEnv.logger">
<em class="property"><span class="pre">abstract</span> <span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">logger</span></span><a class="headerlink" href="#compiler_gym.envs.CompilerEnv.logger" title="Permalink to this definition"></a></dt>
<dd><div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 0.2.1.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.envs.CompilerEnv.multistep">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">multistep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actions</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">compiler_gym.util.gym_type_hints.ActionType</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">observation_spaces</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="views.html#compiler_gym.views.ObservationSpaceSpec" title="compiler_gym.views.observation_space_spec.ObservationSpaceSpec"><span class="pre">compiler_gym.views.observation_space_spec.ObservationSpaceSpec</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reward_spaces</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="spaces.html#compiler_gym.spaces.Reward" title="compiler_gym.spaces.reward.Reward"><span class="pre">compiler_gym.spaces.reward.Reward</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">observations</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="views.html#compiler_gym.views.ObservationSpaceSpec" title="compiler_gym.views.observation_space_spec.ObservationSpaceSpec"><span class="pre">compiler_gym.views.observation_space_spec.ObservationSpaceSpec</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rewards</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="spaces.html#compiler_gym.spaces.Reward" title="compiler_gym.spaces.reward.Reward"><span class="pre">compiler_gym.spaces.reward.Reward</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/envs/compiler_env.html#CompilerEnv.multistep"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.CompilerEnv.multistep" title="Permalink to this definition"></a></dt>
<dd><p>Take a sequence of steps and return the final observation and reward.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>action</strong> – A sequence of actions to apply in order.</p></li>
<li><p><strong>observation_spaces</strong> – A list of observation spaces to compute
observations from. If provided, this changes the <code class="code docutils literal notranslate"><span class="pre">observation</span></code>
element of the return tuple to be a list of observations from the
requested spaces. The default <code class="code docutils literal notranslate"><span class="pre">env.observation_space</span></code> is not
returned.</p></li>
<li><p><strong>reward_spaces</strong> – A list of reward spaces to compute rewards from. If
provided, this changes the <code class="code docutils literal notranslate"><span class="pre">reward</span></code> element of the return
tuple to be a list of rewards from the requested spaces. The default
<code class="code docutils literal notranslate"><span class="pre">env.reward_space</span></code> is not returned.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A tuple of observation, reward, done, and info. Observation and
reward are None if default observation/reward is not set.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.envs.CompilerEnv.observation">
<em class="property"><span class="pre">abstract</span> <span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">observation</span></span><em class="property"><span class="pre">:</span> <span class="pre">compiler_gym.views.observation.ObservationView</span></em><a class="headerlink" href="#compiler_gym.envs.CompilerEnv.observation" title="Permalink to this definition"></a></dt>
<dd><p>A view of the available observation spaces that permits
on-demand computation of observations.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.envs.CompilerEnv.observation_space">
<em class="property"><span class="pre">abstract</span> <span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">observation_space</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional[gym.spaces.space.Space]</span></em><a class="headerlink" href="#compiler_gym.envs.CompilerEnv.observation_space" title="Permalink to this definition"></a></dt>
<dd><p>The observation space that is used to return an observation value in
<a class="reference internal" href="#compiler_gym.envs.CompilerEnv.step" title="compiler_gym.envs.CompilerEnv.step"><code class="xref py py-func docutils literal notranslate"><span class="pre">step()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Getter</dt>
<dd class="field-odd"><p>Returns the underlying observation space, or <code class="code docutils literal notranslate"><span class="pre">None</span></code> if
not set.</p>
</dd>
<dt class="field-even">Setter</dt>
<dd class="field-even"><p>Set the default observation space.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.envs.CompilerEnv.render">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">render</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'human'</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/compiler_gym/envs/compiler_env.html#CompilerEnv.render"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.CompilerEnv.render" title="Permalink to this definition"></a></dt>
<dd><p>Render the environment.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> – The render mode to use.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – If a default observation space is not set, or if the
requested render mode does not exist.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.envs.CompilerEnv.reset">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">benchmark:</span> <span class="pre">Optional[Union[str</span></em>, <em class="sig-param"><span class="pre">compiler_gym.datasets.benchmark.Benchmark]]</span> <span class="pre">=</span> <span class="pre">None</span></em>, <em class="sig-param"><span class="pre">action_space:</span> <span class="pre">Optional[str]</span> <span class="pre">=</span> <span class="pre">None</span></em>, <em class="sig-param"><span class="pre">observation_space:</span> <span class="pre">Union[compiler_gym.util.gym_type_hints.OptionalArgumentValue</span></em>, <em class="sig-param"><span class="pre">str</span></em>, <em class="sig-param"><span class="pre">compiler_gym.views.observation_space_spec.ObservationSpaceSpec]</span> <span class="pre">=</span> <span class="pre">&lt;OptionalArgumentValue.UNCHANGED:</span> <span class="pre">1&gt;</span></em>, <em class="sig-param"><span class="pre">reward_space:</span> <span class="pre">Union[compiler_gym.util.gym_type_hints.OptionalArgumentValue</span></em>, <em class="sig-param"><span class="pre">str</span></em>, <em class="sig-param"><span class="pre">compiler_gym.spaces.reward.Reward]</span> <span class="pre">=</span> <span class="pre">&lt;OptionalArgumentValue.UNCHANGED:</span> <span class="pre">1&gt;</span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">compiler_gym.util.gym_type_hints.ObservationType</span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/compiler_gym/envs/compiler_env.html#CompilerEnv.reset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.CompilerEnv.reset" title="Permalink to this definition"></a></dt>
<dd><p>Reset the environment state.</p>
<p>This method must be called before <a class="reference internal" href="#compiler_gym.envs.CompilerEnv.step" title="compiler_gym.envs.CompilerEnv.step"><code class="xref py py-func docutils literal notranslate"><span class="pre">step()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>benchmark</strong> – The name of the benchmark to use. If provided, it
overrides any value that was set during <a class="reference internal" href="#compiler_gym.envs.CompilerEnv.__init__" title="compiler_gym.envs.CompilerEnv.__init__"><code class="xref py py-func docutils literal notranslate"><span class="pre">__init__()</span></code></a>, and
becomes subsequent calls to <code class="code docutils literal notranslate"><span class="pre">reset()</span></code> will use this benchmark.
If no benchmark is provided, and no benchmark was provided to
<code class="xref py py-func docutils literal notranslate"><span class="pre">__init___()</span></code>, the service will randomly select a benchmark to
use.</p></li>
<li><p><strong>action_space</strong> – The name of the action space to use. If provided,
it overrides any value that set during <a class="reference internal" href="#compiler_gym.envs.CompilerEnv.__init__" title="compiler_gym.envs.CompilerEnv.__init__"><code class="xref py py-func docutils literal notranslate"><span class="pre">__init__()</span></code></a>, and
subsequent calls to <code class="code docutils literal notranslate"><span class="pre">reset()</span></code> will use this action space. If
no action space is provided, the default action space is used.</p></li>
<li><p><strong>observation_space</strong> – Compute and return observations at each
<a class="reference internal" href="#compiler_gym.envs.CompilerEnv.step" title="compiler_gym.envs.CompilerEnv.step"><code class="xref py py-func docutils literal notranslate"><span class="pre">step()</span></code></a> from this space. Accepts a string name or an
<a class="reference internal" href="views.html#compiler_gym.views.ObservationSpaceSpec" title="compiler_gym.views.ObservationSpaceSpec"><code class="xref py py-class docutils literal notranslate"><span class="pre">ObservationSpaceSpec</span></code></a>. If <code class="code docutils literal notranslate"><span class="pre">None</span></code>,
<a class="reference internal" href="#compiler_gym.envs.CompilerEnv.step" title="compiler_gym.envs.CompilerEnv.step"><code class="xref py py-func docutils literal notranslate"><span class="pre">step()</span></code></a> returns <code class="code docutils literal notranslate"><span class="pre">None</span></code> for the observation value. If
<code class="code docutils literal notranslate"><span class="pre">OptionalArgumentValue.UNCHANGED</span></code> (the default value), the
observation space remains unchanged from the previous episode. For
available spaces, see <a class="reference internal" href="views.html#compiler_gym.views.ObservationView" title="compiler_gym.views.ObservationView"><code class="xref py py-class docutils literal notranslate"><span class="pre">env.observation.spaces</span></code></a>.</p></li>
<li><p><strong>reward_space</strong> – Compute and return reward at each <a class="reference internal" href="#compiler_gym.envs.CompilerEnv.step" title="compiler_gym.envs.CompilerEnv.step"><code class="xref py py-func docutils literal notranslate"><span class="pre">step()</span></code></a>
from this space. Accepts a string name or a <a class="reference internal" href="spaces.html#compiler_gym.spaces.Reward" title="compiler_gym.spaces.Reward"><code class="xref py py-class docutils literal notranslate"><span class="pre">Reward</span></code></a>. If <code class="code docutils literal notranslate"><span class="pre">None</span></code>, <a class="reference internal" href="#compiler_gym.envs.CompilerEnv.step" title="compiler_gym.envs.CompilerEnv.step"><code class="xref py py-func docutils literal notranslate"><span class="pre">step()</span></code></a>
returns <code class="code docutils literal notranslate"><span class="pre">None</span></code> for the reward value.  If
<code class="code docutils literal notranslate"><span class="pre">OptionalArgumentValue.UNCHANGED</span></code> (the default value), the
observation space remains unchanged from the previous episode. For
available spaces, see <a class="reference internal" href="views.html#compiler_gym.views.RewardView" title="compiler_gym.views.RewardView"><code class="xref py py-class docutils literal notranslate"><span class="pre">env.reward.spaces</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The initial observation.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="datasets.html#compiler_gym.datasets.BenchmarkInitError" title="compiler_gym.datasets.BenchmarkInitError"><strong>BenchmarkInitError</strong></a> – If the benchmark is invalid. In this case,
another benchmark must be used.</p></li>
<li><p><strong>TypeError</strong> – If no benchmark has been set, and the environment
does not have a default benchmark to select from.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.envs.CompilerEnv.reward">
<em class="property"><span class="pre">abstract</span> <span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">reward</span></span><em class="property"><span class="pre">:</span> <span class="pre">compiler_gym.views.reward.RewardView</span></em><a class="headerlink" href="#compiler_gym.envs.CompilerEnv.reward" title="Permalink to this definition"></a></dt>
<dd><p>A view of the available reward spaces that permits on-demand
computation of rewards.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.envs.CompilerEnv.reward_range">
<em class="property"><span class="pre">abstract</span> <span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">reward_range</span></span><em class="property"><span class="pre">:</span> <span class="pre">Tuple[float,</span> <span class="pre">float]</span></em><a class="headerlink" href="#compiler_gym.envs.CompilerEnv.reward_range" title="Permalink to this definition"></a></dt>
<dd><p>A tuple indicating the range of reward values.</p>
<p>Default range is (-inf, +inf).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.envs.CompilerEnv.reward_space">
<em class="property"><span class="pre">abstract</span> <span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">reward_space</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional[compiler_gym.spaces.reward.Reward]</span></em><a class="headerlink" href="#compiler_gym.envs.CompilerEnv.reward_space" title="Permalink to this definition"></a></dt>
<dd><p>The default reward space that is used to return a reward value from
<a class="reference internal" href="#compiler_gym.envs.CompilerEnv.step" title="compiler_gym.envs.CompilerEnv.step"><code class="xref py py-func docutils literal notranslate"><span class="pre">step()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Getter</dt>
<dd class="field-odd"><p>Returns a <a class="reference internal" href="spaces.html#compiler_gym.spaces.Reward" title="compiler_gym.spaces.Reward"><code class="xref py py-class docutils literal notranslate"><span class="pre">Reward</span></code></a>,
or <code class="code docutils literal notranslate"><span class="pre">None</span></code> if not set.</p>
</dd>
<dt class="field-even">Setter</dt>
<dd class="field-even"><p>Set the default reward space.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.envs.CompilerEnv.state">
<em class="property"><span class="pre">abstract</span> <span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">state</span></span><em class="property"><span class="pre">:</span> <span class="pre">compiler_gym.compiler_env_state.CompilerEnvState</span></em><a class="headerlink" href="#compiler_gym.envs.CompilerEnv.state" title="Permalink to this definition"></a></dt>
<dd><p>The tuple representation of the current environment state.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.envs.CompilerEnv.step">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">step</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">action</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">compiler_gym.util.gym_type_hints.ActionType</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">observation_spaces</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="views.html#compiler_gym.views.ObservationSpaceSpec" title="compiler_gym.views.observation_space_spec.ObservationSpaceSpec"><span class="pre">compiler_gym.views.observation_space_spec.ObservationSpaceSpec</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reward_spaces</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="spaces.html#compiler_gym.spaces.Reward" title="compiler_gym.spaces.reward.Reward"><span class="pre">compiler_gym.spaces.reward.Reward</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">observations</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="views.html#compiler_gym.views.ObservationSpaceSpec" title="compiler_gym.views.observation_space_spec.ObservationSpaceSpec"><span class="pre">compiler_gym.views.observation_space_spec.ObservationSpaceSpec</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rewards</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="spaces.html#compiler_gym.spaces.Reward" title="compiler_gym.spaces.reward.Reward"><span class="pre">compiler_gym.spaces.reward.Reward</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">compiler_gym.util.gym_type_hints.ObservationType</span><span class="p"><span class="pre">,</span> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">compiler_gym.util.gym_type_hints.ObservationType</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">bool</span><span class="p"><span class="pre">,</span> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/compiler_gym/envs/compiler_env.html#CompilerEnv.step"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.CompilerEnv.step" title="Permalink to this definition"></a></dt>
<dd><p>Take a step.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>action</strong> – An action.</p></li>
<li><p><strong>observation_spaces</strong> – A list of observation spaces to compute
observations from. If provided, this changes the <code class="code docutils literal notranslate"><span class="pre">observation</span></code>
element of the return tuple to be a list of observations from the
requested spaces. The default <code class="code docutils literal notranslate"><span class="pre">env.observation_space</span></code> is not
returned.</p></li>
<li><p><strong>reward_spaces</strong> – A list of reward spaces to compute rewards from. If
provided, this changes the <code class="code docutils literal notranslate"><span class="pre">reward</span></code> element of the return
tuple to be a list of rewards from the requested spaces. The default
<code class="code docutils literal notranslate"><span class="pre">env.reward_space</span></code> is not returned.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A tuple of observation, reward, done, and info. Observation and
reward are None if default observation/reward is not set.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.envs.CompilerEnv.validate">
<em class="property"><span class="pre">abstract</span> </em><span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="compiler_gym.html#compiler_gym.CompilerEnvState" title="compiler_gym.compiler_env_state.CompilerEnvState"><span class="pre">compiler_gym.compiler_env_state.CompilerEnvState</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="compiler_gym.html#compiler_gym.ValidationResult" title="compiler_gym.validation_result.ValidationResult"><span class="pre">compiler_gym.validation_result.ValidationResult</span></a><a class="reference internal" href="../_modules/compiler_gym/envs/compiler_env.html#CompilerEnv.validate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.CompilerEnv.validate" title="Permalink to this definition"></a></dt>
<dd><p>Validate an environment’s state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>state</strong> – A state to environment. If not provided, the current state
is validated.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <a class="reference internal" href="compiler_gym.html#compiler_gym.ValidationResult" title="compiler_gym.ValidationResult"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValidationResult</span></code></a>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.envs.CompilerEnv.version">
<em class="property"><span class="pre">abstract</span> <span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">version</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#compiler_gym.envs.CompilerEnv.version" title="Permalink to this definition"></a></dt>
<dd><p>The version string of the compiler service.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="llvmenv">
<h2><a class="toc-backref" href="#id2">LlvmEnv</a><a class="headerlink" href="#llvmenv" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.envs.LlvmEnv">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">compiler_gym.envs.</span></span><span class="sig-name descname"><span class="pre">LlvmEnv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">benchmark</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="datasets.html#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.benchmark.Benchmark"><span class="pre">compiler_gym.datasets.benchmark.Benchmark</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datasets_site_path</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">pathlib.Path</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/envs/llvm/llvm_env.html#LlvmEnv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.LlvmEnv" title="Permalink to this definition"></a></dt>
<dd><p>A specialized ClientServiceCompilerEnv for LLVM.</p>
<p>This extends the default <code class="xref py py-class docutils literal notranslate"><span class="pre">ClientServiceCompilerEnv</span></code> environment, adding extra LLVM
functionality. Specifically, the actions use the <a class="reference internal" href="spaces.html#compiler_gym.spaces.CommandlineFlag" title="compiler_gym.spaces.CommandlineFlag"><code class="xref py py-class docutils literal notranslate"><span class="pre">CommandlineFlag</span></code></a> space, which is a type of
<code class="code docutils literal notranslate"><span class="pre">Discrete</span></code> space that provides additional documentation about each
action, and the <a class="reference internal" href="#compiler_gym.envs.LlvmEnv.commandline" title="compiler_gym.envs.LlvmEnv.commandline"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LlvmEnv.commandline()</span></code></a> method can be used to produce an
equivalent LLVM opt invocation for the current environment state.</p>
<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.envs.LlvmEnv.commandline">
<span class="sig-name descname"><span class="pre">commandline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">textformat</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">str</span><a class="reference internal" href="../_modules/compiler_gym/envs/llvm/llvm_env.html#LlvmEnv.commandline"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.LlvmEnv.commandline" title="Permalink to this definition"></a></dt>
<dd><p>Returns an LLVM <code class="code docutils literal notranslate"><span class="pre">opt</span></code> command line invocation for the current
environment state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>textformat</strong> – Whether to generate a command line that processes
text-format LLVM-IR or bitcode (the default).</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A command line string.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.envs.LlvmEnv.commandline_to_actions">
<span class="sig-name descname"><span class="pre">commandline_to_actions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">commandline</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/compiler_gym/envs/llvm/llvm_env.html#LlvmEnv.commandline_to_actions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.LlvmEnv.commandline_to_actions" title="Permalink to this definition"></a></dt>
<dd><p>Returns a list of actions from the given command line.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>commandline</strong> – A command line invocation, as generated by
<a class="reference internal" href="#compiler_gym.envs.LlvmEnv.commandline" title="compiler_gym.envs.LlvmEnv.commandline"><code class="xref py py-meth docutils literal notranslate"><span class="pre">env.commandline()</span></code></a>.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of actions.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – In case the command line string is malformed.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.envs.LlvmEnv.fork">
<span class="sig-name descname"><span class="pre">fork</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/envs/llvm/llvm_env.html#LlvmEnv.fork"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.LlvmEnv.fork" title="Permalink to this definition"></a></dt>
<dd><p>Fork a new environment with exactly the same state.</p>
<p>This creates a duplicate environment instance with the current state.
The new environment is entirely independently of the source environment.
The user must call <a class="reference internal" href="#compiler_gym.envs.CompilerEnv.close" title="compiler_gym.envs.CompilerEnv.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code></a>
on the original and new environments.</p>
<p>If not already in an episode, <a class="reference internal" href="#compiler_gym.envs.CompilerEnv.reset" title="compiler_gym.envs.CompilerEnv.reset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">reset()</span></code></a> is called.</p>
<p>Example usage:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">env</span> <span class="o">=</span> <span class="n">gym</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s2">&quot;llvm-v0&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="go"># ... use env</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_env</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">fork</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_env</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">env</span><span class="o">.</span><span class="n">state</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A new environment instance.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.envs.LlvmEnv.ir">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">ir</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#compiler_gym.envs.LlvmEnv.ir" title="Permalink to this definition"></a></dt>
<dd><p>Print the LLVM-IR of the program in its current state.</p>
<p>Alias for <code class="code docutils literal notranslate"><span class="pre">env.observation[&quot;Ir&quot;]</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A string of LLVM-IR.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.envs.LlvmEnv.ir_sha1">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">ir_sha1</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#compiler_gym.envs.LlvmEnv.ir_sha1" title="Permalink to this definition"></a></dt>
<dd><p>Return the 40-characeter hex sha1 checksum of the current IR.</p>
<p>Equivalent to: <code class="code docutils literal notranslate"><span class="pre">hashlib.sha1(env.ir.encode(&quot;utf-8&quot;)).hexdigest()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A 40-character hexadecimal sha1 string.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.envs.LlvmEnv.make_benchmark">
<span class="sig-name descname"><span class="pre">make_benchmark</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputs</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">pathlib.Path</span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="../llvm/api.html#compiler_gym.envs.llvm.ClangInvocation" title="compiler_gym.envs.llvm.llvm_benchmark.ClangInvocation"><span class="pre">compiler_gym.envs.llvm.llvm_benchmark.ClangInvocation</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">pathlib.Path</span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="../llvm/api.html#compiler_gym.envs.llvm.ClangInvocation" title="compiler_gym.envs.llvm.llvm_benchmark.ClangInvocation"><span class="pre">compiler_gym.envs.llvm.llvm_benchmark.ClangInvocation</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copt</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">system_includes</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">600</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="datasets.html#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.benchmark.Benchmark"><span class="pre">compiler_gym.datasets.benchmark.Benchmark</span></a><a class="reference internal" href="../_modules/compiler_gym/envs/llvm/llvm_env.html#LlvmEnv.make_benchmark"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.LlvmEnv.make_benchmark" title="Permalink to this definition"></a></dt>
<dd><p>Create a benchmark for use with this environment.</p>
<p>This function takes one or more inputs and uses them to create an LLVM
bitcode benchmark that can be passed to
<a class="reference internal" href="#compiler_gym.envs.LlvmEnv.reset" title="compiler_gym.envs.LlvmEnv.reset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">compiler_gym.envs.LlvmEnv.reset()</span></code></a>.</p>
<p>The following input types are supported:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 39%" />
<col style="width: 16%" />
<col style="width: 45%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>File Suffix</strong></p></td>
<td><p><strong>Treated as</strong></p></td>
<td><p><strong>Converted using</strong></p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">.bc</span></code></p></td>
<td><p>LLVM IR bitcode</p></td>
<td><p>No conversion required.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">.ll</span></code></p></td>
<td><p>LLVM IR text format</p></td>
<td><p>Assembled to bitcode using llvm-as.</p></td>
</tr>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">.c</span></code>, <code class="code docutils literal notranslate"><span class="pre">.cc</span></code>, <code class="code docutils literal notranslate"><span class="pre">.cpp</span></code>, <code class="code docutils literal notranslate"><span class="pre">.cxx</span></code></p></td>
<td><p>C / C++ source</p></td>
<td><p>Compiled to bitcode using clang and the given <code class="code docutils literal notranslate"><span class="pre">copt</span></code>.</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The LLVM IR format has no compatability guarantees between versions (see
<a class="reference external" href="https://llvm.org/docs/DeveloperPolicy.html#ir-backwards-compatibility">LLVM docs</a>).
You must ensure that any <code class="code docutils literal notranslate"><span class="pre">.bc</span></code> and <code class="code docutils literal notranslate"><span class="pre">.ll</span></code> files are
compatible with the LLVM version used by CompilerGym, which can be
reported using <code class="xref py py-func docutils literal notranslate"><span class="pre">env.compiler_version</span></code>.</p>
</div>
<p>E.g. for single-source C/C++ programs, you can pass the path of the source
file:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">benchmark</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">make_benchmark</span><span class="p">(</span><span class="s1">&#39;my_app.c&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span> <span class="o">=</span> <span class="n">gym</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s2">&quot;llvm-v0&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span><span class="o">.</span><span class="n">reset</span><span class="p">(</span><span class="n">benchmark</span><span class="o">=</span><span class="n">benchmark</span><span class="p">)</span>
</pre></div>
</div>
<p>The clang invocation used is roughly equivalent to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ clang my_app.c -O0 -c -emit-llvm -o benchmark.bc
</pre></div>
</div>
<p>Additional compile-time arguments to clang can be provided using the
<code class="code docutils literal notranslate"><span class="pre">copt</span></code> argument:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">benchmark</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">make_benchmark</span><span class="p">(</span><span class="s1">&#39;/path/to/my_app.cpp&#39;</span><span class="p">,</span> <span class="n">copt</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;-O2&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>If you need more fine-grained control over the options, you can directly
construct a <a class="reference internal" href="../llvm/api.html#compiler_gym.envs.llvm.ClangInvocation" title="compiler_gym.envs.llvm.ClangInvocation"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClangInvocation</span></code></a> to pass a list of arguments to
clang:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">benchmark</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">make_benchmark</span><span class="p">(</span>
<span class="go">    ClangInvocation([&#39;/path/to/my_app.c&#39;], system_includes=False, timeout=10)</span>
<span class="go">)</span>
</pre></div>
</div>
<p>For multi-file programs, pass a list of inputs that will be compiled
separately and then linked to a single module:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">benchmark</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">make_benchmark</span><span class="p">([</span>
<span class="go">    &#39;main.c&#39;,</span>
<span class="go">    &#39;lib.cpp&#39;,</span>
<span class="go">    &#39;lib2.bc&#39;,</span>
<span class="go">    &#39;foo/input.bc&#39;</span>
<span class="go">])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputs</strong> – An input, or list of inputs.</p></li>
<li><p><strong>copt</strong> – A list of command line options to pass to clang when
compiling source files.</p></li>
<li><p><strong>system_includes</strong> – Whether to include the system standard libraries
during compilation jobs. This requires a system toolchain. See
<code class="xref py py-func docutils literal notranslate"><span class="pre">get_system_library_flags()</span></code>.</p></li>
<li><p><strong>timeout</strong> – The maximum number of seconds to allow clang to run
before terminating.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <code class="code docutils literal notranslate"><span class="pre">Benchmark</span></code> instance.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>FileNotFoundError</strong> – If any input sources are not found.</p></li>
<li><p><strong>TypeError</strong> – If the inputs are of unsupported types.</p></li>
<li><p><strong>OSError</strong> – If a suitable compiler cannot be found.</p></li>
<li><p><a class="reference internal" href="datasets.html#compiler_gym.datasets.BenchmarkInitError" title="compiler_gym.datasets.BenchmarkInitError"><strong>BenchmarkInitError</strong></a> – If a compilation job fails.</p></li>
<li><p><strong>TimeoutExpired</strong> – If a compilation job exceeds <code class="code docutils literal notranslate"><span class="pre">timeout</span></code>
seconds.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.envs.LlvmEnv.make_benchmark_from_command_line">
<span class="sig-name descname"><span class="pre">make_benchmark_from_command_line</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace_driver</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">system_includes</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">600</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference internal" href="datasets.html#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.benchmark.Benchmark"><span class="pre">compiler_gym.datasets.benchmark.Benchmark</span></a><a class="reference internal" href="../_modules/compiler_gym/envs/llvm/llvm_env.html#LlvmEnv.make_benchmark_from_command_line"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.LlvmEnv.make_benchmark_from_command_line" title="Permalink to this definition"></a></dt>
<dd><p>Create a benchmark for use with this environment.</p>
<p>This function takes a command line compiler invocation as input,
modifies it to produce an unoptimized LLVM-IR bitcode, and then runs the
modified command line to produce a bitcode benchmark.</p>
<p>For example, the command line:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">benchmark</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">make_benchmark_from_command_line</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">[</span><span class="s2">&quot;gcc&quot;</span><span class="p">,</span> <span class="s2">&quot;-DNDEBUG&quot;</span><span class="p">,</span> <span class="s2">&quot;a.c&quot;</span><span class="p">,</span> <span class="s2">&quot;b.c&quot;</span><span class="p">,</span> <span class="s2">&quot;-o&quot;</span><span class="p">,</span> <span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;-lm&quot;</span><span class="p">]</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>Will compile a.c and b.c to an unoptimized benchmark that can be then
passed to <code class="xref py py-meth docutils literal notranslate"><span class="pre">reset()</span></code>.</p>
<p>The way this works is to change the first argument of the command line
invocation to the version of clang shipped with CompilerGym, and to then
append command line flags that causes the compiler to produce LLVM-IR
with optimizations disabled. For example the input command line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gcc</span> <span class="o">-</span><span class="n">DNDEBUG</span> <span class="n">a</span><span class="o">.</span><span class="n">c</span> <span class="n">b</span><span class="o">.</span><span class="n">c</span> <span class="o">-</span><span class="n">o</span> <span class="n">foo</span> <span class="o">-</span><span class="n">lm</span>
</pre></div>
</div>
<p>Will be rewritten to be roughly equivalent to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">compiler_gym</span><span class="o">/</span><span class="n">clang</span> <span class="o">-</span><span class="n">DNDEG</span> <span class="n">a</span><span class="o">.</span><span class="n">c</span> <span class="n">b</span><span class="o">.</span><span class="n">c</span> \
    <span class="o">-</span><span class="n">Xclang</span> <span class="o">-</span><span class="n">disable</span><span class="o">-</span><span class="n">llvm</span><span class="o">-</span><span class="n">passes</span> <span class="o">-</span><span class="n">Xclang</span> <span class="o">-</span><span class="n">disable</span><span class="o">-</span><span class="n">llvm</span><span class="o">-</span><span class="n">optzns</span> \ <span class="o">-</span><span class="n">c</span>
    <span class="o">-</span><span class="n">emit</span><span class="o">-</span><span class="n">llvm</span>  <span class="o">-</span><span class="n">o</span> <span class="o">-</span>
</pre></div>
</div>
<p>The generated benchmark then has a method <code class="xref py py-meth docutils literal notranslate"><span class="pre">compile()</span></code> which
completes the linking and compilatilion to executable. For the above
example, this would be roughly equivalent to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">compiler_gym</span><span class="o">/</span><span class="n">clang</span> <span class="n">environment</span><span class="o">-</span><span class="n">bitcode</span><span class="o">.</span><span class="n">bc</span> <span class="o">-</span><span class="n">o</span> <span class="n">foo</span> <span class="o">-</span><span class="n">lm</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cmd</strong> – A command line compiler invocation, either as a list of
arguments (e.g. <code class="code docutils literal notranslate"><span class="pre">[&quot;clang&quot;,</span> <span class="pre">&quot;in.c&quot;]</span></code>) or as a single shell
string (e.g. <code class="code docutils literal notranslate"><span class="pre">&quot;clang</span> <span class="pre">in.c&quot;</span></code>).</p></li>
<li><p><strong>replace_driver</strong> – Whether to replace the first argument of the
command with the clang driver used by this environment.</p></li>
<li><p><strong>system_includes</strong> – Whether to include the system standard libraries
during compilation jobs. This requires a system toolchain. See
<code class="xref py py-func docutils literal notranslate"><span class="pre">get_system_library_flags()</span></code>.</p></li>
<li><p><strong>timeout</strong> – The maximum number of seconds to allow the compilation
job to run before terminating.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A <a class="reference internal" href="../llvm/api.html#compiler_gym.envs.llvm.BenchmarkFromCommandLine" title="compiler_gym.envs.llvm.BenchmarkFromCommandLine"><code class="xref py py-class docutils literal notranslate"><span class="pre">BenchmarkFromCommandLine</span></code></a> instance.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ValueError</strong> – If no command line is provided.</p></li>
<li><p><a class="reference internal" href="datasets.html#compiler_gym.datasets.BenchmarkInitError" title="compiler_gym.datasets.BenchmarkInitError"><strong>BenchmarkInitError</strong></a> – If executing the command line fails.</p></li>
<li><p><strong>TimeoutExpired</strong> – If a compilation job exceeds <code class="code docutils literal notranslate"><span class="pre">timeout</span></code>
seconds.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.envs.LlvmEnv.render">
<span class="sig-name descname"><span class="pre">render</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'human'</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/compiler_gym/envs/llvm/llvm_env.html#LlvmEnv.render"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.LlvmEnv.render" title="Permalink to this definition"></a></dt>
<dd><p>Render the environment.</p>
<p>ClientServiceCompilerEnv instances support two render modes: “human”, which prints
the current environment state to the terminal and return nothing; and
“ansi”, which returns a string representation of the current environment
state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mode</strong> – The render mode to use.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – If a default observation space is not set, or if the
requested render mode does not exist.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.envs.LlvmEnv.reset">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/envs/llvm/llvm_env.html#LlvmEnv.reset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.LlvmEnv.reset" title="Permalink to this definition"></a></dt>
<dd><p>Reset the environment state.</p>
<p>This method must be called before <code class="xref py py-func docutils literal notranslate"><span class="pre">step()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>benchmark</strong> – The name of the benchmark to use. If provided, it
overrides any value that was set during <code class="xref py py-func docutils literal notranslate"><span class="pre">__init__()</span></code>, and
becomes subsequent calls to <code class="code docutils literal notranslate"><span class="pre">reset()</span></code> will use this benchmark.
If no benchmark is provided, and no benchmark was provided to
<code class="xref py py-func docutils literal notranslate"><span class="pre">__init___()</span></code>, the service will randomly select a benchmark to
use.</p></li>
<li><p><strong>action_space</strong> – The name of the action space to use. If provided,
it overrides any value that set during <code class="xref py py-func docutils literal notranslate"><span class="pre">__init__()</span></code>, and
subsequent calls to <code class="code docutils literal notranslate"><span class="pre">reset()</span></code> will use this action space. If
no action space is provided, the default action space is used.</p></li>
<li><p><strong>observation_space</strong> – Compute and return observations at each
<code class="xref py py-func docutils literal notranslate"><span class="pre">step()</span></code> from this space. Accepts a string name or an
<a class="reference internal" href="views.html#compiler_gym.views.ObservationSpaceSpec" title="compiler_gym.views.ObservationSpaceSpec"><code class="xref py py-class docutils literal notranslate"><span class="pre">ObservationSpaceSpec</span></code></a>. If <code class="code docutils literal notranslate"><span class="pre">None</span></code>,
<code class="xref py py-func docutils literal notranslate"><span class="pre">step()</span></code> returns <code class="code docutils literal notranslate"><span class="pre">None</span></code> for the observation value. If
<code class="code docutils literal notranslate"><span class="pre">OptionalArgumentValue.UNCHANGED</span></code> (the default value), the
observation space remains unchanged from the previous episode. For
available spaces, see <a class="reference internal" href="views.html#compiler_gym.views.ObservationView" title="compiler_gym.views.ObservationView"><code class="xref py py-class docutils literal notranslate"><span class="pre">env.observation.spaces</span></code></a>.</p></li>
<li><p><strong>reward_space</strong> – Compute and return reward at each <code class="xref py py-func docutils literal notranslate"><span class="pre">step()</span></code>
from this space. Accepts a string name or a <a class="reference internal" href="spaces.html#compiler_gym.spaces.Reward" title="compiler_gym.spaces.Reward"><code class="xref py py-class docutils literal notranslate"><span class="pre">Reward</span></code></a>. If <code class="code docutils literal notranslate"><span class="pre">None</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">step()</span></code>
returns <code class="code docutils literal notranslate"><span class="pre">None</span></code> for the reward value.  If
<code class="code docutils literal notranslate"><span class="pre">OptionalArgumentValue.UNCHANGED</span></code> (the default value), the
observation space remains unchanged from the previous episode. For
available spaces, see <a class="reference internal" href="views.html#compiler_gym.views.RewardView" title="compiler_gym.views.RewardView"><code class="xref py py-class docutils literal notranslate"><span class="pre">env.reward.spaces</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The initial observation.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="datasets.html#compiler_gym.datasets.BenchmarkInitError" title="compiler_gym.datasets.BenchmarkInitError"><strong>BenchmarkInitError</strong></a> – If the benchmark is invalid. In this case,
another benchmark must be used.</p></li>
<li><p><strong>TypeError</strong> – If no benchmark has been set, and the environment
does not have a default benchmark to select from.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.envs.LlvmEnv.runtime_observation_count">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">runtime_observation_count</span></span><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#compiler_gym.envs.LlvmEnv.runtime_observation_count" title="Permalink to this definition"></a></dt>
<dd><p>The number of runtimes to return for the Runtime observation space.</p>
<p>See the <a class="reference internal" href="../llvm/index.html#runtime"><span class="std std-ref">Runtime observation space reference</span></a>
for further details.</p>
<p>Example usage:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">env</span> <span class="o">=</span> <span class="n">compiler_gym</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s2">&quot;llvm-v0&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span><span class="o">.</span><span class="n">runtime_observation_count</span> <span class="o">=</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">observation</span><span class="o">.</span><span class="n">Runtime</span><span class="p">())</span>
<span class="go">10</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Getter</dt>
<dd class="field-odd"><p>Returns the number of runtimes that will be returned when a
<code class="code docutils literal notranslate"><span class="pre">Runtime</span></code> observation is requested.</p>
</dd>
<dt class="field-even">Setter</dt>
<dd class="field-even"><p>Set the number of runtimes to compute when a <code class="code docutils literal notranslate"><span class="pre">Runtime</span></code>
observation is requested.</p>
</dd>
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.envs.LlvmEnv.runtime_warmup_runs_count">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">runtime_warmup_runs_count</span></span><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#compiler_gym.envs.LlvmEnv.runtime_warmup_runs_count" title="Permalink to this definition"></a></dt>
<dd><p>The number of warmup runs of the binary to perform before measuring
the Runtime observation space.</p>
<p>See the <a class="reference internal" href="../llvm/index.html#runtime"><span class="std std-ref">Runtime observation space reference</span></a>
for further details.</p>
<p>Example usage:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">env</span> <span class="o">=</span> <span class="n">compiler_gym</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s2">&quot;llvm-v0&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">env</span><span class="o">.</span><span class="n">runtime_observation_count</span> <span class="o">=</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">env</span><span class="o">.</span><span class="n">observation</span><span class="o">.</span><span class="n">Runtime</span><span class="p">())</span>
<span class="go">10</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Getter</dt>
<dd class="field-odd"><p>Returns the number of runs that be performed before measuring
the <code class="code docutils literal notranslate"><span class="pre">Runtime</span></code> observation is requested.</p>
</dd>
<dt class="field-even">Setter</dt>
<dd class="field-even"><p>Set the number of warmup runs to perform when a <code class="code docutils literal notranslate"><span class="pre">Runtime</span></code>
observation is requested.</p>
</dd>
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.envs.LlvmEnv.write_bitcode">
<span class="sig-name descname"><span class="pre">write_bitcode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">pathlib.Path</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pathlib.Path</span><a class="reference internal" href="../_modules/compiler_gym/envs/llvm/llvm_env.html#LlvmEnv.write_bitcode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.LlvmEnv.write_bitcode" title="Permalink to this definition"></a></dt>
<dd><p>Write the current program state to a bitcode file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – The path of the file to write.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The input <code class="code docutils literal notranslate"><span class="pre">path</span></code> argument.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.envs.LlvmEnv.write_ir">
<span class="sig-name descname"><span class="pre">write_ir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">pathlib.Path</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pathlib.Path</span><a class="reference internal" href="../_modules/compiler_gym/envs/llvm/llvm_env.html#LlvmEnv.write_ir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.LlvmEnv.write_ir" title="Permalink to this definition"></a></dt>
<dd><p>Write the current program state to a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>path</strong> – The path of the file to write.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The input <code class="code docutils literal notranslate"><span class="pre">path</span></code> argument.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="gccenv">
<h2><a class="toc-backref" href="#id3">GccEnv</a><a class="headerlink" href="#gccenv" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="compiler_gym.envs.GccEnv">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">compiler_gym.envs.</span></span><span class="sig-name descname"><span class="pre">GccEnv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gcc_bin</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">pathlib.Path</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'docker:gcc:11.2.0'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">benchmark</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><a class="reference internal" href="datasets.html#compiler_gym.datasets.Benchmark" title="compiler_gym.datasets.benchmark.Benchmark"><span class="pre">compiler_gym.datasets.benchmark.Benchmark</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'benchmark://chstone-v0/adpcm'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">datasets_site_path</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">pathlib.Path</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connection_settings</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="service.html#compiler_gym.service.ConnectionOpts" title="compiler_gym.service.connection.ConnectionOpts"><span class="pre">compiler_gym.service.connection.ConnectionOpts</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/compiler_gym/envs/gcc/gcc_env.html#GccEnv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.GccEnv" title="Permalink to this definition"></a></dt>
<dd><p>A specialized ClientServiceCompilerEnv for GCC.</p>
<p>This class exposes the optimization space of GCC’s command line flags
as an environment for reinforcement learning. For further details, see the
<a class="reference internal" href="../envs/gcc.html#installation"><span class="std std-ref">GCC Environment Reference</span></a>.</p>
<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.envs.GccEnv.asm">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">asm</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#compiler_gym.envs.GccEnv.asm" title="Permalink to this definition"></a></dt>
<dd><p>Get the assembly code.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.envs.GccEnv.asm_hash">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">asm_hash</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#compiler_gym.envs.GccEnv.asm_hash" title="Permalink to this definition"></a></dt>
<dd><p>Get a hash of the assembly code.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.envs.GccEnv.asm_size">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">asm_size</span></span><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#compiler_gym.envs.GccEnv.asm_size" title="Permalink to this definition"></a></dt>
<dd><p>Get the assembly code size in bytes.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.envs.GccEnv.choices">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">choices</span></span><em class="property"><span class="pre">:</span> <span class="pre">List[int]</span></em><a class="headerlink" href="#compiler_gym.envs.GccEnv.choices" title="Permalink to this definition"></a></dt>
<dd><p>Get the current choices</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.envs.GccEnv.commandline">
<span class="sig-name descname"><span class="pre">commandline</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">str</span><a class="reference internal" href="../_modules/compiler_gym/envs/gcc/gcc_env.html#GccEnv.commandline"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.GccEnv.commandline" title="Permalink to this definition"></a></dt>
<dd><p>Return a string representing the command line options.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A string.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.envs.GccEnv.gcc_spec">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">gcc_spec</span></span><em class="property"><span class="pre">:</span> <span class="pre">compiler_gym.envs.gcc.gcc.GccSpec</span></em><a class="headerlink" href="#compiler_gym.envs.GccEnv.gcc_spec" title="Permalink to this definition"></a></dt>
<dd><p>A <a class="reference internal" href="envs/gcc.html#compiler_gym.envs.gcc.gcc.GccSpec" title="compiler_gym.envs.gcc.gcc.GccSpec"><code class="xref py py-class docutils literal notranslate"><span class="pre">GccSpec</span></code></a> description of
the compiler specification.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.envs.GccEnv.instruction_counts">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">instruction_counts</span></span><em class="property"><span class="pre">:</span> <span class="pre">Dict[str,</span> <span class="pre">int]</span></em><a class="headerlink" href="#compiler_gym.envs.GccEnv.instruction_counts" title="Permalink to this definition"></a></dt>
<dd><p>Get a count of the instruction types in the assembly code.</p>
<p>Note, that it will also count fields beginning with a <code class="code docutils literal notranslate"><span class="pre">.</span></code>, like
<code class="code docutils literal notranslate"><span class="pre">.bss</span></code> and <code class="code docutils literal notranslate"><span class="pre">.align</span></code>. Make sure to remove those if not
needed.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.envs.GccEnv.obj">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">obj</span></span><em class="property"><span class="pre">:</span> <span class="pre">bytes</span></em><a class="headerlink" href="#compiler_gym.envs.GccEnv.obj" title="Permalink to this definition"></a></dt>
<dd><p>Get the object code.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.envs.GccEnv.obj_hash">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">obj_hash</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#compiler_gym.envs.GccEnv.obj_hash" title="Permalink to this definition"></a></dt>
<dd><p>Get a hash of the object code.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.envs.GccEnv.obj_size">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">obj_size</span></span><em class="property"><span class="pre">:</span> <span class="pre">int</span></em><a class="headerlink" href="#compiler_gym.envs.GccEnv.obj_size" title="Permalink to this definition"></a></dt>
<dd><p>Get the object code size in bytes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="compiler_gym.envs.GccEnv.reset">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">benchmark:</span> <span class="pre">Optional[Union[str</span></em>, <em class="sig-param"><span class="pre">compiler_gym.datasets.benchmark.Benchmark]]</span> <span class="pre">=</span> <span class="pre">None</span></em>, <em class="sig-param"><span class="pre">action_space:</span> <span class="pre">Optional[str]</span> <span class="pre">=</span> <span class="pre">None</span></em>, <em class="sig-param"><span class="pre">observation_space:</span> <span class="pre">Union[compiler_gym.util.gym_type_hints.OptionalArgumentValue</span></em>, <em class="sig-param"><span class="pre">str</span></em>, <em class="sig-param"><span class="pre">compiler_gym.views.observation_space_spec.ObservationSpaceSpec]</span> <span class="pre">=</span> <span class="pre">&lt;OptionalArgumentValue.UNCHANGED:</span> <span class="pre">1&gt;</span></em>, <em class="sig-param"><span class="pre">reward_space:</span> <span class="pre">Union[compiler_gym.util.gym_type_hints.OptionalArgumentValue</span></em>, <em class="sig-param"><span class="pre">str</span></em>, <em class="sig-param"><span class="pre">compiler_gym.spaces.reward.Reward]</span> <span class="pre">=</span> <span class="pre">&lt;OptionalArgumentValue.UNCHANGED:</span> <span class="pre">1&gt;</span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">compiler_gym.util.gym_type_hints.ObservationType</span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/compiler_gym/envs/gcc/gcc_env.html#GccEnv.reset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#compiler_gym.envs.GccEnv.reset" title="Permalink to this definition"></a></dt>
<dd><p>Reset the environment state.</p>
<p>This method must be called before <code class="xref py py-func docutils literal notranslate"><span class="pre">step()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>benchmark</strong> – The name of the benchmark to use. If provided, it
overrides any value that was set during <code class="xref py py-func docutils literal notranslate"><span class="pre">__init__()</span></code>, and
becomes subsequent calls to <code class="code docutils literal notranslate"><span class="pre">reset()</span></code> will use this benchmark.
If no benchmark is provided, and no benchmark was provided to
<code class="xref py py-func docutils literal notranslate"><span class="pre">__init___()</span></code>, the service will randomly select a benchmark to
use.</p></li>
<li><p><strong>action_space</strong> – The name of the action space to use. If provided,
it overrides any value that set during <code class="xref py py-func docutils literal notranslate"><span class="pre">__init__()</span></code>, and
subsequent calls to <code class="code docutils literal notranslate"><span class="pre">reset()</span></code> will use this action space. If
no action space is provided, the default action space is used.</p></li>
<li><p><strong>observation_space</strong> – Compute and return observations at each
<code class="xref py py-func docutils literal notranslate"><span class="pre">step()</span></code> from this space. Accepts a string name or an
<a class="reference internal" href="views.html#compiler_gym.views.ObservationSpaceSpec" title="compiler_gym.views.ObservationSpaceSpec"><code class="xref py py-class docutils literal notranslate"><span class="pre">ObservationSpaceSpec</span></code></a>. If <code class="code docutils literal notranslate"><span class="pre">None</span></code>,
<code class="xref py py-func docutils literal notranslate"><span class="pre">step()</span></code> returns <code class="code docutils literal notranslate"><span class="pre">None</span></code> for the observation value. If
<code class="code docutils literal notranslate"><span class="pre">OptionalArgumentValue.UNCHANGED</span></code> (the default value), the
observation space remains unchanged from the previous episode. For
available spaces, see <a class="reference internal" href="views.html#compiler_gym.views.ObservationView" title="compiler_gym.views.ObservationView"><code class="xref py py-class docutils literal notranslate"><span class="pre">env.observation.spaces</span></code></a>.</p></li>
<li><p><strong>reward_space</strong> – Compute and return reward at each <code class="xref py py-func docutils literal notranslate"><span class="pre">step()</span></code>
from this space. Accepts a string name or a <a class="reference internal" href="spaces.html#compiler_gym.spaces.Reward" title="compiler_gym.spaces.Reward"><code class="xref py py-class docutils literal notranslate"><span class="pre">Reward</span></code></a>. If <code class="code docutils literal notranslate"><span class="pre">None</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">step()</span></code>
returns <code class="code docutils literal notranslate"><span class="pre">None</span></code> for the reward value.  If
<code class="code docutils literal notranslate"><span class="pre">OptionalArgumentValue.UNCHANGED</span></code> (the default value), the
observation space remains unchanged from the previous episode. For
available spaces, see <a class="reference internal" href="views.html#compiler_gym.views.RewardView" title="compiler_gym.views.RewardView"><code class="xref py py-class docutils literal notranslate"><span class="pre">env.reward.spaces</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The initial observation.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference internal" href="datasets.html#compiler_gym.datasets.BenchmarkInitError" title="compiler_gym.datasets.BenchmarkInitError"><strong>BenchmarkInitError</strong></a> – If the benchmark is invalid. In this case,
another benchmark must be used.</p></li>
<li><p><strong>TypeError</strong> – If no benchmark has been set, and the environment
does not have a default benchmark to select from.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.envs.GccEnv.rtl">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">rtl</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#compiler_gym.envs.GccEnv.rtl" title="Permalink to this definition"></a></dt>
<dd><p>Get the final rtl of the program.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.envs.GccEnv.source">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">source</span></span><em class="property"><span class="pre">:</span> <span class="pre">str</span></em><a class="headerlink" href="#compiler_gym.envs.GccEnv.source" title="Permalink to this definition"></a></dt>
<dd><p>Get the source code.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="compiler_gym.envs.GccEnv.timeout">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">timeout</span></span><em class="property"><span class="pre">:</span> <span class="pre">Optional[int]</span></em><a class="headerlink" href="#compiler_gym.envs.GccEnv.timeout" title="Permalink to this definition"></a></dt>
<dd><p>Get the current compilation timeout</p>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="datasets.html" class="btn btn-neutral float-left" title="compiler_gym.datasets" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="envs/gcc.html" class="btn btn-neutral float-right" title="compiler_gym.envs.gcc" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Meta Platforms, Inc.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-WJN2CKJJKH"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-WJN2CKJJKH', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>